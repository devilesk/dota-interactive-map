!function(t){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var e;e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,e.InteractiveMap=t()}}(function(){var t;return function t(e,i,n){function r(a,s){if(!i[a]){if(!e[a]){var h="function"==typeof require&&require;if(!s&&h)return h(a,!0);if(o)return o(a,!0);var l=new Error("Cannot find module '"+a+"'");throw l.code="MODULE_NOT_FOUND",l}var c=i[a]={exports:{}};e[a][0].call(c.exports,function(t){var i=e[a][1][t];return r(i?i:t)},c,c.exports,t,e,i,n)}return i[a].exports}for(var o="function"==typeof require&&require,a=0;a<n.length;a++)r(n[a]);return r}({1:[function(t,e,i){function n(e){var i=this;this.map_tile_path=e,this.MODE="navigation",this.layerDefs=t("./layerDefinitions"),this.baseLayerDefs=t("./baseLayerDefinitions"),this.view=new o.View({zoom:0,center:a.imgCenter,projection:r.pixel,resolutions:a.resolutions,extent:[0,0,a.map_w,a.map_h]}),this.data={},this.layerIndex={},this.version="700",this.visionRadius=a.visionRadius.observer,this.movementSpeed=a.defaultMovementSpeed,this.isNight=!1,this.isDarkness=!1,this.layerFilters={marker:function(t){var e=t.get("layerDef");return t.getVisible()&&e&&("structure"==e.group||"object"==e.group)}},this.map=new o.Map({controls:o.control.defaults({zoom:!1,attribution:!1,rotate:!1}),interactions:o.interaction.defaults({altShiftDragRotate:!1,pinchRotate:!1}),target:"map",view:this.view}),this.highlightSource=new o.source.Vector({defaultDataProjection:"pixel"}),this.highlightLayer=new o.layer.Vector({source:this.highlightSource,style:s.highlight}),this.selectSource=new o.source.Vector({defaultDataProjection:"pixel"}),this.selectLayer=new o.layer.Vector({source:this.selectSource,style:s.select}),this.wardRangeSource=new o.source.Vector({defaultDataProjection:"pixel"}),this.wardRangeLayer=new o.layer.Vector({source:this.wardRangeSource}),this.rangeSources={dayVision:new o.source.Vector({defaultDataProjection:"pixel"}),nightVision:new o.source.Vector({defaultDataProjection:"pixel"}),trueSight:new o.source.Vector({defaultDataProjection:"pixel"}),attackRange:new o.source.Vector({defaultDataProjection:"pixel"})},this.rangeLayers={dayVision:new o.layer.Vector({source:this.rangeSources.dayVision,style:s.dayVision}),nightVision:new o.layer.Vector({source:this.rangeSources.nightVision,style:s.nightVision}),trueSight:new o.layer.Vector({source:this.rangeSources.trueSight,style:s.trueSight}),attackRange:new o.layer.Vector({source:this.rangeSources.attackRange,style:s.attackRange})},this.baseLayers=this.baseLayerDefs.map(function(t){var e=new o.layer.Tile({title:t.name,type:"base",extent:r.pixel.getExtent(),source:new o.source.TileImage({tileGrid:new o.tilegrid.TileGrid({origin:[0,a.map_h],resolutions:a.resolutions}),projection:r.pixel,url:i.map_tile_path+t.group+"/"+t.id+"/{z}/tile_{x}_{y}.jpg"}),visible:!!t.visible});return e.set("layerId",t.group+"-"+t.id,!0),e.set("layerDef",t,!0),e}),this.baseLayerGroup=new o.layer.Group({title:"Base Layers",layers:new o.Collection(this.baseLayers)})}var r=t("./projections"),o=t("openlayers"),a=t("./mapConstants"),s=t("./styleDefinitions"),h=(t("./dataLoader").loadGeoJSON,t("./dataLoader").loadJSON,t("./dataLoader").loadLayerGroupFromData),l=t("./util/getJSON"),c=t("./conversionFunctions").worldToLatLon,u=t("./conversionFunctions").getScaledRadius;t("./util/queryString");n.prototype.getMapData=function(t){return this.data[t||this.version]},n.prototype.getData=function(t){return this.data[t||this.version].data},n.prototype.getOverlayData=function(t){return this.data[t||this.version].data.data},n.prototype.getStatData=function(t){return this.data[t||this.version].data.stats},n.prototype.getMapLayerIndex=function(t){return t=t||this.version,this.layerIndex[t]||(this.layerIndex[t]={}),this.layerIndex[t]},n.prototype.getMapDataPath=function(t){return t=t||this.version,"data/"+t+"/mapdata2.json"},n.prototype.setMapLayers=function(t,e){var i=this;this.getDataJSON(t,function(t){var n=i.map.getLayerGroup();n.setVisible(!1),i.map.setLayerGroup(t.layerGroup),i.map.getLayerGroup().setVisible(!0),e&&e()})},n.prototype.getDataJSON=function(t,e){var i=this;this.data[t]?e(i.data[t]):l(i.getMapDataPath(t),function(n){i.data[t]={data:n,layerGroup:new o.layer.Group({title:t+" Layers",layers:new o.Collection([i.baseLayerGroup,h(i,n,t,i.getMapLayerIndex(t),i.layerDefs)])})},e(i.data[t])})},n.prototype.panTo=function(t,e){null==e&&(e=1e3),this.view.animate({center:t,duration:1e3})},n.prototype.checkAndHighlightWard=function(t){var e=this,i=this.map.forEachFeatureAtPixel(t,function(t,e){return t},{layerFilter:e.wardControl.layerFilter});return this.highlightWard(i),i},n.prototype.highlightWard=function(t){t!==this.highlightedWard&&(this.highlightedWard&&this.highlightedWard.setStyle(s[this.highlightedWard.get("wardType")].normal),t&&t.setStyle(s[t.get("wardType")]["navigate"==this.MODE?"highlight":"remove"]),this.highlightedWard=t)},n.prototype.unhighlightWard=function(){this.highlightedWard&&this.highlightedWard.setStyle(s[this.highlightedWard.get("wardType")].normal),this.highlightedWard=null},n.prototype.highlight=function(t){t!==this.highlightedFeature&&(this.highlightedFeature&&this.highlightSource.removeFeature(this.highlightedFeature),t&&this.highlightSource.addFeature(t),this.highlightedFeature=t)},n.prototype.unhighlight=function(){this.highlightedFeature&&this.highlightSource.removeFeature(this.highlightedFeature),this.highlightedFeature=null},n.prototype.toggle=function(t){if(t)return t.get("clicked")?(this.deselect(t),!1):(this.select(t),!0)},n.prototype.select=function(t){t&&!t.get("clicked")&&(t==this.highlightedFeature&&this.unhighlight(),this.selectSource.addFeature(t),t.set("clicked",!0,!0))},n.prototype.deselectAll=function(){this.selectSource.getFeatures().forEach(function(t){t.set("clicked",!1,!0)}),this.selectSource.clear()},n.prototype.deselect=function(t){t&&t.get("clicked")&&(t==this.highlightedFeature&&this.unhighlight(),this.selectSource.removeFeature(t),t.set("clicked",!1,!0))},n.prototype.hasVisionRadius=function(t){return null!=this.getFeatureVisionRadius(t)},n.prototype.getFeatureVisionRadius=function(t,e,i,n){e=e||t.get("dotaProps"),i=i||e.unitClass;var r,o=this.getStatData();if("observer"==i)r=this.visionRadius||a.visionRadius[i],this.isDarkness&&(r=Math.min(a.visionRadius.darkness,r));else if("sentry"==i)r=a.visionRadius[i];else{if(n&&!o[i].hasOwnProperty(n))return null;switch(n){case"dayVision":case"nightVision":r=o[i][n],this.isDarkness&&(r=Math.min(a.visionRadius.darkness,r));case"trueSight":case"attackRange":r=o[i][n];break;default:r=this.isNight?o[i].nightVision:o[i].dayVision,this.isDarkness&&(r=Math.min(a.visionRadius.darkness,r))}}return r},n.prototype.getRangeCircle=function(t,e,i,n,r){var a=t.get("dotaProps"),r=r||this.getFeatureVisionRadius(t,a,i,n);if(null==r)return null;e||(e=c([a.x,a.y]));var s=new o.Feature(new o.geom.Circle(e,u(r)));return s},e.exports=n},{"./baseLayerDefinitions":2,"./conversionFunctions":12,"./dataLoader":13,"./layerDefinitions":17,"./mapConstants":19,"./projections":20,"./styleDefinitions":21,"./util/getJSON":26,"./util/queryString":27,openlayers:18}],2:[function(t,e,i){var n=[{id:"default",name:"Default",group:"700"},{id:"journey",name:"New Journey",group:"700"},{id:"default",name:"Default",group:"687"},{id:"desert",name:"Desert",group:"687"},{id:"immortalgardens",name:"Immortal Gardens",group:"687"}];e.exports=n},{}],3:[function(t,e,i){function n(t){this.InteractiveMap=t,this.postComposeListener=null,this.postComposeHandler=this.animateCreeps.bind(this),this.playbackSpeed=1,this.paused=!0,this.pauseTime=null,this.title="Lane Animation"}function r(t,e){return t*e/1e3*s.scale}function o(t,e,i,n){e*=i;var o=s.creepBaseMovementSpeed;if(n)return r(o,e);switch(t){case"npc_dota_spawner_good_bot":return e<1e4?r(1.25*o,e):r(1.25*o,1e4)+r(o,e-1e4);case"npc_dota_spawner_bad_top":return e<2e3?r(1.25*o,e):r(1.25*o,2e3)+r(o,e-2e3);case"npc_dota_spawner_good_top":return e<2e3?r(.75*o,e):r(.75*o,2e3)+r(o,e-2e3);case"npc_dota_spawner_bad_bot":return e<22e3?r(.75*o,e):r(.75*o,22e3)+r(o,e-22e3);default:return r(o,e)}}var a=t("openlayers"),s=t("./../mapConstants"),h=t("./../styleDefinitions");n.prototype.show=function(t){this.setContent(t),this.info.classList.remove("slideUp"),this.info.classList.add("slideDown")},n.prototype.setContent=function(t){this.infoContent.innerHTML=t},n.prototype.open=function(){this.info.classList.add("slideDown"),this.info.classList.remove("slideUp")},n.prototype.close=function(){this.info.classList.add("slideUp"),this.info.classList.remove("slideDown")},n.prototype.initialize=function(t){var e=this;this.id=t,this.info=document.getElementById(t),this.infoContent=document.querySelector("#timer-time"),this.playPauseBtn=document.querySelector("#timer-playPause"),this.playPauseHandler=function(t){e.playPause.call(e,!0)},this.playPauseBtn.addEventListener("click",this.playPauseHandler,!1),this.stopBtn=document.querySelector("#timer-stop"),this.stopHandler=function(t){e.stop.call(e,!0)},this.stopBtn.addEventListener("click",this.stopHandler,!1),this.fasterBtn=document.querySelector("#timer-faster"),this.fasterHandler=function(t){e.faster.call(e,!0)},this.fasterBtn.addEventListener("click",this.fasterHandler,!1),this.slowerBtn=document.querySelector("#timer-slower"),this.slowerHandler=function(t){e.slower.call(e,!0)},this.slowerBtn.addEventListener("click",this.slowerHandler,!1)},n.prototype.slower=function(){var t=this.playbackSpeed;this.playbackSpeed=Math.max(1,this.playbackSpeed-1),this.updatePlayback(t,this.playbackSpeed)},n.prototype.faster=function(){var t=this.playbackSpeed;this.playbackSpeed+=1,this.updatePlayback(t,this.playbackSpeed)},n.prototype.updatePlayback=function(t,e){var i=this.InteractiveMap.getMapLayerIndex().npc_dota_spawner.getSource().getFeatures(),n=this.currentTime-this.startTime,r=n*t/e;this.startTime=this.currentTime-r;for(var o=0;o<i.length;o++){var a=i[o],s=a.get("waveTimes");if(s)for(var h=s.length;h--;){var n=this.currentTime-s[h],r=n*t/e;s[h]=this.currentTime-r}}},n.prototype.start=function(){this.postComposeListener||(this.postComposeListener=this.InteractiveMap.map.on("postcompose",this.postComposeHandler)),this.paused&&this.playPause(),this.InteractiveMap.map.render()},n.prototype.stop=function(){a.Observable.unByKey(this.postComposeListener),this.postComposeListener=null;for(var t=this.InteractiveMap.getMapLayerIndex().npc_dota_spawner.getSource().getFeatures(),e=0;e<t.length;e++){var i=t[e];i.set("waveTimes",null,!0)}this.startTime=null,this.paused||this.playPause(),this.pauseTime=null,this.InteractiveMap.map.render(),this.setContent(this.title)},n.prototype.playPause=function(){this.paused=!this.paused,this.paused?(this.playPauseBtn.classList.add("icon-play"),this.playPauseBtn.classList.remove("icon-pause")):(this.playPauseBtn.classList.add("icon-pause"),this.playPauseBtn.classList.remove("icon-play"),this.start())},n.prototype.activate=function(){this.InteractiveMap.toggleLayerMenuOption("npc_dota_spawner",!0),this.InteractiveMap.toggleLayerMenuOption("path_corner",!0),this.show(this.title)},n.prototype.deactivate=function(){this.InteractiveMap.toggleLayerMenuOption("npc_dota_spawner",!1),this.InteractiveMap.toggleLayerMenuOption("path_corner",!1),this.stop(),this.close()},n.prototype.animateCreeps=function(t){var e=t.vectorContext,i=t.frameState;this.currentTime=i.time;var n=this.InteractiveMap.getMapLayerIndex().npc_dota_spawner.getSource().getFeatures(),r=this.InteractiveMap.getMapLayerIndex().path_corner;if(this.startTime||(this.startTime=this.currentTime),this.paused)null==this.pauseTime&&(this.pauseTime=i.time),this.currentTime=this.pauseTime;else if(null!=this.pauseTime){for(var s=0;s<n.length;s++){var l=n[s],c=l.get("waveTimes");if(c)for(var u=c.length;u--;)c[u]+=this.currentTime-this.pauseTime}this.startTime+=this.currentTime-this.pauseTime,this.pauseTime=null}for(var s=0;s<n.length;s++){var l=n[s],f=l.getId(),d=r.getSource().getFeatureById(f),c=l.get("waveTimes");c||(c=[this.currentTime],l.set("waveTimes",c,!0)),this.currentTime-c[c.length-1]>=3e4/this.playbackSpeed&&c.push(this.currentTime);for(var u=c.length;u--;){var p=l.get("path");if(!p){var p=d.getGeometry().clone(),v=p.getCoordinates();v[0]=l.getGeometry().getCoordinates(),p.setCoordinates(v),l.set("path",p,!0)}var g=p.getLength(),v=p.getCoordinates(),y=this.currentTime-c[u],m=o(f,y,this.playbackSpeed),b=Math.max(0,m/g);if(b>=1){var w=v[v.length-1];c.splice(u,1)}else var w=p.getCoordinateAt(b);var x=new a.geom.Circle(w);e.setStyle(h.creepColor(l)),e.drawCircle(x)}}var M=((this.currentTime-this.startTime)%(6e4/this.playbackSpeed)/1e3*this.playbackSpeed).toFixed(1)+"s";this.playbackSpeed>1&&(M+=", "+this.playbackSpeed+"x"),this.setContent(M),i.animate=!0},e.exports=n},{"./../mapConstants":19,"./../styleDefinitions":21,openlayers:18}],4:[function(t,e,i){function n(t){var e=this;this.InteractiveMap=t,this.source=new r.source.Vector({defaultDataProjection:"pixel"}),this.layer=new r.layer.Vector({source:this.source,style:o.cursor}),this.layerFilter=function(t){return t===e.layer}}var r=t("openlayers"),o=t("./../styleDefinitions");e.exports=n},{"./../styleDefinitions":21,openlayers:18}],5:[function(t,e,i){function n(t){var e=this;this.InteractiveMap=t,this.lastPointerMoveTime=Date.now(),this.pointerMoveHandler=function(t){if(!t.dragging){var i=e.InteractiveMap.map.getEventPixel(t.originalEvent),n=e.InteractiveMap.map.forEachFeatureAtPixel(i,function(t){return t},{layerFilter:e.InteractiveMap.layerFilters.marker});if(n)e.isActive()||e.displayFeatureInfo(n,!1),e.highlight(n);else{e.close(!1);var n=e.InteractiveMap.checkAndHighlightWard(i);n?e.InteractiveMap.wardControl.showVisibilityInfo(n.get("visionFeature")):e.isActive()||e.unhighlight()}}},this.pointerMoveListener=null,this.clickHandler=function(t){e.unhighlight();var i=e.InteractiveMap.map.forEachFeatureAtPixel(t.pixel,function(t,e){return t},{layerFilter:e.InteractiveMap.layerFilters.marker});if(i)if(i.get("clicked"))e.InteractiveMap.deselectAll(),e.close(!0);else{e.InteractiveMap.deselectAll();var n=i.get("dotaProps");"ent_dota_tree"==i.get("dotaProps").id?e.InteractiveMap.treeControl.toggleTree(i,n):(e.displayFeatureInfo(i,!0),e.select(i),e.InteractiveMap.panTo(t.coordinate))}else{var i=e.InteractiveMap.checkAndHighlightWard(t.pixel);if(i){var r=i.get("visionFeature");r?e.InteractiveMap.wardControl.showVisibilityInfo(i.get("visionFeature"),!0):e.close(!0),e.InteractiveMap.panTo(t.coordinate)}else e.isActive()||(e.unhighlight(),e.close(!0));e.InteractiveMap.deselectAll()}},this.clickListener=null}var r=t("openlayers"),o=t("./../getPopupContent"),a=(t("./../styleDefinitions"),t("./../mapConstants")),s=t("./../conversionFunctions").worldToLatLon,h=t("./../util/createCirclePointCoords");n.prototype.activate=function(){this.pointerMoveListener||(this.pointerMoveListener=this.InteractiveMap.map.on("pointermove",this.pointerMoveHandler)),this.clickListener||(this.clickListener=this.InteractiveMap.map.on("click",this.clickHandler))},n.prototype.deactivate=function(){this.InteractiveMap.unhighlightWard(),r.Observable.unByKey(this.pointerMoveListener),this.pointerMoveListener=null,r.Observable.unByKey(this.clickListener),this.clickListener=null},n.prototype.setContent=function(t){this.infoContent.innerHTML=t},n.prototype.isActive=function(){return this.info.classList.contains("active")},n.prototype.open=function(t){this.info.classList.add("slideUp"),this.info.classList.remove("slideDown"),t&&this.info.classList.add("active")},n.prototype.close=function(t){this.isActive()&&!t||(this.info.classList.add("slideDown"),this.info.classList.remove("slideUp"),this.info.classList.remove("active"))},n.prototype.initialize=function(t){var e=this;this.id=t,this.info=document.getElementById(t),this.infoContent=document.querySelector("#"+t+" .message-content"),this.closeBtn=document.querySelector("#"+t+" .btn-close"),this.closeHandler=function(t){e.close.call(e,!0)},this.closeBtn.addEventListener("click",this.closeHandler,!1)},n.prototype.displayFeatureInfo=function(t,e){this.setContent(o(this.InteractiveMap.getMapData(),t)),this.open(e)},n.prototype.unhighlight=function(t){var e=t||this.InteractiveMap.highlightedFeature;if(e&&!e.get("clicked")){var i=e.get("dotaProps");if(i&&"npc_dota_neutral_spawner"==i.id){var n=e.get("pullRange");n&&(this.InteractiveMap.getMapLayerIndex().pullRange.getSource().removeFeature(n),e.set("pullRange",null,!0));var r=e.get("guardRange");r&&(this.InteractiveMap.getMapLayerIndex().pullRange.getSource().removeFeature(r),e.set("guardRange",null,!0))}}this.InteractiveMap.unhighlight()},n.prototype.highlight=function(t){this.unhighlight();var e=t.get("dotaProps");if(e&&"npc_dota_neutral_spawner"==e.id&&!t.get("pullRange")){var i=this.InteractiveMap.getRangeCircle(t,null,null,null,400);t.set("guardRange",i,!0),this.InteractiveMap.getMapLayerIndex().pullRange.getSource().addFeature(i);var n=s([e.x,e.y]),o=a.pullRangeTiming[e.pullType],l=h(n[0],n[1],400+350*o,360),c=h(n[0],n[1],400+270*o,360),u=new r.geom.Polygon([l]);u.appendLinearRing(new r.geom.LinearRing(c));var i=new r.Feature(u);t.set("pullRange",i,!0),this.InteractiveMap.getMapLayerIndex().pullRange.getSource().addFeature(i)}this.InteractiveMap.highlight(t)},n.prototype.select=function(t){t&&!t.get("clicked")&&(t==this.InteractiveMap.highlightedFeature&&this.unhighlight(),this.InteractiveMap.selectSource.addFeature(t),t.set("clicked",!0,!0))},e.exports=n},{"./../conversionFunctions":12,"./../getPopupContent":15,"./../mapConstants":19,"./../styleDefinitions":21,"./../util/createCirclePointCoords":23,openlayers:18}],6:[function(t,e,i){function n(t){function e(){var t="circle"==n.type?"Circle":"LineString";p=new r.interaction.Draw({source:n.source,type:t,style:o.measure}),n.map.addInteraction(p),i();var e;p.on("drawstart",function(t){n.source.clear(!0),n.info.setContent(""),n.info.close(!0),a=t.feature;var i=t.coordinate;e=a.getGeometry().on("change",function(t){var e,o=t.target;o instanceof r.geom.Circle?(e=g(o),i=o.getLastCoordinate()):o instanceof r.geom.LineString&&(e=v(o),i=o.getLastCoordinate()),n.info.setContent(e),n.info.open(!0)})},n),p.on("drawend",function(){a=null,r.Observable.unByKey(e)},n)}function i(){s&&s.parentNode.removeChild(s),s=document.createElement("div"),s.className="tooltip hidden",h=new r.Overlay({element:s,offset:[15,0],positioning:"center-left"}),n.map.addOverlay(h)}var n=this;this.InteractiveMap=t,this.map=t.map,this.info=t.infoControl,this.source=new r.source.Vector({defaultDataProjection:"pixel"}),this.layer=new r.layer.Vector({source:this.source});var a,s,h,l,c="Click to continue drawing the polygon",u="Click to continue drawing the line",f=function(t){if(!t.dragging){var e="Click to start drawing";if(a){var i=a.getGeometry();i instanceof r.geom.Polygon?e=c:i instanceof r.geom.LineString&&(e=u)}s.innerHTML=e,h.setPosition(t.coordinate),s.classList.remove("hidden")}},d=function(){s.classList.add("hidden")};this.type="line";var p,v=function(t){var e,i=Math.round(t.getLength());return e="Distance: "+i+" units<br>Travel Time: "+(i/n.InteractiveMap.movementSpeed).toFixed(2)+"s at "+n.InteractiveMap.movementSpeed+"ms"},g=function(t){var e,i=Math.round(t.getRadius());return e="Radius: "+i+" units<br>Area: "+(Math.PI*i*i).toFixed(2)+" units<sup>2</sup>"},n=this;this.change=function(t){n.type=t,r.Observable.unByKey(l),n.map.getViewport().removeEventListener("mouseout",d),n.map.removeInteraction(p),n.source.clear(!0),e.call(this),this.active=!0},this.active=!1,this.activate=function(){this.active||(l=n.map.on("pointermove",f),n.map.getViewport().addEventListener("mouseout",d),e()),this.active=!0},this.deactivate=function(){r.Observable.unByKey(l),n.map.getViewport().removeEventListener("mouseout",d),n.map.removeInteraction(p),n.source.clear(!0),this.active=!1}}var r=t("openlayers"),o=t("./../styleDefinitions");e.exports=n},{"./../styleDefinitions":21,openlayers:18}],7:[function(t,e,i){function n(t,e,i,n){this.panelId=t,this.openId=e,this.closeId=i,this.fullscreen=n,this.initialize()}function r(t){this.InteractiveMap=t,this.leftPanel=new n("menu-left","menu-left-open-btn","menu-left-close-btn"),this.rightPanel=new n("menu-right","menu-right-open-btn","menu-right-close-btn"),this.leftPanel.otherMenu=this.rightPanel,this.rightPanel.otherMenu=this.leftPanel}n.prototype.initialize=function(){this.panel=document.getElementById(this.panelId),this.openBtn=document.getElementById(this.openId),this.closeBtn=document.getElementById(this.closeId),this.openBtn.addEventListener("click",this.open.bind(this),!1),this.closeHandler=this.close.bind(this),this.closeBtn.addEventListener("click",this.closeHandler,!1)},n.prototype.open=function(t){this.panel.classList.add("expand-horizontal"),this.panel.classList.remove("collapsed-horizontal"),this.openBtn.classList.add("collapsed-horizontal"),this.openBtn.classList.remove("expand-horizontal"),this.otherMenu.close(t)},n.prototype.close=function(t){this.panel.classList.remove("expand-horizontal"),this.panel.classList.add("collapsed-horizontal"),this.openBtn.classList.remove("collapsed-horizontal"),this.openBtn.classList.add("expand-horizontal")},n.prototype.createToggle=function(t,e){var i=document.createElement("div");i.classList.add("btn-toggle");var n=document.createElement("input");n.setAttribute("type","checkbox"),n.id="toggle-"+t.id,n.addEventListener("change",e,!1),i.appendChild(n);var r=document.createElement("label");return r.setAttribute("for",n.id),i.appendChild(r),i},n.prototype.createMenuPanelItem=function(t,e,i,r,o){function a(){var i=t.getMapLayerIndex()[e.id];"ent_dota_tree"==e.id?t.treeControl.toggleAllTrees(this.checked):t.wardControl.toggleAll(i,this.checked)}var s=e.id,h=document.createElement("div");h.classList.add("menu-item"),h.classList.add(o||"data-layer");var l=document.createElement("input");l.setAttribute("type",r||"checkbox"),"radio"==r&&(s=e.group+"-"+e.id,l.setAttribute("name",o),l.setAttribute("value",s)),l.id="option-"+s,l.setAttribute("data-layer-id",s),l.addEventListener("change",i,!1),h.appendChild(l);var c=document.createElement("label");if(c.classList.add("checkbox"),c.setAttribute("for",l.id),c.innerHTML=e.name,h.appendChild(c),e.toggle){var u=n.prototype.createToggle(e,a);h.appendChild(u)}return h},r.prototype.initialize=function(t,e){var i=this;this.InteractiveMap.layerDefs.forEach(function(e){var r=e.group,o=document.querySelector("#"+r+"-menu"),a=n.prototype.createMenuPanelItem(i.InteractiveMap,e,t);o.appendChild(a)}),this.InteractiveMap.baseLayerDefs.forEach(function(t){var r=t.group,o=document.querySelector("#base-"+r+"-menu"),a=n.prototype.createMenuPanelItem(i.InteractiveMap,t,e,"radio","base-layer");o.appendChild(a)})},e.exports=r},{}],8:[function(t,e,i){function n(){this.timer=null}t("./../styleDefinitions");n.prototype.show=function(t){this.setContent(t),this.info.classList.remove("slideUp"),this.info.classList.add("slideDown"),clearTimeout(this.timer);var e=this;this.timer=setTimeout(function(){e.info.classList.add("slideUp"),e.info.classList.remove("slideDown")},1500)},n.prototype.setContent=function(t){this.infoContent.innerHTML=t},n.prototype.open=function(){this.info.classList.add("slideDown"),this.info.classList.remove("slideUp")},n.prototype.close=function(){this.info.classList.add("slideUp"),this.info.classList.remove("slideDown")},n.prototype.initialize=function(t){this.id=t,this.info=document.getElementById(t),this.infoContent=document.querySelector("#"+t+" .message-content")},e.exports=n},{"./../styleDefinitions":21}],9:[function(t,e,i){function n(t){this.InteractiveMap=t,this.allTreesCutState=!1}var r=t("./../util/queryString");n.prototype.updateQueryString=function(){var t=this,e=["cut_trees","uncut_trees"],i=this.InteractiveMap.getMapLayerIndex().ent_dota_tree,n=i.getSource(),o=n.getFeatures(),a=o.filter(function(e){return!!e.get("isCut")!=t.allTreesCutState}).map(function(t){var e=t.get("dotaProps");return e.x+","+e.y}).join(";");r.setQueryString(e[this.allTreesCutState?1:0],a||null),r.setQueryString(e[this.allTreesCutState?0:1],null),document.getElementById("toggle-ent_dota_tree").checked=this.allTreesCutState},n.prototype.parseQueryString=function(){var t=this,e=this.InteractiveMap.getMapLayerIndex().ent_dota_tree,i=e.getSource(),n=i.getFeatures(),o={};n.forEach(function(t){var e=t.get("dotaProps"),i=e.x+","+e.y;o[i]=t}),["uncut_trees","cut_trees"].forEach(function(e,i){var n=r.getParameterByName(e);n&&(t.toggleAllTrees(!i,!0),n=n.split(";"),n.forEach(function(e){var n=o[e];n&&!!n.get("isCut")==!i&&t.toggleTree(n,n.get("dotaProps"),!0)}))}),this.updateQueryString()},n.prototype.toggleTree=function(t,e,i){var n=this.InteractiveMap.vs.WorldXYtoGridXY(e.x,e.y);this.InteractiveMap.vs.toggleTree(n.x,n.y),t.set("isCut",!t.get("isCut")),i||this.updateQueryString()},n.prototype.toggleAllTrees=function(t,e){var i=this;this.allTreesCutState=t;var n=this.InteractiveMap.getMapLayerIndex().ent_dota_tree,r=n.getSource(),o=r.getFeatures();o.forEach(function(e){!!e.get("isCut")!=t&&i.toggleTree(e,e.get("dotaProps"),!0)}),e||this.updateQueryString()},e.exports=n},{"./../util/queryString":27}],10:[function(t,e,i){function n(t){this.InteractiveMap=t,this.vs=t.vs,this.source=new r.source.Vector({defaultDataProjection:"pixel"}),this.layer=new r.layer.Vector({source:this.source,style:l.visionSimulation})}var r=t("openlayers"),o=t("./../conversionFunctions").latLonToWorld,a=t("./../conversionFunctions").worldToLatLon,s=t("./../conversionFunctions").getTileRadius,h=t("./../getLightUnion"),l=t("./../styleDefinitions");n.prototype.getVisionFeature=function(t,e,i){var n,l=this.vs;if(e)n=o(e);else{var c=t.get("dotaProps");n=[c.x,c.y]}if(i=i||this.InteractiveMap.getFeatureVisionRadius(t,c),null!=i){var u=l.WorldXYtoGridXY(n[0],n[1]);if(l.isValidXY(u.x,u.y,!0,!0,!0)){l.updateVisibility(u.x,u.y,s(i));var f=h(l.grid,l.lights).map(function(t){return t.map(function(t){var e=l.GridXYtoWorldXY(t.x,t.y);return a([e.x,e.y])})}),d=new r.geom.MultiPolygon([f],"XY"),t=new r.Feature({geometry:d});return t.set("visionData",{area:l.area,lightArea:l.lightArea},!1),t}}},n.prototype.toggleVisionFeature=function(t){var e=t.get("visionFeature");return e?(this.source.removeFeature(e),t.set("visionFeature",null),null):this.setVisionFeature(t)},n.prototype.removeVisionFeature=function(t){var e=t.get("visionFeature");e&&(this.source.removeFeature(e),t.set("visionFeature",null))},n.prototype.setVisionFeature=function(t,e,i){this.removeVisionFeature(t);var n=this.InteractiveMap.getFeatureVisionRadius(t,t.get("dotaProps"),i);return visionFeature=this.getVisionFeature(t,e,n),visionFeature&&this.source.addFeature(visionFeature),t.set("visionFeature",visionFeature,!0),visionFeature},e.exports=n},{"./../conversionFunctions":12,"./../getLightUnion":14,"./../styleDefinitions":21,openlayers:18}],11:[function(t,e,i){function n(t,e){var i=this;this.InteractiveMap=t,this.source=new r.source.Vector({defaultDataProjection:"pixel"}),this.layer=new r.layer.Vector({source:this.source}),this.layerFilter=function(t){return t===i.layer},this.placedWardCoordinates={observer:{},sentry:{}},this.lastPointerMoveTime=Date.now(),this.pointerMoveHandler=function(n){if(!n.dragging){var r=i.InteractiveMap.map.getEventPixel(n.originalEvent),o=!1,a=i.InteractiveMap.map.forEachFeatureAtPixel(r,function(t){return t},{layerFilter:i.InteractiveMap.layerFilters.marker});if(a)o=i.highlight(a),o&&i.showVisibilityInfo();else{var a=t.checkAndHighlightWard(r);a?i.showVisibilityInfo():i.unhighlight()}if(!(Date.now()-i.lastPointerMoveTime<e)){if(i.lastPointerMoveTime=Date.now(),o)if(a.get("visionFeature"))i.InteractiveMap.cursorControl.source.clear(!0);else var s=i.InteractiveMap.visionControl.getVisionFeature(a);else var s=i.InteractiveMap.visionControl.getVisionFeature(null,n.coordinate,i.InteractiveMap.visionRadius);s?(i.InteractiveMap.cursorControl.source.clear(!0),i.InteractiveMap.cursorControl.source.addFeature(s),o||i.showVisibilityInfo()):o||i.clearInfo()}}},this.pointerMoveListener=null,this.clickHandler=function(t){i.unhighlight();var e=i.InteractiveMap.map.forEachFeatureAtPixel(t.pixel,function(t,e){return t},{layerFilter:i.InteractiveMap.layerFilters.marker});e&&i.InteractiveMap.hasVisionRadius(e)?(i.InteractiveMap.toggle(e),i.InteractiveMap.visionControl.toggleVisionFeature(e)?i.showVisibilityInfo():i.clearInfo(),i.InteractiveMap.cursorControl.source.clear(!0)):(e=i.InteractiveMap.map.forEachFeatureAtPixel(t.pixel,function(t,e){return t},{layerFilter:i.layerFilter}),e?(i.removeWard(e),i.clearInfo(!0)):(i.addWard(t.coordinate,i.InteractiveMap.MODE),i.InteractiveMap.cursorControl.source.clear(!0)))},this.clickListener=null}var r=t("openlayers"),o=t("./../styleDefinitions"),a=t("./../mapConstants"),s=t("./../conversionFunctions").latLonToWorld,h=t("./../conversionFunctions").worldToLatLon,l=t("./../util/queryString");n.prototype.toggleAll=function(t,e){e?this.showAll(t):this.hideAll(t)},n.prototype.showAll=function(t){var e=this,i=t.getSource(),n=i.getFeatures();n.forEach(function(t){e.InteractiveMap.select(t),e.highlight(t)})},n.prototype.hideAll=function(t){var e=this,i=t.getSource(),n=i.getFeatures();n.forEach(function(t){e.InteractiveMap.deselect(t),e.unhighlight(t)})},n.prototype.showVisibilityInfo=function(t,e){var i=this.InteractiveMap.infoControl,n=this.InteractiveMap.vs,r=n.lightArea,o=n.area;if(t){var a=t.get("visionData");a&&(r=a.lightArea,o=a.area,i.setContent("Visibility: "+(r/o*100).toFixed()+"% "+r+"/"+o),i.open(e))}else i.setContent("Visibility: "+(r/o*100).toFixed()+"% "+r+"/"+o),i.open(e)},n.prototype.clearInfo=function(t){this.InteractiveMap.infoControl.setContent(""),this.InteractiveMap.infoControl.close(t)},n.prototype.activate=function(){this.pointerMoveListener||(this.pointerMoveListener=this.InteractiveMap.map.on("pointermove",this.pointerMoveHandler)),this.clickListener||(this.clickListener=this.InteractiveMap.map.on("click",this.clickHandler))},n.prototype.deactivate=function(){this.InteractiveMap.unhighlightWard(),this.InteractiveMap.cursorControl.source.clear(!0),r.Observable.unByKey(this.pointerMoveListener),this.pointerMoveListener=null,r.Observable.unByKey(this.clickListener),this.clickListener=null},n.prototype.parseQueryString=function(){var t=this;["observer","sentry"].forEach(function(e){var i=l.getParameterByName(e);i&&(i=i.split(";"),i.forEach(function(i){if(i=i.split(","),2==i.length&&(i=i.map(parseFloat),!i.some(isNaN))){var n=h(i);t.addWard(n,e,!0)}})),t.updateQueryString(e)})},n.prototype.updateQueryString=function(t){var e=Object.keys(this.placedWardCoordinates[t]).join(";");l.setQueryString(t,e||null)},n.prototype.addWard=function(t,e,i){if(!(t[0]<0||t[0]>a.map_w||t[1]<0||t[1]>a.map_h)){var n=new r.geom.Point(t),h=new r.Feature(n);h.set("wardType",e,!0),h.setStyle(o[e].normal),this.source.addFeature(h),"observer"==e&&this.InteractiveMap.visionControl.setVisionFeature(h,t,e)&&this.showVisibilityInfo();var l=this.InteractiveMap.getRangeCircle(h,t,e);l&&(l.setStyle("observer"==e?o.dayVision:o.trueSight),h.set("wardRange",l,!0),this.InteractiveMap.wardRangeSource.addFeature(l));var c=s(t).map(Math.round).join(",");this.placedWardCoordinates[e][c]=!0,i||this.updateQueryString(e)}},n.prototype.removeWard=function(t){var e=t.get("wardRange");e&&this.InteractiveMap.wardRangeSource.removeFeature(e),this.source.removeFeature(t),this.InteractiveMap.visionControl.removeVisionFeature(t);var i=s(t.getGeometry().getCoordinates()).map(Math.round).join(","),n=t.get("wardType");delete this.placedWardCoordinates[n][i],this.updateQueryString(n)},n.prototype.highlight=function(t){this.InteractiveMap.cursorControl.source.clear(!0),this.unhighlight();var e=this.InteractiveMap.visionControl.setVisionFeature(t);return this.addRangeCircles(t),this.InteractiveMap.highlight(t),e},n.prototype.unhighlight=function(t){var e=t||this.InteractiveMap.highlightedFeature;
e&&!e.get("clicked")&&(this.InteractiveMap.visionControl.removeVisionFeature(e),this.removeRangeCircles(e)),this.InteractiveMap.unhighlight()},n.prototype.addRangeCircles=function(t){this.addRangeCircle(t,"dayVision"),this.addRangeCircle(t,"nightVision"),this.addRangeCircle(t,"trueSight"),this.addRangeCircle(t,"attackRange")},n.prototype.removeRangeCircles=function(t){this.removeRangeCircle(t,"dayVision"),this.removeRangeCircle(t,"nightVision"),this.removeRangeCircle(t,"trueSight"),this.removeRangeCircle(t,"attackRange")},n.prototype.addRangeCircle=function(t,e){if(!t.get(e)){var i=this.InteractiveMap.getRangeCircle(t,null,null,e);i&&(t.set(e,i,!0),this.InteractiveMap.rangeSources[e].addFeature(i))}},n.prototype.removeRangeCircle=function(t,e){var i=t.get(e);i&&(t.set(e,null,!0),this.InteractiveMap.rangeSources[e].removeFeature(i))},e.exports=n},{"./../conversionFunctions":12,"./../mapConstants":19,"./../styleDefinitions":21,"./../util/queryString":27,openlayers:18}],12:[function(t,e,i){function n(t,e,i){return i*(e-t)+t}function r(t,e,i){return(i-t)/(e-t)}function o(t){var e=n(c.map_x_boundaries[0],c.map_x_boundaries[1],t[0]/c.map_w),i=n(c.map_y_boundaries[0],c.map_y_boundaries[1],(c.map_h-t[1])/c.map_h);return[e,i]}function a(t){var e=r(c.map_x_boundaries[0],c.map_x_boundaries[1],t[0])*c.map_w,i=c.map_h-r(c.map_y_boundaries[0],c.map_y_boundaries[1],t[1])*c.map_h;return[e,i]}function s(t){return parseInt(Math.floor(t/64))}function h(t){return t/(c.map_x_boundaries[1]-c.map_x_boundaries[0])*c.map_w}function l(t,e,i){return 1==t&&"km"==e?i*c.scale*1e3:i*c.scale}var c=t("./mapConstants");e.exports={lerp:n,reverseLerp:r,latLonToWorld:o,worldToLatLon:a,getTileRadius:s,getScaledRadius:h,calculateDistance:l}},{"./mapConstants":19}],13:[function(t,e,i){function n(t,e){var i=new h.source.Vector({url:"data/700/"+e.filename,format:new h.format.GeoJSON({defaultDataProjection:e.projection||l.pixel})}),n=new h.layer.Vector({title:e.name,projection:e.projection||l.pixel,source:i,visible:!!e.visible,style:e.style});return n}function r(t,e,i,n){var r=[];r=i.data[e.id].map(function(t){var i=t.points,n=i.map(function(t){return h.proj.transform([t.x,t.y],l.dota,l.pixel)});n.push(h.proj.transform([i[0].x,i[0].y],l.dota,l.pixel));var r=new h.geom.Polygon([n]),o=new h.Feature(r);return t.id=e.id,o.set("dotaProps",t,!0),o});var o=new h.source.Vector({defaultDataProjection:"dota",features:r});return n?n.setSource(o):(n=new h.layer.Vector({title:e.name,source:o,visible:!!e.visible,style:e.style}),n.set("layerId",e.id,!0),n.set("layerDef",e,!0),n.set("showInfo",!1,!0)),n}function o(t,e,i,n){var r=[];r=i.data[e.id].map(function(t){var n=t.subType?e.id+"_"+t.subType:e.id,r=i.stats[n],o="ent_dota_tree"==e.id?[64,64]:r.bounds;if(o&&o[0]>0&&o[1]>0)var a=new h.geom.Polygon([[h.proj.transform([t.x-o[0],t.y-o[1]],l.dota,l.pixel),h.proj.transform([t.x-o[0],t.y+o[1]],l.dota,l.pixel),h.proj.transform([t.x+o[0],t.y+o[1]],l.dota,l.pixel),h.proj.transform([t.x+o[0],t.y-o[1]],l.dota,l.pixel),h.proj.transform([t.x-o[0],t.y-o[1]],l.dota,l.pixel)]]);else var a=new h.geom.Point(h.proj.transform([t.x,t.y],l.dota,l.pixel));var s=new h.Feature(a);return t.id=e.id,t.unitClass=n,s.set("dotaProps",t,!0),s});var o=new h.source.Vector({defaultDataProjection:"dota",features:r});return n?n.setSource(o):(n=new h.layer.Vector({title:e.name,source:o,visible:!!e.visible,style:e.style}),n.set("layerId",e.id,!0),n.set("layerDef",e,!0),n.set("showInfo",!1,!0)),n}function a(t,e,i,n){var r=new h.source.Vector({defaultDataProjection:"pixel",features:[]});return n?n.setSource(r):(n=new h.layer.Vector({title:e.name,source:r,visible:!!e.visible,style:e.style}),n.set("layerId",e.id,!0),n.set("layerDef",e,!0),n.set("showInfo",!1,!0)),n}function s(t,e,i,s,l){for(var c=[],u=0;u<l.length;u++){var f=l[u];if(e.data[f.id]||("pullRange"===f.type||"GeoJSON"===f.type)&&"687"!=i){var d;switch(f.type){case"GeoJSON":d=n(t.map,f,s[f.id]);break;case"polygon":d=r(t.map,f,e,s[f.id]);break;case"pullRange":d=a(t,f,e,s[f.id]);break;default:d=o(t.map,f,e,s[f.id])}s[f.id]=d,c.push(d)}}var p=new h.layer.Group({title:"Layers",layers:new h.Collection(c)});return p}var h=t("openlayers"),l=t("./projections");e.exports={loadGeoJSON:n,loadJSON:o,loadLayerGroupFromData:s}},{"./projections":20,openlayers:18}],14:[function(t,e,i){function n(t,e,i,r,o){for(var a=f(r),s=[[1,0],[0,-1],[-1,0],[0,1]],h=0;h<s.length;h++){var l=a.x+s[h][0],c=a.y+s[h][1];if(t[l]&&t[l][c]){var u=t[l][c].key;!i[u]&&e[u]&&(i[u]=o,n(t,e,i,u,o))}}}function r(t,e){var i={},r=1;for(var o in e)i[o]||(i[o]=r,n(t,e,i,o,r),r++);for(var a=[],s=1;s<r;s++)a.push(h(t,i,s));return a}function o(t,e,i,n){var r=i.x+n[0],o=i.y+n[1];if(!t[r]||!t[r][o])return!0;var a=t[r][o].key;return!e[a]}function a(t,e,i){for(var n=0;n<8;n+=2){var r=i.x+Math.round(Math.cos(2*Math.PI-Math.PI/4*n)),o=i.y+Math.round(Math.sin(2*Math.PI-Math.PI/4*n));if(!t[r]||!t[r][o])return n;var a=t[r][o].key;if(!e[a])return n}return null}function s(t,e){return(t%e+e)%e}function h(t,e,i){var n,r=[],o=null;for(var s in e){var h=f(s);if(o=a(t,e,h),e[s]==i&&null!==o){n=s;break}}for(var l=c(t,e,n,o);n!==l.key||o!==l.dir;)r.push(l.point),l=c(t,e,l.key,l.dir);return r.push(l.point),r}function l(t,e,i,n,r,a,s){var h=i.x+r[0],l=i.y+r[1];if(t[h]&&t[h][l]){var c=t[i.x+r[0]][i.y+r[1]];return e[c.key]==e[n]&&o(t,e,c,s)?{key:c.key,dir:a}:void 0}}function c(t,e,i,n){var r,a=f(i),h=Math.round(Math.cos(2*Math.PI-Math.PI/4*n)),c=Math.round(Math.sin(2*Math.PI-Math.PI/4*n)),u=s(n+2,8),p=Math.round(Math.cos(2*Math.PI-Math.PI/4*u)),v=Math.round(Math.sin(2*Math.PI-Math.PI/4*u)),g=s(n-1,8),y=Math.round(Math.cos(2*Math.PI-Math.PI/4*g)),m=Math.round(Math.sin(2*Math.PI-Math.PI/4*g));if(o(t,e,a,[p,v]))return{key:i,dir:s(n+2,8),point:d(a.x+y/2,a.y+m/2)};if(r||(r=l(t,e,a,i,[p,v],n,[h,c])),!r){var b=s(n+1,8),w=Math.round(Math.cos(2*Math.PI-Math.PI/4*b)),x=Math.round(Math.sin(2*Math.PI-Math.PI/4*b)),M=s(n-2,8),S=Math.round(Math.cos(2*Math.PI-Math.PI/4*M)),C=Math.round(Math.sin(2*Math.PI-Math.PI/4*M));r=l(t,e,a,i,[w,x],M,[S,C])}return r?(r.point=d(a.x+y/2,a.y+m/2),r):void 0}var u=t("dota-vision-simulation"),f=u.prototype.key2pt,d=(u.prototype.xy2key,u.prototype.xy2pt);e.exports=r},{"dota-vision-simulation":33}],15:[function(t,e,i){function n(t,e){return(e?o(e.replace("tower","Tier ").replace("range","Ranged"))+" ":"")+a[t]}function r(t,e){var i=e.get("dotaProps"),r=i.subType?i.id+"_"+i.subType:i.id,o=t.data.stats[r],a='<div class="info"><span class="info-header">'+n(i.id,i.subType)+'</span><span class="info-body">';return null!=i.pullType&&(a+='<br><span class="info-line">Pull Type: '+s[i.pullType]+"</span>"),null!=i.neutralType&&(a+='<br><span class="info-line">Difficulty: '+h[i.neutralType]+"</span>"),o.hasOwnProperty("damageMin")&&o.hasOwnProperty("damageMax")&&(a+='<br><span class="info-line">Damage: '+o.damageMin+"&ndash;"+o.damageMax+"</span>"),o.hasOwnProperty("bat")&&(a+='<br><span class="info-line">BAT: '+o.bat+"</span>"),o.hasOwnProperty("attackRange")&&(a+='<br><span class="info-line">Attack Range: '+o.attackRange+"</span>"),o.hasOwnProperty("health")&&(a+='<br><span class="info-line">Health: '+o.health+"</span>"),o.hasOwnProperty("armor")&&(a+='<br><span class="info-line">Armor: '+o.armor+"</span>"),o.hasOwnProperty("dayVision")&&o.hasOwnProperty("nightVision")&&(a+='<br><span class="info-line">Vision: '+o.dayVision+"/"+o.nightVision+"</span>"),a+="</span></div>"}var o=t("./util/capitalize"),a={npc_dota_roshan_spawner:"Roshan",dota_item_rune_spawner_powerup:"Rune",dota_item_rune_spawner_bounty:"Bounty Rune",ent_dota_tree:"Tree",npc_dota_healer:"Shrine",ent_dota_fountain:"Fountain",npc_dota_fort:"Ancient",ent_dota_shop:"Shop",npc_dota_tower:"Tower",npc_dota_barracks:"Barracks",npc_dota_filler:"Building",trigger_multiple:"Neutral Camp Spawn Box",npc_dota_neutral_spawner:"Neutral Camp",observer:"Observer Ward",sentry:"Sentry Ward"},s=["Normal","Fast","Slow"],h=["Easy","Medium","Hard","Ancient"];e.exports=r},{"./util/capitalize":22}],16:[function(t,e,i){function n(t){switch(t){case"observer":case"sentry":document.querySelector('input[name="ward-type"][value="'+t+'"]').checked=!0;case"ward":document.querySelector('input[name="mode"][value="ward"]').checked=!0,P.MODE=document.querySelector('input[name="ward-type"]:checked').value,document.getElementById("btn-ward").setAttribute("ward-type",P.MODE),document.getElementById("btn-ward").classList.add("active"),document.getElementById("btn-tree").classList.remove("active"),document.getElementById("btn-measure").classList.remove("active"),d.setQueryString("mode",P.MODE),P.measureControl.deactivate(),P.wardControl.activate(),P.infoControl.deactivate();break;case"line":case"circle":document.querySelector('input[name="measure-type"][value="'+t+'"]').checked=!0;case"measure":document.querySelector('input[name="mode"][value="measure"]').checked=!0,P.MODE=document.querySelector('input[name="measure-type"]:checked').value,document.getElementById("btn-ward").classList.remove("active"),document.getElementById("btn-tree").classList.remove("active"),document.getElementById("btn-measure").classList.add("active"),document.getElementById("btn-measure").setAttribute("measure-type",P.MODE),d.setQueryString("mode",P.MODE),P.measureControl.change(P.MODE),P.wardControl.deactivate(),P.infoControl.deactivate();break;default:document.querySelector('input[name="mode"][value="navigate"]').checked=!0,P.MODE=t||"navigate",document.getElementById("btn-ward").classList.remove("active"),document.getElementById("btn-tree").classList.add("active"),document.getElementById("btn-measure").classList.remove("active"),d.setQueryString("mode","navigate"==P.MODE?null:P.MODE),P.measureControl.deactivate(),P.wardControl.deactivate(),P.infoControl.activate()}P.notificationControl.show(E[P.MODE])}function r(t,e){e=e||t.getAttribute("data-layer-id");var i=P.getMapLayerIndex()[e];i.setVisible(t.checked);var n=i.get("title").replace(/ /g,"");d.setQueryString(n,!!t.checked||null),"ent_dota_tree"==e&&document.getElementById("btn-tree").setAttribute("trees-enabled",t.checked?"yes":"no")}function o(){r(this)}function a(){var t=this.getAttribute("data-layer-id");P.baseLayers.forEach(function(e){e.setVisible(e.get("layerId")===t)}),d.setQueryString("BaseLayer",t)}function s(){T(document.querySelectorAll(".data-layer > input"),function(t){var e=t.nextSibling,i=t.getAttribute("data-layer-id"),n=P.getMapLayerIndex(),r=n[i];r?(e.style.display="block",r.setVisible(t.checked)):e.style.display="none"},this)}function h(){var t=d.getParameterByName("x"),e=d.getParameterByName("y"),i=d.getParameterByName("zoom");if(i&&P.view.setZoom(i),t&&e){var r=p.proj.transform([t,e],v.dota,v.pixel);p.extent.containsXY([-100,-100,g.map_w+100,g.map_h+100],r[0],r[1])&&P.panTo(r)}document.getElementById("btn-ward").setAttribute("ward-type","observer");var o=d.getParameterByName("mode");n(o);var a,s=d.getParameterByName("BaseLayer");s&&(a=document.querySelector('input[name="base-layer"][value="'+s+'"]'),a&&(a.checked=!0,P.baseLayers.filter(function(t){return t.get("layerId")==s})[0].setVisible(!0))),a||(d.setQueryString("BaseLayer",null),P.baseLayers[0].setVisible(!0),document.querySelector('input[name="base-layer"][value="'+P.baseLayers[0].get("layerId")+'"]').checked=!0),P.layerDefs.forEach(function(t){var e=t.name.replace(/ /g,""),i=d.getParameterByName(e);i&&"false"!==i?(t.visible=!0,document.querySelector('input[data-layer-id="'+t.id+'"]').checked=!0,d.setQueryString(e,!0)):d.setQueryString(e,null),"ent_dota_tree"==t.id&&document.getElementById("btn-tree").setAttribute("trees-enabled",t.visible?"yes":"no")})}function l(t){var e=t.map,i=e.getView().calculateExtent(e.getSize()),n=p.extent.getCenter(i),r=p.proj.transform(n,v.pixel,v.dota),o=[Math.round(r[0]),Math.round(r[1])];d.setQueryString("x",o[0]),d.setQueryString("y",o[1]),d.setQueryString("zoom",Math.round(P.view.getZoom()))}function c(){P.infoControl.activate(),h(),P.setMapLayers(P.version,function(){s(),P.map.addLayer(P.measureControl.layer),P.map.addLayer(P.cursorControl.layer),P.map.addLayer(P.visionControl.layer),P.map.addLayer(P.wardControl.layer),P.map.addLayer(P.highlightLayer),P.map.addLayer(P.selectLayer),P.map.addLayer(P.wardRangeLayer),P.map.addLayer(P.rangeLayers.dayVision),P.map.addLayer(P.rangeLayers.nightVision),P.map.addLayer(P.rangeLayers.trueSight),P.map.addLayer(P.rangeLayers.attackRange),P.treeControl.parseQueryString(),P.wardControl.parseQueryString()}),P.map.on("moveend",l),document.getElementById("option-dayVision").addEventListener("change",function(){P.rangeLayers.dayVision.setVisible(this.checked)}),document.getElementById("option-nightVision").addEventListener("change",function(){P.rangeLayers.nightVision.setVisible(this.checked)}),document.getElementById("option-trueSight").addEventListener("change",function(){P.rangeLayers.trueSight.setVisible(this.checked)}),document.getElementById("option-attackRange").addEventListener("change",function(){P.rangeLayers.attackRange.setVisible(this.checked)}),document.getElementById("version-select").addEventListener("change",function(){P.setMapLayers(this.value)}),document.getElementById("btn-zoom-in").addEventListener("click",function(){P.view.animate({zoom:P.view.getZoom()+1})}),document.getElementById("btn-zoom-out").addEventListener("click",function(){P.view.animate({zoom:P.view.getZoom()-1})}),document.getElementById("btn-tree").addEventListener("click",function(){this.classList.contains("active")&&this.setAttribute("trees-enabled","yes"==this.getAttribute("trees-enabled")?"no":"yes"),this.classList.add("active"),document.getElementById("btn-ward").classList.remove("active"),document.getElementById("btn-measure").classList.remove("active"),P.toggleLayerMenuOption("ent_dota_tree","yes"==this.getAttribute("trees-enabled")),n("navigate"),P.notificationControl.show("yes"==this.getAttribute("trees-enabled")?E.treeEnable:E.treeDisable)}),document.getElementById("btn-ward").addEventListener("click",function(){this.classList.contains("active")&&this.setAttribute("ward-type","observer"==this.getAttribute("ward-type")?"sentry":"observer"),"sentry"==this.getAttribute("ward-type")?(document.querySelector('input[name="mode"][value="ward"]').checked=!0,document.querySelector('input[name="ward-type"][value="sentry"]').checked=!0):(document.querySelector('input[name="mode"][value="ward"]').checked=!0,document.querySelector('input[name="ward-type"][value="observer"]').checked=!0),this.classList.add("active"),document.getElementById("btn-tree").classList.remove("active"),document.getElementById("btn-measure").classList.remove("active"),n("ward")}),document.getElementById("btn-measure").addEventListener("click",function(){this.classList.contains("active")&&this.setAttribute("measure-type","line"==this.getAttribute("measure-type")?"circle":"line"),"circle"==this.getAttribute("measure-type")?(document.querySelector('input[name="mode"][value="measure"]').checked=!0,document.querySelector('input[name="measure-type"][value="circle"]').checked=!0):(document.querySelector('input[name="mode"][value="measure"]').checked=!0,document.querySelector('input[name="measure-type"][value="line"]').checked=!0),this.classList.add("active"),document.getElementById("btn-tree").classList.remove("active"),document.getElementById("btn-ward").classList.remove("active"),n("measure")})}var u=t("dota-vision-simulation"),f=t("dota-vision-simulation/src/worlddata.json"),d=t("./util/queryString"),p=t("openlayers"),v=t("./projections"),g=t("./mapConstants"),y=t("./controls/menuControl"),m=t("./controls/infoControl"),b=t("./controls/notificationControl"),w=t("./controls/measureControl"),x=t("./controls/creepControl"),M=t("./controls/visionControl"),S=t("./controls/wardControl"),C=t("./controls/treeControl"),A=t("./controls/cursorControl"),I="img/map_data.png",L=t("./InteractiveMap"),k="http://devilesk.com/media/images/map/",P=new L(k);P.toggleLayerMenuOption=function(t,e){var i=document.querySelector('input[data-layer-id="'+t+'"]');null!=e&&(i.checked=e),r(i,t)};var T=t("./util/forEach");P.vs=new u(f,I,c),P.menuControl=new y(P),P.menuControl.initialize(o,a),P.infoControl=new m(P),P.infoControl.initialize("info"),P.notificationControl=new b,P.notificationControl.initialize("notification"),P.visionControl=new M(P,20),P.wardControl=new S(P),P.treeControl=new C(P),P.cursorControl=new A(P),P.measureControl=new w(P),P.creepControl=new x(P),P.creepControl.initialize("timer");var E={observer:"Ward Mode: Observer",sentry:"Ward Mode: Sentry",navigate:"Navigation Mode",line:"Measure Mode: Line",circle:"Measure Mode: Circle",treeEnable:"<span>Navigation Mode</span><span>Trees: On</span>",treeDisable:"<span>Navigation Mode</span><span>Trees: Off</span>",nightOn:"Nighttime Vision",nightOff:"Daytime Vision",darknessOn:"Darkness: On",darknessOff:"Darkness: Off",creepControlOn:"Lane Animation: On",creepControlOff:"Lane Animation: Off"};T(document.querySelectorAll('input[name="mode"], input[name="ward-type"], input[name="measure-type"]'),function(t){t.addEventListener("change",function(){n(this.value)},!1)},this),document.getElementById("nightControl").addEventListener("change",function(){P.isNight=this.checked,this.checked?P.notificationControl.show(E.nightOn):P.notificationControl.show(E.nightOff)},!1),document.getElementById("darknessControl").addEventListener("change",function(){P.isDarkness=this.checked,this.checked?P.notificationControl.show(E.darknessOn):P.notificationControl.show(E.darknessOff)},!1),document.getElementById("creepControl").addEventListener("change",function(){this.checked?(P.creepControl.activate(),P.notificationControl.show(E.creepControlOn)):(P.creepControl.deactivate(),P.notificationControl.show(E.creepControlOff))},!1),document.getElementById("version-select").addEventListener("change",function(){P.version=this.value},!1),document.getElementById("vision-radius").addEventListener("change",function(){P.visionRadius=this.value},!1),document.getElementById("movementSpeed").addEventListener("change",function(){P.movementSpeed=this.value},!1)},{"./InteractiveMap":1,"./controls/creepControl":3,"./controls/cursorControl":4,"./controls/infoControl":5,"./controls/measureControl":6,"./controls/menuControl":7,"./controls/notificationControl":8,"./controls/treeControl":9,"./controls/visionControl":10,"./controls/wardControl":11,"./mapConstants":19,"./projections":20,"./util/forEach":24,"./util/queryString":27,"dota-vision-simulation":33,"dota-vision-simulation/src/worlddata.json":34,openlayers:18}],17:[function(t,e,i){var n=t("openlayers"),r=t("./styleDefinitions"),o=t("./projections"),a=[{id:"path_corner",name:"Lanes",filename:"path_corner.json",type:"GeoJSON",group:"overlay",projection:o.dota,style:r.teamColor},{id:"npc_dota_spawner",name:"Lane Spawns",filename:"npc_dota_spawner.json",type:"GeoJSON",group:"overlay",projection:o.dota,style:r.creepSpawn},{id:"ent_fow_blocker_node",name:"Vision Blocker",filename:"ent_fow_blocker_node2.json",type:"GeoJSON",group:"overlay",style:new n.style.Style({fill:new n.style.Fill({color:[0,0,255,.3]}),stroke:new n.style.Stroke({color:[0,0,255,.8]})})},{id:"no_wards",name:"Invalid Wards",filename:"no_wards2.json",type:"GeoJSON",group:"overlay",style:new n.style.Style({fill:new n.style.Fill({color:[255,0,0,.3]}),stroke:new n.style.Stroke({color:[255,0,0,.8]})})},{id:"trigger_multiple",name:"Spawn Boxes",type:"polygon",group:"overlay",style:new n.style.Style({fill:new n.style.Fill({color:[0,255,125,.3]}),stroke:new n.style.Stroke({color:[0,255,125,.8]})})},{id:"npc_dota_neutral_spawner",name:"Neutral Camps",group:"object",style:function(t,e){return r.neutralCamp[parseInt(t.get("dotaProps").neutralType)]}},{id:"ent_dota_tree",name:"Trees",group:"object",style:function(t,e){return t.get("isCut")?r.tree.dead:r.tree.alive},toggle:!0},{id:"npc_dota_roshan_spawner",name:"Roshan",group:"object",style:r.roshan},{id:"dota_item_rune_spawner_powerup",name:"Runes",group:"object",style:r.rune},{id:"dota_item_rune_spawner_bounty",name:"Bounty Runes",group:"object",style:r.bountyRune},{id:"ent_dota_fountain",name:"Fountain",group:"structure",style:r.ent_dota_fountain,toggle:!0},{id:"npc_dota_barracks",name:"Barracks",group:"structure",style:r.npc_dota_barracks,toggle:!0},{id:"npc_dota_filler",name:"Buildings",group:"structure",style:r.npc_dota_filler,toggle:!0},{id:"npc_dota_tower",name:"Towers",group:"structure",style:r.npc_dota_tower,toggle:!0},{id:"ent_dota_shop",name:"Shops",group:"structure",style:r.ent_dota_shop},{id:"npc_dota_fort",name:"Ancients",group:"structure",style:r.npc_dota_fort,toggle:!0},{id:"npc_dota_healer",name:"Shrines",group:"structure",style:r.npc_dota_healer,toggle:!0},{id:"pullRange",name:"Pull Range",type:"pullRange",group:"overlay",style:r.pullRange,visible:!0}];e.exports=a},{"./projections":20,"./styleDefinitions":21,openlayers:18}],18:[function(e,i,n){(function(r){!function(e,r){"object"==typeof n?i.exports=r():"function"==typeof t&&t.amd?t([],r):e.ol=r()}(this,function(){function t(t,e){var i=t.split("."),n=mc||bc;i[0]in n||!n.execScript||n.execScript("var "+i[0]);for(var r;i.length&&(r=i.shift());)i.length||void 0===e?n=n[r]?n[r]:n[r]={}:n[r]=e}function i(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t}function n(){}function o(t){return t.Ne||(t.Ne=++wc)}function a(t){this.message="Assertion failed. See /doc/errors/#"+t+" for details.",this.code=t,this.name="AssertionError"}function s(t,e){if(!t)throw new a(e)}function h(t,e,i){return Math.min(Math.max(t,e),i)}function l(t){return s(0<t,29),Math.pow(2,Math.ceil(Math.log(t)/Math.LN2))}function c(t,e){var i=t%e;return 0>i*e?i+e:i}function u(t){return function(e){if(e)return[h(e[0],t[0],t[2]),h(e[1],t[1],t[3])]}}function f(t){return t}function d(t,e,i){this.center=t,this.resolution=e,this.rotation=i}function p(t){for(var e in t)delete t[e]}function v(t){var e,i=[];for(e in t)i.push(t[e]);return i}function g(t){for(var e in t)return!1;return!e}function y(t){function e(e){var i=t.listener,n=t.Kc||t.target;return t.Nc&&C(t),i.call(n,e)}return t.Lc=e}function m(t,e,i,n){for(var r,o=0,a=t.length;o<a;++o)if(r=t[o],r.listener===e&&r.Kc===i)return n&&(r.deleteIndex=o),r}function b(t,e){var i=t.ja;return i?i[e]:void 0}function w(t){var e=t.ja;return e||(e=t.ja={}),e}function x(t,e){var i=b(t,e);if(i){for(var n=0,r=i.length;n<r;++n)t.removeEventListener(e,i[n].Lc),p(i[n]);i.length=0,(i=t.ja)&&(delete i[e],0===Object.keys(i).length&&delete t.ja)}}function M(t,e,i,n,r){var o=w(t),a=o[e];return a||(a=o[e]=[]),(o=m(a,i,n,!1))?r||(o.Nc=!1):(o={Kc:n,Nc:!!r,listener:i,target:t,type:e},t.addEventListener(e,y(o)),a.push(o)),o}function S(t,e,i,n){(t=b(t,e))&&(i=m(t,i,n,!0))&&C(i)}function C(t){if(t&&t.target){t.target.removeEventListener(t.type,t.Lc);var e=b(t.target,t.type);if(e){var i="deleteIndex"in t?t.deleteIndex:e.indexOf(t);-1!==i&&e.splice(i,1),0===e.length&&x(t.target,t.type)}p(t)}}function A(t){var e,i=w(t);for(e in i)x(t,e)}function I(){}function L(t){t.xa||(t.xa=!0,t.Z())}function k(t){this.type=t,this.target=null}function P(t){t.stopPropagation()}function T(){this.Y={},this.F={},this.D={}}function E(t,e){var i="string"==typeof e?new k(e):e,r=i.type;i.target=t;var o,a=t.D[r];if(a){r in t.F||(t.F[r]=0,t.Y[r]=0),++t.F[r];for(var s=0,h=a.length;s<h;++s)if(!1===a[s].call(t,i)||i.Ve){o=!1;break}if(--t.F[r],0===t.F[r]){for(i=t.Y[r],delete t.Y[r];i--;)t.removeEventListener(r,n);delete t.F[r]}return o}}function F(t,e){return e?e in t.D:0<Object.keys(t.D).length}function D(){T.call(this),this.c=0}function j(t){D.call(this),o(this),this.o={},void 0!==t&&_(this,t)}function R(t){return Sc.hasOwnProperty(t)?Sc[t]:Sc[t]="change:"+t}function _(t,e){for(var i in e)t.set(i,e[i],void 0)}function B(t,e,i){k.call(this,t),this.key=e,this.oldValue=i}function N(t,e){return t>e?1:t<e?-1:0}function V(t,e,i){var n=t.length;if(t[0]<=e)return 0;if(!(e<=t[n-1]))if(0<i){for(i=1;i<n;++i)if(t[i]<e)return i-1}else if(0>i){for(i=1;i<n;++i)if(t[i]<=e)return i}else for(i=1;i<n;++i){if(t[i]==e)return i;if(t[i]<e)return t[i-1]-e<e-t[i]?i-1:i}return n-1}function O(t,e){var i,n=Array.isArray(e)?e:[e],r=n.length;for(i=0;i<r;i++)t[t.length]=n[i]}function U(t,e){var i=t.length;if(i!==e.length)return!1;for(var n=0;n<i;n++)if(t[n]!==e[n])return!1;return!0}function W(t){var e,i=pr,n=t.length,r=Array(t.length);for(e=0;e<n;e++)r[e]={index:e,value:t[e]};for(r.sort(function(t,e){return i(t.value,e.value)||t.index-e.index}),e=0;e<t.length;e++)t[e]=r[e].value}function G(t,e){var i=e||N;return t.every(function(e,n){if(0===n)return!0;var r=i(t[n-1],e);return!(0<r||0===r)})}function X(t){return function(e,i,n){if(void 0!==e)return e=V(t,e,n),e=h(e+i,0,t.length-1),i=Math.floor(e),e!=i&&i<t.length-1?t[i]/Math.pow(t[i]/t[i+1],e-i):t[i]}}function H(t,e,i){return function(n,r,o){if(void 0!==n)return n=Math.max(Math.floor(Math.log(e/n)/Math.log(t)+(-o/2+.5))+r,0),void 0!==i&&(n=Math.min(n,i)),e/Math.pow(t,n)}}function z(t){if(void 0!==t)return 0}function Y(t,e){if(void 0!==t)return t+e}function J(t){var e=2*Math.PI/t;return function(t,i){if(void 0!==t)return t=Math.floor((t+i)/e+.5)*e}}function q(){var t=5*Math.PI/180;return function(e,i){if(void 0!==e)return Math.abs(e+i)<=t?0:e+i}}function K(t){t=""+t;var e=t.indexOf("."),e=-1===e?t.length:e;return 2<e?t:Array(3-e).join("0")+t}function Z(t,e){var i=Math.cos(e),n=Math.sin(e),r=t[1]*i+t[0]*n;t[0]=t[0]*i-t[1]*n,t[1]=r}function Q(t){return 1-Math.pow(1-t,3)}function $(t){return 3*t*t-2*t*t*t}function tt(t){return t}function et(t){for(var e=at(),i=0,n=t.length;i<n;++i)ft(e,t[i]);return e}function it(t,e,i){return i?(i[0]=t[0]-e,i[1]=t[1]-e,i[2]=t[2]+e,i[3]=t[3]+e,i):[t[0]-e,t[1]-e,t[2]+e,t[3]+e]}function nt(t,e){return e?(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e):t.slice()}function rt(t,e){return t[0]<=e[0]&&e[2]<=t[2]&&t[1]<=e[1]&&e[3]<=t[3]}function ot(t,e,i){return t[0]<=e&&e<=t[2]&&t[1]<=i&&i<=t[3]}function at(){return[1/0,1/0,-(1/0),-(1/0)]}function st(t,e,i,n,r){return r?(r[0]=t,r[1]=e,r[2]=i,r[3]=n,r):[t,e,i,n]}function ht(t){return st(1/0,1/0,-(1/0),-(1/0),t)}function lt(t,e){var i=t[0],n=t[1];return st(i,n,i,n,e)}function ct(t,e){return t[0]==e[0]&&t[2]==e[2]&&t[1]==e[1]&&t[3]==e[3]}function ut(t,e){e[0]<t[0]&&(t[0]=e[0]),e[2]>t[2]&&(t[2]=e[2]),e[1]<t[1]&&(t[1]=e[1]),e[3]>t[3]&&(t[3]=e[3])}function ft(t,e){e[0]<t[0]&&(t[0]=e[0]),e[0]>t[2]&&(t[2]=e[0]),e[1]<t[1]&&(t[1]=e[1]),e[1]>t[3]&&(t[3]=e[1])}function dt(t,e,i,n,r){for(;i<n;i+=r){var o=t,a=e[i],s=e[i+1];o[0]=Math.min(o[0],a),o[1]=Math.min(o[1],s),o[2]=Math.max(o[2],a),o[3]=Math.max(o[3],s)}return t}function pt(t){var e=0;return t[2]<t[0]||t[3]<t[1]||(e=bt(t)*yt(t)),e}function vt(t){return[(t[0]+t[2])/2,(t[1]+t[3])/2]}function gt(t,e,i,n,r){var o=e*n[0]/2;n=e*n[1]/2,e=Math.cos(i);var a=Math.sin(i);i=o*e,o*=a,e*=n;var s=n*a,h=t[0],l=t[1];t=h-i+s,n=h-i-s,a=h+i-s,i=h+i+s;var s=l-o-e,h=l-o+e,c=l+o+e,o=l+o-e;return st(Math.min(t,n,a,i),Math.min(s,h,c,o),Math.max(t,n,a,i),Math.max(s,h,c,o),r)}function yt(t){return t[3]-t[1]}function mt(t,e){var i=at();return wt(t,e)&&(i[0]=t[0]>e[0]?t[0]:e[0],i[1]=t[1]>e[1]?t[1]:e[1],i[2]=t[2]<e[2]?t[2]:e[2],i[3]=t[3]<e[3]?t[3]:e[3]),i}function bt(t){return t[2]-t[0]}function wt(t,e){return t[0]<=e[2]&&t[2]>=e[0]&&t[1]<=e[3]&&t[3]>=e[1]}function xt(){return!0}function Mt(){return!1}function St(t){this.radius=t}function Ct(t,e){var i=t[1]*Math.PI/180,n=e[1]*Math.PI/180,r=(n-i)/2,o=(e[0]-t[0])*Math.PI/180/2,i=Math.sin(r)*Math.sin(r)+Math.sin(o)*Math.sin(o)*Math.cos(i)*Math.cos(n);return 2*Ac.radius*Math.atan2(Math.sqrt(i),Math.sqrt(1-i))}function At(t){this.a=t.code,this.b=t.units,this.i=void 0!==t.extent?t.extent:null,this.f=void 0!==t.global&&t.global,this.c=!(!this.f||!this.i),this.j=t.getPointResolution,this.g=null,this.o=t.metersPerUnit;var e=t.code,i=window.proj4;"function"==typeof i&&(e=i.ec(e),void 0!==e&&(void 0===t.metersPerUnit&&(this.o=e.Jf),void 0===t.units&&(this.b=e.units)))}function It(t){return t.o||Ic[t.b]}function Lt(t,e,i){t=t.a,e=e.a,t in kc||(kc[t]={}),kc[t][e]=i}function kt(t,e){var i;return t in kc&&e in kc[t]&&(i=kc[t][e]),i}function Pt(t,e,i){var n=t.j;return n?e=n(e,i):"degrees"!=t.b&&(n=Vt(t,_t("EPSG:4326")),e=[i[0]-e/2,i[1],i[0]+e/2,i[1],i[0],i[1]-e/2,i[0],i[1]+e/2],e=n(e,e,2),e=(Ct(e.slice(0,2),e.slice(2,4))+Ct(e.slice(4,6),e.slice(6,8)))/2,t=It(t),void 0!==t&&(e/=t)),e}function Tt(t){Ft(t),t.forEach(function(e){t.forEach(function(t){e!==t&&Lt(e,t,Ut)})})}function Et(t){Lc[t.a]=t,Lt(t,t,Ut)}function Ft(t){var e=[];t.forEach(function(t){e.push(Et(t))})}function Dt(t){return t?"string"==typeof t?_t(t):t:_t("EPSG:3857")}function jt(t,e,i,n){t=_t(t),e=_t(e),Lt(t,e,Rt(i)),Lt(e,t,Rt(n))}function Rt(t){return function(e,i,n){var r=e.length;n=void 0!==n?n:2,i=void 0!==i?i:Array(r);var o,a;for(a=0;a<r;a+=n)for(o=t([e[a],e[a+1]]),i[a]=o[0],i[a+1]=o[1],o=n-1;2<=o;--o)i[a+o]=e[a+o];return i}}function _t(t){var e=null;if(t instanceof At)e=t;else if("string"==typeof t){var e=Lc[t]||null,i=window.proj4;e||"function"!=typeof i||void 0===i.ec(t)||(e=new At({code:t}),Et(e))}return e}function Bt(t,e){if(t===e)return!0;var i=t.b===e.b;return t.a===e.a?i:Vt(t,e)===Ut&&i}function Nt(t,e){var i=_t(t),n=_t(e);return Vt(i,n)}function Vt(t,e){var i=t.a,n=e.a,r=kt(i,n);if(!r){var o=window.proj4;if("function"==typeof o){var a=o.ec(i),s=o.ec(n);void 0!==a&&void 0!==s&&(a===s?Tt([e,t]):(r=o(n,i),jt(e,t,r.forward,r.inverse)),r=kt(i,n))}}return r||(r=Ot),r}function Ot(t,e){if(void 0!==e&&t!==e){for(var i=0,n=t.length;i<n;++i)e[i]=t[i];t=e}return t}function Ut(t,e){var i;if(void 0!==e){i=0;for(var n=t.length;i<n;++i)e[i]=t[i];i=e}else i=t.slice();return i}function Wt(t,e,i){return Nt(e,i)(t,void 0,t.length)}function Gt(t,e,i){e=Nt(e,i),t=[t[0],t[1],t[0],t[3],t[2],t[1],t[2],t[3]],e(t,t,2),i=[t[0],t[2],t[4],t[6]];var n=[t[1],t[3],t[5],t[7]];return t=Math.min.apply(null,i),e=Math.min.apply(null,n),i=Math.max.apply(null,i),n=Math.max.apply(null,n),st(t,e,i,n,void 0)}function Xt(){j.call(this),this.u=at(),this.B=-1,this.g={},this.l=this.i=0}function Ht(t,e,i,n,r,o){for(var a=o?o:[],s=0;e<i;e+=n){var h=t[e],l=t[e+1];a[s++]=r[0]*h+r[2]*l+r[4],a[s++]=r[1]*h+r[3]*l+r[5]}return o&&a.length!=s&&(a.length=s),a}function zt(t,e,i,n,r,o){var a,s,h=o?o:[],l=0;for(a=0;a<e;a+=i)for(h[l++]=t[a]+n,h[l++]=t[a+1]+r,s=a+2;s<a+i;++s)h[l++]=t[s];return o&&h.length!=l&&(h.length=l),h}function Yt(){Xt.call(this),this.X="XY",this.a=2,this.s=null}function Jt(t){var e;return"XY"==t?e=2:"XYZ"==t||"XYM"==t?e=3:"XYZM"==t&&(e=4),e}function qt(t,e,i){t.a=Jt(e),t.X=e,t.s=i}function Kt(t,e,i,n){if(e)i=Jt(e);else{for(e=0;e<n;++e){if(0===i.length)return t.X="XY",void(t.a=2);i=i[0]}i=i.length;var r;2==i?r="XY":3==i?r="XYZ":4==i&&(r="XYZM"),e=r}t.X=e,t.a=i}function Zt(t,e){var i,n,r=0;for(i=0,n=e.length;i<n;++i)t[r++]=e[i];return r}function Qt(t,e,i,n){var r,o;for(r=0,o=i.length;r<o;++r){var a,s=i[r];for(a=0;a<n;++a)t[e++]=s[a]}return e}function $t(t,e,i,n,r){r=r?r:[];var o,a,s=0;for(o=0,a=i.length;o<a;++o)e=Qt(t,e,i[o],n),r[s++]=e;return r.length=s,r}function te(t,e,i,n,r){r=void 0!==r?r:[];for(var o=0;e<i;e+=n)r[o++]=t.slice(e,e+n);return r.length=o,r}function ee(t,e,i,n,r){r=void 0!==r?r:[];var o,a,s=0;for(o=0,a=i.length;o<a;++o){var h=i[o];r[s++]=te(t,e,h,n,r[s]),e=h}return r.length=s,r}function ie(t,e,i,n,r,o,a){var s=(i-e)/n;if(3>s){for(;e<i;e+=n)o[a++]=t[e],o[a++]=t[e+1];return a}var h=Array(s);h[0]=1,h[s-1]=1,i=[e,i-n];for(var l,c=0;0<i.length;){var u=i.pop(),f=i.pop(),d=0,p=t[f],v=t[f+1],g=t[u],y=t[u+1];for(l=f+n;l<u;l+=n){var m,b=t[l];m=t[l+1];var w=p,x=v,M=g-w,S=y-x;if(0!==M||0!==S){var C=((b-w)*M+(m-x)*S)/(M*M+S*S);1<C?(w=g,x=y):0<C&&(w+=M*C,x+=S*C)}b=w-b,m=x-m,m=b*b+m*m,m>d&&(c=l,d=m)}d>r&&(h[(c-e)/n]=1,f+n<c&&i.push(f,c),c+n<u&&i.push(c,u))}for(l=0;l<s;++l)h[l]&&(o[a++]=t[e+l*n],o[a++]=t[e+l*n+1]);return a}function ne(t,e,i,n,r,o,a,s){var h,l;for(h=0,l=i.length;h<l;++h){var c=i[h];t:{var u=t,f=c,d=n,p=r,v=o;if(e!=f){var g=p*Math.round(u[e]/p),y=p*Math.round(u[e+1]/p);e+=d,v[a++]=g,v[a++]=y;var m,b;do if(m=p*Math.round(u[e]/p),b=p*Math.round(u[e+1]/p),e+=d,e==f){v[a++]=m,v[a++]=b;break t}while(m==g&&b==y);
for(;e<f;){var w,x;if(w=p*Math.round(u[e]/p),x=p*Math.round(u[e+1]/p),e+=d,w!=m||x!=b){var M=m-g,S=b-y,C=w-g,A=x-y;M*A==S*C&&(0>M&&C<M||M==C||0<M&&C>M)&&(0>S&&A<S||S==A||0<S&&A>S)||(v[a++]=m,v[a++]=b,g=m,y=b),m=w,b=x}}v[a++]=m,v[a++]=b}}s.push(a),e=c}return a}function re(t,e){Yt.call(this),this.ea(t,e)}function oe(t,e){Yt.call(this),this.ea(t,e)}function ae(t,e,i,n,r,o){for(var a=0,s=t[i-n],h=t[i-n+1];e<i;e+=n){var l=t[e],c=t[e+1];h<=o?c>o&&0<(l-s)*(o-h)-(r-s)*(c-h)&&a++:c<=o&&0>(l-s)*(o-h)-(r-s)*(c-h)&&a--,s=l,h=c}return 0!==a}function se(t,e,i,n,r,o,a){var s,h,l,c,u,f=r[o+1],d=[],p=i[0];for(l=t[p-n],u=t[p-n+1],s=e;s<p;s+=n)c=t[s],h=t[s+1],(f<=u&&h<=f||u<=f&&f<=h)&&(l=(f-u)/(h-u)*(c-l)+l,d.push(l)),l=c,u=h;for(p=NaN,u=-(1/0),d.sort(N),l=d[0],s=1,h=d.length;s<h;++s){c=d[s];var v=Math.abs(c-l);if(v>u){l=(l+c)/2;var g;t:if(0!==i.length&&ae(t,e,i[0],n,l,f)){var y;for(g=1,y=i.length;g<y;++g)if(ae(t,i[g-1],i[g],n,l,f)){g=!1;break t}g=!0}else g=!1;g&&(p=l,u=v)}l=c}return isNaN(p)&&(p=r[o]),a?(a.push(p,f),a):[p,f]}function he(t,e,i,n){for(var r=0,o=t[i-n],a=t[i-n+1];e<i;e+=n)var s=t[e],h=t[e+1],r=r+(s-o)*(h+a),o=s,a=h;return 0<r}function le(t,e,i,n){var r=0;n=void 0!==n&&n;var o,a;for(o=0,a=e.length;o<a;++o){var s=e[o],r=he(t,r,s,i);if(0===o){if(n&&r||!n&&!r)return!1}else if(n&&!r||!n&&r)return!1;r=s}return!0}function ce(t,e,i,n,r){r=void 0!==r&&r;var o,a;for(o=0,a=i.length;o<a;++o){var s=i[o],h=he(t,e,s,n);if(0===o?r&&h||!r&&!h:r&&!h||!r&&h)for(var h=t,l=s,c=n;e<l-c;){var u;for(u=0;u<c;++u){var f=h[e+u];h[e+u]=h[l-c+u],h[l-c+u]=f}e+=c,l-=c}e=s}return e}function ue(t,e,i,n){var r,o,a=0;for(r=0,o=e.length;r<o;++r)a=ce(t,a,e[r],i,n);return a}function fe(t,e){Yt.call(this),this.f=[],this.A=-1,this.C=null,this.G=-1,this.j=null,this.ea(t,e)}function de(t){if(t.A!=t.c){var e=vt(t.M());t.C=se(ve(t),0,t.f,t.a,e,0),t.A=t.c}return t.C}function pe(t){var e=t.X,i=t.s;t=t.f;var n,r,o=[],a=0;for(n=0,r=t.length;n<r;++n){var s=t[n],h=new re(null),l=h;qt(l,e,i.slice(a,s)),l.v(),o.push(h),a=s}return o}function ve(t){if(t.G!=t.c){var e=t.s;le(e,t.f,t.a)?t.j=e:(t.j=e.slice(),t.j.length=ce(t.j,0,t.f,t.a)),t.G=t.c}return t.j}function ge(t){j.call(this),t=t||{},this.g=[0,0],this.a=[],this.Sb=this.Sb.bind(this);var e={};e[Pc]=void 0!==t.center?t.center:null,this.B=Dt(t.projection);var i,n,r,o=void 0!==t.minZoom?t.minZoom:0;i=void 0!==t.maxZoom?t.maxZoom:28;var a=void 0!==t.zoomFactor?t.zoomFactor:2;if(void 0!==t.resolutions)i=t.resolutions,n=i[0],r=i[i.length-1],i=X(i);else{n=Dt(t.projection),r=n.M();var s=(r?Math.max(bt(r),yt(r)):360*Ic.degrees/It(n))/256/Math.pow(2,0),h=s/Math.pow(2,28);n=t.maxResolution,void 0!==n?o=0:n=s/Math.pow(a,o),r=t.minResolution,void 0===r&&(r=void 0!==t.maxZoom?void 0!==t.maxResolution?n/Math.pow(a,i):s/Math.pow(a,i):h),i=o+Math.floor(Math.log(n/r)/Math.log(a)),r=n/Math.pow(a,i-o),i=H(a,n,i-o)}this.b=n,this.u=r,this.A=a,this.i=t.resolutions,this.j=o,o=void 0!==t.extent?u(t.extent):f,(void 0!==t.enableRotation?t.enableRotation:1)?(a=t.constrainRotation,a=void 0===a||!0===a?q():!1===a?Y:"number"==typeof a?J(a):Y):a=z,this.f=new d(o,i,a),void 0!==t.resolution?e[Tc]=t.resolution:void 0!==t.zoom&&(e[Tc]=this.constrainResolution(this.b,t.zoom-this.j)),e[Ec]=void 0!==t.rotation?t.rotation:0,_(this,e)}function ye(t){return 0<xe(t)[Fc]}function me(t){Ce(t,Fc,-xe(t)[Fc]);for(var e=0,i=t.a.length;e<i;++e){var n=t.a[e];n[0].Bb&&n[0].Bb(!1)}t.a.length=0}function be(t,e,i){var n,r=t.get(Pc);return void 0!==r&&(n=[r[0]-i[0],r[1]-i[1]],Z(n,e-t.get(Ec)),t=n,t[0]+=i[0],t[1]+=i[1]),n}function we(t,e,i){var n,r=t.get(Pc);return t=Me(t),void 0!==r&&void 0!==t&&(n=[i[0]-e*(i[0]-r[0])/t,i[1]-e*(i[1]-r[1])/t]),n}function xe(t,e){return void 0!==e?(e[0]=t.g[0],e[1]=t.g[1],e):t.g.slice()}function Me(t){return t.get(Tc)}function Se(t,e){t.set(Pc,e),ye(t)&&me(t)}function Ce(t,e,i){t.g[e]+=i,t.v()}function Ae(t,e){t.set(Tc,e),ye(t)&&me(t)}function Ie(t,e,i,n){this.K=t,this.J=e,this.N=i,this.R=n}function Le(t,e,i){return t.K<=e&&e<=t.J&&t.N<=i&&i<=t.R}function ke(t,e){return t.K==e.K&&t.N==e.N&&t.J==e.J&&t.R==e.R}function Pe(t,e){return t.K<=e.J&&t.J>=e.K&&t.N<=e.R&&t.R>=e.N}function Te(t,e){return Array.isArray(t)?t:(void 0===e?e=[t,t]:e[0]=e[1]=t,e)}function Ee(t){this.minZoom=void 0!==t.minZoom?t.minZoom:0,this.a=t.resolutions,s(G(this.a,function(t,e){return e-t}),17),this.maxZoom=this.a.length-1,this.b=void 0!==t.origin?t.origin:null,this.f=null,void 0!==t.origins&&(this.f=t.origins,s(this.f.length==this.a.length,20));var e=t.extent;void 0===e||this.b||this.f||(this.b=[e[0],e[3]]),s(!this.b&&this.f||this.b&&!this.f,18),this.g=null,void 0!==t.tileSizes&&(this.g=t.tileSizes,s(this.g.length==this.a.length,19)),this.i=void 0!==t.tileSize?t.tileSize:this.g?null:256,s(!this.i&&this.g||this.i&&!this.g,22),this.j=void 0!==e?e:null,this.c=null,this.o=[0,0],void 0!==t.sizes?this.c=t.sizes.map(function(t){return new Ie(Math.min(0,t[0]),Math.max(t[0]-1,-1),Math.min(0,t[1]),Math.max(t[1]-1,-1))},this):e&&We(this,e)}function Fe(t,e,i,n,r){for(r=Ne(t,e,r),e=e[0]-1;e>=t.minZoom;){if(i.call(null,e,_e(t,r,e,n)))return!0;--e}return!1}function De(t,e){return t.b?t.b:t.f[e]}function je(t,e,i,n){return e[0]<t.maxZoom?(n=Ne(t,e,n),_e(t,n,e[0]+1,i)):null}function Re(t,e,i,n){Ve(t,e[0],e[1],i,!1,Dc);var r=Dc[1],o=Dc[2];return Ve(t,e[2],e[3],i,!0,Dc),t=Dc[1],e=Dc[2],void 0!==n?(n.K=r,n.J=t,n.N=o,n.R=e):n=new Ie(r,t,o,e),n}function _e(t,e,i,n){return Re(t,e,t.a[i],n)}function Be(t,e){var i=De(t,e[0]),n=t.a[e[0]],r=Te(Oe(t,e[0]),t.o);return[i[0]+(e[1]+.5)*r[0]*n,i[1]+(e[2]+.5)*r[1]*n]}function Ne(t,e,i){var n=De(t,e[0]),r=t.a[e[0]];t=Te(Oe(t,e[0]),t.o);var o=n[0]+e[1]*t[0]*r;return e=n[1]+e[2]*t[1]*r,st(o,e,o+t[0]*r,e+t[1]*r,i)}function Ve(t,e,i,n,r,o){var a=Ue(t,n),s=n/t.a[a],h=De(t,a);return t=Te(Oe(t,a),t.o),e=s*Math.floor((e-h[0])/n+(r?.5:0))/t[0],i=s*Math.floor((i-h[1])/n+(r?0:.5))/t[1],r?(e=Math.ceil(e)-1,i=Math.ceil(i)-1):(e=Math.floor(e),i=Math.floor(i)),r=e,void 0!==o?(o[0]=a,o[1]=r,o[2]=i):o=[a,r,i],o}function Oe(t,e){return t.i?t.i:t.g[e]}function Ue(t,e,i){return h(V(t.a,e,i||0),t.minZoom,t.maxZoom)}function We(t,e){for(var i=t.a.length,n=Array(i),r=t.minZoom;r<i;++r)n[r]=_e(t,e,r);t.c=n}function Ge(t){var e=t.g;if(!e){for(var e=Xe(t),i=Te(256),i=Math.max(bt(e)/i[0],yt(e)/i[1]),n=Array(43),r=0;43>r;++r)n[r]=i/Math.pow(2,r);e=new Ee({extent:e,origin:[e[0],e[3]],resolutions:n,tileSize:void 0}),t.g=e}return e}function Xe(t){t=_t(t);var e=t.M();return e||(t=180*Ic.degrees/It(t),e=st(-t,-t,t,t)),e}function He(t){this.c=t.html,this.a=t.tileRanges?t.tileRanges:null}function ze(t){j.call(this),this.a=t?t:[],Je(this)}function Ye(t,e){var i=t.a[e];return t.a.splice(e,1),Je(t),E(t,new qe(_c,i)),i}function Je(t){t.set(jc,t.a.length)}function qe(t,e){k.call(this,t),this.element=e}function Ke(t){return Array.isArray(t)?t:Vc(t)}function Ze(t){if("string"!=typeof t){var e=t[0];e!=(0|e)&&(e=e+.5|0);var i=t[1];i!=(0|i)&&(i=i+.5|0);var n=t[2];n!=(0|n)&&(n=n+.5|0),t="rgba("+e+","+i+","+n+","+(void 0===t[3]?1:t[3])+")"}return t}function Qe(t){var e=[];return e[0]=h(t[0]+.5|0,0,255),e[1]=h(t[1]+.5|0,0,255),e[2]=h(t[2]+.5|0,0,255),e[3]=h(t[3],0,1),e}function $e(t){return"string"==typeof t||t instanceof CanvasPattern||t instanceof CanvasGradient?t:Ze(t)}function ti(t,e){var i=document.createElement("CANVAS");return t&&(i.width=t),e&&(i.height=e),i.getContext("2d")}function ei(t){t&&t.parentNode&&t.parentNode.removeChild(t)}function ii(t,e,i){k.call(this,t),this.map=e,this.frameState=void 0!==i?i:null}function ni(t){j.call(this),this.element=t.element?t.element:null,this.l=this.G=null,this.u=[],this.render=t.render?t.render:n,t.target&&(t=t.target,this.G="string"==typeof t?document.getElementById(t):t)}function ri(t){t=t?t:{},this.C=document.createElement("UL"),this.g=document.createElement("LI"),this.C.appendChild(this.g),this.g.style.display="none",this.f=void 0===t.collapsed||t.collapsed,this.B=void 0===t.collapsible||t.collapsible,this.B||(this.f=!1);var e=void 0!==t.className?t.className:"ol-attribution",i=void 0!==t.tipLabel?t.tipLabel:"Attributions",n=void 0!==t.collapseLabel?t.collapseLabel:"»";"string"==typeof n?(this.i=document.createElement("span"),this.i.textContent=n):this.i=n,n=void 0!==t.label?t.label:"i","string"==typeof n?(this.j=document.createElement("span"),this.j.textContent=n):this.j=n;var r=this.B&&!this.f?this.i:this.j,n=document.createElement("button");n.setAttribute("type","button"),n.title=i,n.appendChild(r),M(n,"click",this.P,this),i=document.createElement("div"),i.className=e+" ol-unselectable ol-control"+(this.f&&this.B?" ol-collapsed":"")+(this.B?"":" ol-uncollapsible"),i.appendChild(this.C),i.appendChild(n),ni.call(this,{element:i,render:t.render?t.render:oi,target:t.target}),this.A=!0,this.b={},this.a={},this.L={}}function oi(t){if(t=t.frameState){var e,i,n,r,a,s,h,l,u,f,d,p=t.layerStatesArray,v=Mc({},t.attributions),y={},m={},b=t.viewState.projection;for(i=0,e=p.length;i<e;i++)if((s=p[i].layer.oa())&&(f=o(s).toString(),u=s.B))for(n=0,r=u.length;n<r;n++)if(h=u[n],l=o(h).toString(),!(l in v)){if(a=t.usedTiles[f]){var w=s.Ga(b);t:{d=h;var x=b;if(d.a){var M,S,C,A=void 0;for(A in a)if(A in d.a){C=a[A];var I;for(M=0,S=d.a[A].length;M<S;++M){if(I=d.a[A][M],Pe(I,C)){d=!0;break t}var L=_e(w,Xe(x),parseInt(A,10)),k=L.J-L.K+1;if((C.K<L.K||C.J>L.J)&&(Pe(I,new Ie(c(C.K,k),c(C.J,k),C.N,C.R))||C.J-C.K+1>k&&Pe(I,L))){d=!0;break t}}}d=!1}else d=!0}}else d=!1;d?(l in y&&delete y[l],d=h.c,d in m||(m[d]=!0,v[l]=h)):y[l]=h}e=[v,y],i=e[0],e=e[1];for(var P in this.b)P in i?(this.a[P]||(this.b[P].style.display="",this.a[P]=!0),delete i[P]):P in e?(this.a[P]&&(this.b[P].style.display="none",delete this.a[P]),delete e[P]):(ei(this.b[P]),delete this.b[P],delete this.a[P]);for(P in i)n=document.createElement("LI"),n.innerHTML=i[P].c,this.C.appendChild(n),this.b[P]=n,this.a[P]=!0;for(P in e)n=document.createElement("LI"),n.innerHTML=e[P].c,n.style.display="none",this.C.appendChild(n),this.b[P]=n;P=!g(this.a)||!g(t.logos),this.A!=P&&(this.element.style.display=P?"":"none",this.A=P),P&&g(this.a)?this.element.classList.add("ol-logo-only"):this.element.classList.remove("ol-logo-only");var T;t=t.logos,P=this.L;for(T in P)T in t||(ei(P[T]),delete P[T]);for(var E in t)e=t[E],e instanceof HTMLElement&&(this.g.appendChild(e),P[E]=e),E in P||(T=new Image,T.src=E,""===e?i=T:(i=document.createElement("a"),i.href=e,i.appendChild(T)),this.g.appendChild(i),P[E]=i);this.g.style.display=g(t)?"none":""}else this.A&&(this.element.style.display="none",this.A=!1)}function ai(t){t=t?t:{};var e=void 0!==t.className?t.className:"ol-rotate",i=void 0!==t.label?t.label:"⇧";this.a=null,"string"==typeof i?(this.a=document.createElement("span"),this.a.className="ol-compass",this.a.textContent=i):(this.a=i,this.a.classList.add("ol-compass"));var n=t.tipLabel?t.tipLabel:"Reset rotation",i=document.createElement("button");i.className=e+"-reset",i.setAttribute("type","button"),i.title=n,i.appendChild(this.a),M(i,"click",ai.prototype.j,this),n=document.createElement("div"),n.className=e+" ol-unselectable ol-control",n.appendChild(i),e=t.render?t.render:si,this.f=t.resetNorth?t.resetNorth:void 0,ni.call(this,{element:n,render:e,target:t.target}),this.g=void 0!==t.duration?t.duration:250,this.b=void 0===t.autoHide||t.autoHide,this.i=void 0,this.b&&this.element.classList.add("ol-hidden")}function si(t){if(t=t.frameState){if(t=t.viewState.rotation,t!=this.i){var e="rotate("+t+"rad)";if(this.b){var i=this.element.classList.contains("ol-hidden");i||0!==t?i&&0!==t&&this.element.classList.remove("ol-hidden"):this.element.classList.add("ol-hidden")}this.a.style.msTransform=e,this.a.style.webkitTransform=e,this.a.style.transform=e}this.i=t}}function hi(t){t=t?t:{};var e=void 0!==t.className?t.className:"ol-zoom",i=void 0!==t.delta?t.delta:1,n=void 0!==t.zoomInLabel?t.zoomInLabel:"+",r=void 0!==t.zoomOutLabel?t.zoomOutLabel:"−",o=void 0!==t.zoomInTipLabel?t.zoomInTipLabel:"Zoom in",a=void 0!==t.zoomOutTipLabel?t.zoomOutTipLabel:"Zoom out",s=document.createElement("button");s.className=e+"-in",s.setAttribute("type","button"),s.title=o,s.appendChild("string"==typeof n?document.createTextNode(n):n),M(s,"click",hi.prototype.b.bind(this,i)),n=document.createElement("button"),n.className=e+"-out",n.setAttribute("type","button"),n.title=a,n.appendChild("string"==typeof r?document.createTextNode(r):r),M(n,"click",hi.prototype.b.bind(this,-i)),i=document.createElement("div"),i.className=e+" ol-unselectable ol-control",i.appendChild(s),i.appendChild(n),ni.call(this,{element:i,target:t.target}),this.a=void 0!==t.duration?t.duration:250}function li(t){t=t?t:{};var e=new ze;return(void 0!==t.zoom?t.zoom:1)&&e.push(new hi(t.zoomOptions)),(void 0!==t.rotate?t.rotate:1)&&e.push(new ai(t.rotateOptions)),(void 0!==t.attribution?t.attribution:1)&&e.push(new ri(t.attributionOptions)),e}function ci(t,e,i,n,r){ii.call(this,t,e,r),this.originalEvent=i,this.pixel=e.Tc(i),this.coordinate=e.Ka(this.pixel),this.dragging=void 0!==n&&n}function ui(t,e,i,n,r){ci.call(this,t,e,i.a,n,r),this.a=i}function fi(t,e){var i,n,r=Wc.length;for(n=0;n<r;++n)try{if(i=t.getContext(Wc[n],e))return i}catch(t){}return null}function di(t,e){this.a=t,this.g=e}function pi(t){di.call(this,t,{mousedown:this.ne,mousemove:this.oe,mouseup:this.re,mouseover:this.qe,mouseout:this.pe}),this.c=t.c,this.b=[]}function vi(t,e){for(var i,n=t.b,r=e.clientX,o=e.clientY,a=0,s=n.length;a<s&&(i=n[a]);a++){var h=Math.abs(o-i[1]);if(25>=Math.abs(r-i[0])&&25>=h)return!0}return!1}function gi(t){var e=Ei(t,t),i=e.preventDefault;return e.preventDefault=function(){t.preventDefault(),i()},e.pointerId=1,e.isPrimary=!0,e.pointerType="mouse",e}function yi(t){di.call(this,t,{MSPointerDown:this.we,MSPointerMove:this.xe,MSPointerUp:this.Ae,MSPointerOut:this.ye,MSPointerOver:this.ze,MSPointerCancel:this.ve,MSGotPointerCapture:this.te,MSLostPointerCapture:this.ue}),this.c=t.c,this.b=["","unavailable","touch","pen","mouse"]}function mi(t,e){var i=e;return"number"==typeof e.pointerType&&(i=Ei(e,e),i.pointerType=t.b[e.pointerType]),i}function bi(t){di.call(this,t,{pointerdown:this.Qe,pointermove:this.Re,pointerup:this.Ue,pointerout:this.Se,pointerover:this.Te,pointercancel:this.Pe,gotpointercapture:this.Ud,lostpointercapture:this.le})}function wi(t,e,i){k.call(this,t),this.a=e,t=i?i:{},this.buttons=xi(t),this.pressure=Mi(t,this.buttons),this.bubbles="bubbles"in t&&t.bubbles,this.cancelable="cancelable"in t&&t.cancelable,this.view="view"in t?t.view:null,this.detail="detail"in t?t.detail:null,this.screenX="screenX"in t?t.screenX:0,this.screenY="screenY"in t?t.screenY:0,this.clientX="clientX"in t?t.clientX:0,this.clientY="clientY"in t?t.clientY:0,this.button="button"in t?t.button:0,this.relatedTarget="relatedTarget"in t?t.relatedTarget:null,this.pointerId="pointerId"in t?t.pointerId:0,this.width="width"in t?t.width:0,this.height="height"in t?t.height:0,this.pointerType="pointerType"in t?t.pointerType:"",this.isPrimary="isPrimary"in t&&t.isPrimary,e.preventDefault&&(this.preventDefault=function(){e.preventDefault()})}function xi(t){if(t.buttons||nu)t=t.buttons;else switch(t.which){case 1:t=1;break;case 2:t=4;break;case 3:t=2;break;default:t=0}return t}function Mi(t,e){var i=0;return i=t.pressure?t.pressure:e?.5:0}function Si(t,e){di.call(this,t,{touchstart:this.lf,touchmove:this.kf,touchend:this.jf,touchcancel:this.hf}),this.c=t.c,this.o=e,this.b=void 0,this.i=0,this.f=void 0}function Ci(t,e,i){return e=Ei(e,i),e.pointerId=i.identifier+2,e.bubbles=!0,e.cancelable=!0,e.detail=t.i,e.button=0,e.buttons=1,e.width=i.webkitRadiusX||i.radiusX||0,e.height=i.webkitRadiusY||i.radiusY||0,e.pressure=i.webkitForce||i.force||.5,e.isPrimary=t.b===i.identifier,e.pointerType="touch",e.clientX=i.clientX,e.clientY=i.clientY,e.screenX=i.screenX,e.screenY=i.screenY,e}function Ai(t,e,i){function n(){e.preventDefault()}var r,o,a=Array.prototype.slice.call(e.changedTouches),s=a.length;for(r=0;r<s;++r)o=Ci(t,e,a[r]),o.preventDefault=n,i.call(t,e,o)}function Ii(t,e){var i=t.o.b,n=e.changedTouches[0];if(t.b===n.identifier){var r=[n.clientX,n.clientY];i.push(r),setTimeout(function(){var t=i.indexOf(r);-1<t&&i.splice(t,1)},2500)}}function Li(t){T.call(this),this.g=t,this.c={},this.f={},this.a=[],Qc?ki(this,new bi(this)):$c?ki(this,new yi(this)):(t=new pi(this),ki(this,t),Zc&&ki(this,new Si(this,t))),t=this.a.length;for(var e,i=0;i<t;i++)e=this.a[i],Pi(this,Object.keys(e.g))}function ki(t,e){var i=Object.keys(e.g);i&&(i.forEach(function(t){var i=e.g[t];i&&(this.f[t]=i.bind(e))},t),t.a.push(e))}function Pi(t,e){e.forEach(function(t){M(this.g,t,this.b,this)},t)}function Ti(t,e){e.forEach(function(t){S(this.g,t,this.b,this)},t)}function Ei(t,e){for(var i,n={},r=0,o=ru.length;r<o;r++)i=ru[r][0],n[i]=t[i]||e[i]||ru[r][1];return n}function Fi(t,e,i){e.bubbles=!1,Ri(t,"pointerleave",e,i)}function Di(t,e,i){t.out(e,i);var n=e.target,r=e.relatedTarget;n&&r&&n.contains(r)||Fi(t,e,i)}function ji(t,e,i){e.bubbles=!0,Ri(t,"pointerover",e,i);var n=e.target,r=e.relatedTarget;n&&r&&n.contains(r)||(e.bubbles=!1,Ri(t,"pointerenter",e,i))}function Ri(t,e,i,n){E(t,new wi(e,n,i))}function _i(t,e){E(t,new wi(e.type,e,e))}function Bi(t){T.call(this),this.b=t,this.i=0,this.o=!1,this.f=[],this.c=null,t=this.b.a,this.B=0,this.u={},this.g=new Li(t),this.a=null,this.j=M(this.g,"pointerdown",this.ce,this),this.l=M(this.g,"pointermove",this.$e,this)}function Ni(t,e){var i=new ui("click",t.b,e);E(t,i),0!==t.i?(clearTimeout(t.i),t.i=0,i=new ui("dblclick",t.b,e),E(t,i)):t.i=setTimeout(function(){this.i=0;var t=new ui("singleclick",this.b,e);E(this,t)}.bind(t),250)}function Vi(t,e){"pointerup"==e.type||"pointercancel"==e.type?delete t.u[e.pointerId]:"pointerdown"==e.type&&(t.u[e.pointerId]=!0),t.B=Object.keys(t.u).length}function Oi(t,e){T.call(this),this.ga=t,this.state=e,this.a=null,this.key=""}function Ui(t){if(!t.a)return t;var e=t.a;do{if(e.aa()==ou)return e;e=e.a}while(e);return t}function Wi(t,e){this.l=t,this.f=e,this.a=[],this.b=[],this.c={}}function Gi(t){var e=t.a,i=t.b,n=e[0];return 1==e.length?(e.length=0,i.length=0):(e[0]=e.pop(),i[0]=i.pop(),Xi(t,0)),e=t.f(n),delete t.c[e],n}function Xi(t,e){for(var i=t.a,n=t.b,r=i.length,o=i[e],a=n[e],s=e;e<r>>1;){var h=2*e+1,l=2*e+2,h=l<r&&n[l]<n[h]?l:h;i[e]=i[h],n[e]=n[h],e=h}i[e]=o,n[e]=a,Hi(t,s,e)}function Hi(t,e,i){var n=t.a;t=t.b;for(var r=n[i],o=t[i];i>e;){var a=i-1>>1;if(!(t[a]>o))break;n[i]=n[a],t[i]=t[a],i=a}n[i]=r,t[i]=o}function zi(t){var e,i,n,r=t.l,o=t.a,a=t.b,s=0,h=o.length;for(i=0;i<h;++i)e=o[i],n=r(e),1/0==n?delete t.c[t.f(e)]:(a[s]=n,o[s++]=e);for(o.length=s,a.length=s,r=(t.a.length>>1)-1;0<=r;r--)Xi(t,r)}function Yi(t,e){Wi.call(this,function(e){return t.apply(null,e)},function(t){return t[0].getKey()}),this.u=e,this.o=0,this.i={}}function Ji(){this.a=[],this.c=this.b=0}function qi(t){j.call(this),this.V=null,this.set(au,!0),this.handleEvent=t.handleEvent}function Ki(t,e,i,n){if(void 0!==e){var r=t.get(Ec),o=t.get(Pc);void 0!==r&&o&&0<n?t.animate({rotation:e,anchor:i,duration:n,easing:Q}):t.rotate(e,i)}}function Zi(t,e,i,n){var r=Me(t);e=t.constrainResolution(r,e,0),Qi(t,e,i,n)}function Qi(t,e,i,n){if(e){var r=Me(t),o=t.get(Pc);void 0!==r&&o&&e!==r&&n?t.animate({resolution:e,anchor:i,duration:n,easing:Q}):(i&&(i=we(t,e,i),Se(t,i)),Ae(t,e))}}function $i(t){t=t?t:{},this.a=t.delta?t.delta:1,qi.call(this,{handleEvent:tn}),this.b=void 0!==t.duration?t.duration:250}function tn(t){var e=!1,i=t.originalEvent;if("dblclick"==t.type){var e=t.coordinate,i=i.shiftKey?-this.a:this.a,n=t.map.W();Zi(n,i,e,this.b),t.preventDefault(),e=!0}return!e}function en(t){return t=t.originalEvent,t.altKey&&!(t.metaKey||t.ctrlKey)&&t.shiftKey}function nn(t){return t=t.originalEvent,0==t.button&&!(zc&&Yc&&t.ctrlKey)}function rn(t){return t=t.originalEvent,!t.altKey&&!(t.metaKey||t.ctrlKey)&&!t.shiftKey}function on(t){return t=t.originalEvent,!t.altKey&&!(t.metaKey||t.ctrlKey)&&t.shiftKey}function an(t){return t=t.originalEvent.target.tagName,"INPUT"!==t&&"SELECT"!==t&&"TEXTAREA"!==t}function sn(t){return s(t.a,56),"mouse"==t.a.pointerType}function hn(t){t=t?t:{},qi.call(this,{handleEvent:t.handleEvent?t.handleEvent:cn}),this.Vb=t.handleDownEvent?t.handleDownEvent:Mt,this.Tb=t.handleDragEvent?t.handleDragEvent:n,this.Zb=t.handleMoveEvent?t.handleMoveEvent:n,this.ac=t.handleUpEvent?t.handleUpEvent:Mt,this.B=!1,this.P={},this.f=[]}function ln(t){for(var e=t.length,i=0,n=0,r=0;r<e;r++)i+=t[r].clientX,n+=t[r].clientY;return[i/e,n/e]}function cn(t){if(!(t instanceof ui))return!0;var e=!1,i=t.type;return"pointerdown"!==i&&"pointerdrag"!==i&&"pointerup"!==i||(i=t.a,"pointerup"==t.type?delete this.P[i.pointerId]:"pointerdown"==t.type?this.P[i.pointerId]=i:i.pointerId in this.P&&(this.P[i.pointerId]=i),this.f=v(this.P)),this.B&&("pointerdrag"==t.type?this.Tb(t):"pointerup"==t.type&&(this.B=this.ac(t))),"pointerdown"==t.type?(this.B=t=this.Vb(t),e=this.C(t)):"pointermove"==t.type&&this.Zb(t),!e}function un(t){hn.call(this,{handleDownEvent:pn,handleDragEvent:fn,handleUpEvent:dn}),t=t?t:{},this.a=t.kinetic,this.b=null,this.i=t.condition?t.condition:rn,this.g=!1}function fn(t){var e=ln(this.f);if(this.a&&this.a.a.push(e[0],e[1],Date.now()),this.b){var i=this.b[0]-e[0],n=e[1]-this.b[1];t=t.map.W();var r=t.aa(),n=i=[i,n],o=r.resolution;n[0]*=o,n[1]*=o,Z(i,r.rotation),n=i,r=r.center,n[0]+=r[0],n[1]+=r[1],i=t.f.center(i),Se(t,i)}this.b=e}function dn(t){var e=t.map;if(t=e.W(),0===this.f.length){var i;if(i=!this.g&&this.a)if(i=this.a,6>i.a.length)i=!1;else{var n=Date.now()-100,r=i.a.length-3;if(i.a[r+2]<n)i=!1;else{for(var o=r-3;0<o&&i.a[o+2]>n;)o-=3;var n=i.a[r+2]-i.a[o+2],a=i.a[r]-i.a[o],r=i.a[r+1]-i.a[o+1];i.b=Math.atan2(r,a),i.c=Math.sqrt(a*a+r*r)/n,i=.05<i.c}}return i&&(i=(.05-this.a.c)/-.005,r=this.a.b,o=t.get(Pc),o=xs(e,o),e=e.Ka([o[0]-i*Math.cos(r),o[1]-i*Math.sin(r)]),t.animate({center:t.f.center(e),duration:500,easing:Q})),Ce(t,1,-1),!1}return this.b=null,!0}function pn(t){if(0<this.f.length&&this.i(t)){var e=t.map.W();return this.b=null,this.B||Ce(e,1,1),Se(e,t.frameState.viewState.center),this.a&&(t=this.a,t.a.length=0,t.b=0,t.c=0),this.g=1<this.f.length,!0}return!1}function vn(t){t=t?t:{},hn.call(this,{handleDownEvent:mn,handleDragEvent:gn,handleUpEvent:yn}),this.b=t.condition?t.condition:en,this.a=void 0,this.g=void 0!==t.duration?t.duration:250}function gn(t){if(sn(t)){var e=t.map,i=e.Ya();if(t=t.pixel,i=Math.atan2(i[1]/2-t[1],t[0]-i[0]/2),void 0!==this.a){t=i-this.a;var e=e.W(),n=e.get(Ec);Ki(e,n-t)}this.a=i}}function yn(t){if(!sn(t))return!0;t=t.map.W(),Ce(t,1,-1);var e=t.get(Ec),i=this.g,e=t.constrainRotation(e,0);return Ki(t,e,void 0,i),!1}function mn(t){return!!(sn(t)&&nn(t)&&this.b(t))&&(Ce(t.map.W(),1,1),this.a=void 0,!0)}function bn(t){this.f=null,this.c=document.createElement("div"),this.c.style.position="absolute",this.c.className="ol-box "+t,this.b=this.g=this.a=null}function wn(t){var e=t.g,i=t.b;t=t.c.style,t.left=Math.min(e[0],i[0])+"px",t.top=Math.min(e[1],i[1])+"px",t.width=Math.abs(i[0]-e[0])+"px",t.height=Math.abs(i[1]-e[1])+"px"}function xn(t){var e=t.g,i=t.b,e=[e,[e[0],i[1]],i,[i[0],e[1]]].map(t.a.Ka,t.a);e[4]=e[0].slice(),t.f?t.f.ea([e]):t.f=new fe([e])}function Mn(t){hn.call(this,{handleDownEvent:In,handleDragEvent:Cn,handleUpEvent:An}),t=t?t:{},this.a=new bn(t.className||"ol-dragbox"),this.b=null,this.j=t.condition?t.condition:xt,this.i=t.boxEndCondition?t.boxEndCondition:Sn}function Sn(t,e,i){return t=i[0]-e[0],e=i[1]-e[1],64<=t*t+e*e}function Cn(t){if(sn(t)){var e=this.a,i=t.pixel;e.g=this.b,e.b=i,xn(e),wn(e),E(this,new Ln(hu,t.coordinate,t))}}function An(t){return!sn(t)||(this.a.setMap(null),this.i(t,this.b,t.pixel)&&(this.g(t),E(this,new Ln(lu,t.coordinate,t))),!1)}function In(t){if(sn(t)&&nn(t)&&this.j(t)){this.b=t.pixel,this.a.setMap(t.map);var e=this.a,i=this.b;return e.g=this.b,e.b=i,xn(e),wn(e),E(this,new Ln(su,t.coordinate,t)),!0}return!1}function Ln(t,e,i){k.call(this,t),this.coordinate=e,this.mapBrowserEvent=i}function kn(t){t=t?t:{};var e=t.condition?t.condition:on;this.l=void 0!==t.duration?t.duration:200,this.u=void 0!==t.out&&t.out,Mn.call(this,{condition:e,className:t.className||"ol-dragzoom"})}function Pn(t){qi.call(this,{handleEvent:Tn}),t=t||{},this.a=function(t){return rn(t)&&an(t)},this.b=void 0!==t.condition?t.condition:this.a,this.f=void 0!==t.duration?t.duration:100,this.g=void 0!==t.pixelDelta?t.pixelDelta:128}function Tn(t){var e=!1;if("keydown"==t.type){var i=t.originalEvent.keyCode;if(this.b(t)&&(40==i||37==i||39==i||38==i)){var e=t.map.W(),n=Me(e)*this.g,r=0,o=0;40==i?o=-n:37==i?r=-n:39==i?r=n:o=n,n=[r,o],Z(n,e.get(Ec)),i=this.f,(r=e.get(Pc))&&(n=e.f.center([r[0]+n[0],r[1]+n[1]]),i?e.animate({duration:i,easing:tt,center:n}):Se(e,n)),t.preventDefault(),e=!0}}return!e}function En(t){qi.call(this,{handleEvent:Fn}),t=t?t:{},this.b=t.condition?t.condition:an,this.a=t.delta?t.delta:1,this.f=void 0!==t.duration?t.duration:100}function Fn(t){var e=!1;if("keydown"==t.type||"keypress"==t.type){var i=t.originalEvent.charCode;!this.b(t)||43!=i&&45!=i||(e=43==i?this.a:-this.a,i=t.map.W(),Zi(i,e,void 0,this.f),t.preventDefault(),e=!0)}return!e}function Dn(t){qi.call(this,{handleEvent:jn}),t=t||{},this.f=0,this.B=void 0!==t.duration?t.duration:250,this.A=void 0!==t.timeout?t.timeout:80,this.C=void 0===t.useAnchor||t.useAnchor,this.a=null,this.i=this.g=this.j=this.b=void 0}function jn(t){var e=t.type;if("wheel"!==e&&"mousewheel"!==e)return!0;t.preventDefault();var e=t.map,i=t.originalEvent;this.C&&(this.a=t.coordinate);var n;if("wheel"==t.type?(n=i.deltaY,Xc&&i.deltaMode===WheelEvent.DOM_DELTA_PIXEL&&(n/=Jc),i.deltaMode===WheelEvent.DOM_DELTA_LINE&&(n*=40)):"mousewheel"==t.type&&(n=-i.wheelDeltaY,Hc&&(n/=3)),0===n)return!1;if(t=Date.now(),void 0===this.b&&(this.b=t),(!this.g||400<t-this.b)&&(this.g=4>Math.abs(n)?cu:uu),this.g===cu){e=e.W(),this.i?clearTimeout(this.i):Ce(e,1,1),this.i=setTimeout(this.l.bind(this),400),n=Me(e)*Math.pow(2,n/300);var i=e.u,r=e.b,o=0;if(n<i?(n=Math.max(n,i/1.5),o=1):n>r&&(n=Math.min(n,1.5*r),o=-1),this.a){var a=we(e,n,this.a);Se(e,a)}return Ae(e,n),0<o?e.animate({resolution:i,easing:Q,anchor:this.a,duration:500}):0>o&&e.animate({resolution:r,easing:Q,anchor:this.a,duration:500}),this.b=t,!1}return this.f+=n,t=Math.max(this.A-(t-this.b),0),clearTimeout(this.j),this.j=setTimeout(this.u.bind(this,e),t),!1}function Rn(t){hn.call(this,{handleDownEvent:Nn,handleDragEvent:_n,handleUpEvent:Bn}),t=t||{},this.b=null,this.g=void 0,this.a=!1,this.i=0,this.l=void 0!==t.threshold?t.threshold:.3,this.j=void 0!==t.duration?t.duration:250}function _n(t){var e=0,i=this.f[0],n=this.f[1],i=Math.atan2(n.clientY-i.clientY,n.clientX-i.clientX);void 0!==this.g&&(e=i-this.g,this.i+=e,!this.a&&Math.abs(this.i)>this.l&&(this.a=!0)),this.g=i,t=t.map,i=t.a.getBoundingClientRect(),n=ln(this.f),n[0]-=i.left,n[1]-=i.top,this.b=t.Ka(n),this.a&&(i=t.W(),n=i.get(Ec),t.render(),Ki(i,n+e,this.b))}function Bn(t){if(2>this.f.length){if(t=t.map.W(),Ce(t,1,-1),this.a){var e=t.get(Ec),i=this.b,n=this.j,e=t.constrainRotation(e,0);Ki(t,e,i,n)}return!1}return!0}function Nn(t){return 2<=this.f.length&&(t=t.map,this.b=null,this.g=void 0,this.a=!1,this.i=0,this.B||Ce(t.W(),1,1),!0)}function Vn(t){hn.call(this,{handleDownEvent:Wn,handleDragEvent:On,handleUpEvent:Un}),t=t?t:{},this.i=t.constrainResolution||!1,this.b=null,this.j=void 0!==t.duration?t.duration:400,this.a=void 0,this.g=1}function On(t){var e=1,i=this.f[0],n=this.f[1],r=i.clientX-n.clientX,i=i.clientY-n.clientY,r=Math.sqrt(r*r+i*i);void 0!==this.a&&(e=this.a/r),this.a=r,1!=e&&(this.g=e),t=t.map;var r=t.W(),i=Me(r),n=t.a.getBoundingClientRect(),o=ln(this.f);o[0]-=n.left,o[1]-=n.top,this.b=t.Ka(o),t.render(),Qi(r,i*e,this.b)}function Un(t){if(2>this.f.length){if(t=t.map.W(),Ce(t,1,-1),this.i){var e=Me(t),i=this.b,n=this.j,e=t.constrainResolution(e,0,this.g-1);Qi(t,e,i,n)}return!1}return!0}function Wn(t){return 2<=this.f.length&&(t=t.map,this.b=null,this.a=void 0,this.g=1,this.B||Ce(t.W(),1,1),!0)}function Gn(t){t=t?t:{};var e=new ze,i=new Ji;return(void 0!==t.altShiftDragRotate?t.altShiftDragRotate:1)&&e.push(new vn),(void 0!==t.doubleClickZoom?t.doubleClickZoom:1)&&e.push(new $i({delta:t.zoomDelta,duration:t.zoomDuration})),(void 0!==t.dragPan?t.dragPan:1)&&e.push(new un({kinetic:i})),(void 0!==t.pinchRotate?t.pinchRotate:1)&&e.push(new Rn),(void 0!==t.pinchZoom?t.pinchZoom:1)&&e.push(new Vn({duration:t.zoomDuration})),(void 0!==t.keyboard?t.keyboard:1)&&(e.push(new Pn),e.push(new En({delta:t.zoomDelta,duration:t.zoomDuration}))),(void 0!==t.mouseWheelZoom?t.mouseWheelZoom:1)&&e.push(new Dn({duration:t.zoomDuration})),(void 0!==t.shiftDragZoom?t.shiftDragZoom:1)&&e.push(new kn({duration:t.zoomDuration})),e}function Xn(t){j.call(this);var e=Mc({},t);e[fu]=void 0!==t.opacity?t.opacity:1,e[du]=void 0===t.visible||t.visible,e[vu]=void 0!==t.zIndex?t.zIndex:0,e[gu]=void 0!==t.maxResolution?t.maxResolution:1/0,e[yu]=void 0!==t.minResolution?t.minResolution:0,_(this,e),this.a={layer:this,Jb:!0}}function Hn(t){return t.a.opacity=h(t.get(fu),0,1),t.a.pd=t.lc(),t.a.visible=t.f(),t.a.extent=t.M(),t.a.zIndex=t.get(vu),t.a.maxResolution=t.get(gu),t.a.minResolution=Math.max(t.get(yu),0),t.a}function zn(t){var e=t||{};t=Mc({},e),delete t.layers,e=e.layers,Xn.call(this,t),this.g=[],this.b={},M(this,R(mu),this.Zd,this),e?Array.isArray(e)?e=new ze(e.slice()):s(e instanceof ze,43):e=new ze,this.set(mu,e)}function Yn(t){At.call(this,{code:t,units:"m",extent:wu,global:!0,worldExtent:xu,getPointResolution:function(t,e){return t/xc(e[1]/6378137)}})}function Jn(t,e,i){var n=t.length;i=1<i?i:2,void 0===e&&(e=2<i?t.slice():Array(n));for(var r=0;r<n;r+=i){e[r]=bu*t[r]/180;var o=6378137*Math.log(Math.tan(Math.PI*(t[r+1]+90)/360));o>bu?o=bu:o<-bu&&(o=-bu),e[r+1]=o}return e}function qn(t,e,i){var n=t.length;i=1<i?i:2,void 0===e&&(e=2<i?t.slice():Array(n));for(var r=0;r<n;r+=i)e[r]=180*t[r]/bu,e[r+1]=360*Math.atan(Math.exp(t[r+1]/6378137))/Math.PI-90;return e}function Kn(t,e){At.call(this,{code:t,units:"degrees",extent:Cu,axisOrientation:e,global:!0,metersPerUnit:Au,worldExtent:Cu})}function Zn(t,e,i,n,r){k.call(this,t),this.vectorContext=e,this.frameState=i,this.context=n,this.glContext=r}function Qn(t){var e=Mc({},t);delete e.source,Xn.call(this,e),this.j=this.g=this.b=null,t.map&&this.setMap(t.map),M(this,R("source"),this.he,this),this.set("source",t.source?t.source:null)}function $n(t,e){return t.visible&&e>=t.minResolution&&e<t.maxResolution}function tr(){this.a={},this.c=0}function er(){return[1,0,0,1,0,0]}function ir(t){return rr(t,1,0,0,1,0,0)}function nr(t,e){var i=t[0],n=t[1],r=t[2],o=t[3],a=t[4],s=t[5],h=e[0],l=e[1],c=e[2],u=e[3],f=e[4],d=e[5];t[0]=i*h+r*l,t[1]=n*h+o*l,t[2]=i*c+r*u,t[3]=n*c+o*u,t[4]=i*f+r*d+a,t[5]=n*f+o*d+s}function rr(t,e,i,n,r,o,a){return t[0]=e,t[1]=i,t[2]=n,t[3]=r,t[4]=o,t[5]=a,t}function or(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t}function ar(t,e){var i=e[0],n=e[1];return e[0]=t[0]*i+t[2]*n+t[4],e[1]=t[1]*i+t[3]*n+t[5],e}function sr(t,e){var i=Math.cos(e),n=Math.sin(e);nr(t,rr(ku,i,n,-n,i,0,0))}function hr(t,e,i,n,r,o,a,s){var h=Math.sin(o);return o=Math.cos(o),t[0]=n*o,t[1]=r*h,t[2]=-n*h,t[3]=r*o,t[4]=a*n*o-s*n*h+e,t[5]=a*r*h+s*r*o+i,t}function lr(t,e){this.j=e,this.b={},this.u={}}function cr(t){var e=t.viewState,i=t.coordinateToPixelTransform,n=t.pixelToCoordinateTransform;hr(i,t.size[0]/2,t.size[1]/2,1/e.resolution,-1/e.resolution,-e.rotation,-e.center[0],-e.center[1]),t=or(n,i),e=t[0]*t[3]-t[1]*t[2],s(0!==e,32);var i=t[0],n=t[1],r=t[2],o=t[3],a=t[4],h=t[5];t[0]=o/e,t[1]=-n/e,t[2]=-r/e,t[3]=i/e,t[4]=(r*h-o*a)/e,t[5]=-(i*h-n*a)/e}function ur(){if(32<Lu.c){var t,e,i=0;for(t in Lu.a)e=Lu.a[t],0!==(3&i++)||F(e)||(delete Lu.a[t],--Lu.c)}}function fr(t,e){var i=o(e).toString();if(i in t.b)return t.b[i];var n=t.Oc(e);return t.b[i]=n,t.u[i]=M(n,"change",t.Xd,t),n}function dr(t,e){for(var i in t.b)if(!(i in e.layerStates)){e.postRenderFunctions.push(t.bf.bind(t));break}}function pr(t,e){return t.zIndex-e.zIndex}function vr(t){t=t?t:{};var e=Mc({},t);delete e.preload,delete e.useInterimTilesOnError,
Qn.call(this,e),this.set(Pu,void 0!==t.preload?t.preload:0),this.set(Tu,void 0===t.useInterimTilesOnError||t.useInterimTilesOnError)}function gr(t,e,i,n){0!==e&&(t.translate(i,n),t.rotate(e),t.translate(-i,-n))}function yr(t){this.j=t.opacity,this.F=t.rotateWithView,this.u=t.rotation,this.o=t.scale,this.B=t.snapToPixel}function mr(t){this.A=this.D=this.i=null,this.f=void 0!==t.fill?t.fill:null,this.Y=[0,0],this.a=t.points,this.c=void 0!==t.radius?t.radius:t.radius1,this.g=void 0!==t.radius2?t.radius2:this.c,this.l=void 0!==t.angle?t.angle:0,this.b=void 0!==t.stroke?t.stroke:null,this.L=this.P=this.G=null;var e,i=this.C=t.atlasManager,n="",r="",a=0,s=null,h=0;this.b&&(e=$e(this.b.a),h=this.b.b,void 0===h&&(h=1),s=this.b.c,qc||(s=null),r=this.b.g,void 0===r&&(r="round"),n=this.b.f,void 0===n&&(n="round"),a=this.b.i,void 0===a&&(a=10));var l=2*(this.c+h)+1,n={strokeStyle:e,qd:h,size:l,lineCap:n,lineDash:s,lineJoin:r,miterLimit:a};if(void 0===i){var c=ti(l,l);this.D=c.canvas,i=l=this.D.width,this.Rc(n,c,0,0),this.f?this.A=this.D:(c=ti(n.size,n.size),this.A=c.canvas,this.Qc(n,c,0,0))}else l=Math.round(l),(r=!this.f)&&(c=this.Qc.bind(this,n)),this.b?(a=this.b,void 0===a.o&&(a.o="s",a.o=a.a?"string"==typeof a.a?a.o+a.a:a.o+o(a.a).toString():a.o+"-",a.o+=","+(void 0!==a.f?a.f.toString():"-")+","+(a.c?a.c.toString():"-")+","+(void 0!==a.g?a.g:"-")+","+(void 0!==a.i?a.i.toString():"-")+","+(void 0!==a.b?a.b.toString():"-")),a=a.o):a="-",this.f?(s=this.f,void 0===s.c&&(s.c=s.a instanceof CanvasPattern||s.a instanceof CanvasGradient?o(s.a).toString():"f"+(s.a?Ze(s.a):"-")),s=s.c):s="-",this.i&&a==this.i[1]&&s==this.i[2]&&this.c==this.i[3]&&this.g==this.i[4]&&this.l==this.i[5]&&this.a==this.i[6]||(this.i=["r"+a+s+(void 0!==this.c?this.c.toString():"-")+(void 0!==this.g?this.g.toString():"-")+(void 0!==this.l?this.l.toString():"-")+(void 0!==this.a?this.a.toString():"-"),a,s,this.c,this.g,this.l,this.a]),c=i.add(this.i[0],l,l,this.Rc.bind(this,n),c),this.D=c.image,this.Y=[c.offsetX,c.offsetY],i=c.image.width,this.A=r?c.a:this.D;this.G=[l/2,l/2],this.P=[l,l],this.L=[i,i],yr.call(this,{opacity:1,rotateWithView:void 0!==t.rotateWithView&&t.rotateWithView,rotation:void 0!==t.rotation?t.rotation:0,scale:1,snapToPixel:void 0===t.snapToPixel||t.snapToPixel})}function br(t){t=t||{},mr.call(this,{points:1/0,fill:t.fill,radius:t.radius,snapToPixel:t.snapToPixel,stroke:t.stroke,atlasManager:t.atlasManager})}function wr(t){t=t||{},this.a=void 0!==t.color?t.color:null,this.c=void 0}function xr(t){t=t||{},this.a=void 0!==t.color?t.color:null,this.f=t.lineCap,this.c=void 0!==t.lineDash?t.lineDash:null,this.g=t.lineJoin,this.i=t.miterLimit,this.b=t.width,this.o=void 0}function Mr(t){t=t||{},this.i=null,this.g=Ir,void 0!==t.geometry&&this.Da(t.geometry),this.b=void 0!==t.fill?t.fill:null,this.f=void 0!==t.image?t.image:null,this.c=void 0!==t.stroke?t.stroke:null,this.o=void 0!==t.text?t.text:null,this.a=t.zIndex}function Sr(t){if("function"!=typeof t){var e;Array.isArray(t)?e=t:(s(t instanceof Mr,41),e=[t]),t=function(){return e}}return t}function Cr(){if(!ju){var t=new wr({color:"rgba(255,255,255,0.4)"}),e=new xr({color:"#3399CC",width:1.25});ju=[new Mr({image:new br({fill:t,stroke:e,radius:5}),fill:t,stroke:e})]}return ju}function Ar(){var t={},e=[255,255,255,1],i=[0,153,255,1];return t.Polygon=[new Mr({fill:new wr({color:[255,255,255,.5]})})],t.MultiPolygon=t.Polygon,t.LineString=[new Mr({stroke:new xr({color:e,width:5})}),new Mr({stroke:new xr({color:i,width:3})})],t.MultiLineString=t.LineString,t.Circle=t.Polygon.concat(t.LineString),t.Point=[new Mr({image:new br({radius:6,fill:new wr({color:i}),stroke:new xr({color:e,width:1.5})}),zIndex:1/0})],t.MultiPoint=t.Point,t.GeometryCollection=t.Polygon.concat(t.LineString,t.Point),t}function Ir(t){return t.T()}function Lr(t){t=t?t:{};var e=Mc({},t);delete e.style,delete e.renderBuffer,delete e.updateWhileAnimating,delete e.updateWhileInteracting,Qn.call(this,e),this.i=void 0!==t.renderBuffer?t.renderBuffer:100,this.B=null,this.u=void 0,e=t.style,this.B=void 0!==e?e:Cr,this.u=null===e?void 0:Sr(this.B),this.v(),this.A=void 0!==t.updateWhileAnimating&&t.updateWhileAnimating,this.C=void 0!==t.updateWhileInteracting&&t.updateWhileInteracting}function kr(){}function Pr(t,e,i,n,r){this.f=t,this.B=e,this.o=i,this.A=n,this.Oa=r,this.g=this.a=this.c=this.ka=this.ja=this.V=null,this.ca=this.ba=this.D=this.L=this.G=this.C=0,this.xa=!1,this.i=this.ia=0,this.sa=!1,this.Y=0,this.b="",this.za=this.ta=0,this.Aa=!1,this.l=this.Ba=0,this.P=this.u=this.j=null,this.F=[],this.Ja=er()}function Tr(t,e,i){if(t.g){e=Ht(e,0,i,2,t.A,t.F),i=t.f;var n=t.Ja,r=i.globalAlpha;1!=t.D&&(i.globalAlpha=r*t.D);var o=t.ia;t.xa&&(o+=t.Oa);var a,s;for(a=0,s=e.length;a<s;a+=2){var h=e[a]-t.C,l=e[a+1]-t.G;if(t.sa&&(h=Math.round(h),l=Math.round(l)),0!==o||1!=t.i){var c=h+t.C,u=l+t.G;hr(n,c,u,t.i,t.i,o,-c,-u),i.setTransform.apply(i,n)}i.drawImage(t.g,t.ba,t.ca,t.Y,t.L,h,l,t.Y,t.L)}0===o&&1==t.i||i.setTransform(1,0,0,1,0,0),1!=t.D&&(i.globalAlpha=r)}}function Er(t,e,i,n){var r=0;if(t.P&&""!==t.b){t.j&&jr(t,t.j),t.u&&Rr(t,t.u);var o=t.P,a=t.f,s=t.ka;for(s?(s.font!=o.font&&(s.font=a.font=o.font),s.textAlign!=o.textAlign&&(s.textAlign=a.textAlign=o.textAlign),s.textBaseline!=o.textBaseline&&(s.textBaseline=a.textBaseline=o.textBaseline)):(a.font=o.font,a.textAlign=o.textAlign,a.textBaseline=o.textBaseline,t.ka={font:o.font,textAlign:o.textAlign,textBaseline:o.textBaseline}),e=Ht(e,r,i,n,t.A,t.F),o=t.f,a=t.Ba,t.Aa&&(a+=t.Oa);r<i;r+=n){var s=e[r]+t.ta,h=e[r+1]+t.za;if(0!==a||1!=t.l){var l=hr(t.Ja,s,h,t.l,t.l,a,-s,-h);o.setTransform.apply(o,l)}t.u&&o.strokeText(t.b,s,h),t.j&&o.fillText(t.b,s,h)}0===a&&1==t.l||o.setTransform(1,0,0,1,0,0)}}function Fr(t,e,i,n,r,o){var a=t.f;for(t=Ht(e,i,n,r,t.A,t.F),a.moveTo(t[0],t[1]),e=t.length,o&&(e-=2),i=2;i<e;i+=2)a.lineTo(t[i],t[i+1]);return o&&a.closePath(),n}function Dr(t,e,i,n,r){var o,a;for(o=0,a=n.length;o<a;++o)i=Fr(t,e,i,n[o],r,!0);return i}function jr(t,e){var i=t.f,n=t.V;n?n.fillStyle!=e.fillStyle&&(n.fillStyle=i.fillStyle=e.fillStyle):(i.fillStyle=e.fillStyle,t.V={fillStyle:e.fillStyle})}function Rr(t,e){var i=t.f,n=t.ja;n?(n.lineCap!=e.lineCap&&(n.lineCap=i.lineCap=e.lineCap),qc&&!U(n.lineDash,e.lineDash)&&i.setLineDash(n.lineDash=e.lineDash),n.lineJoin!=e.lineJoin&&(n.lineJoin=i.lineJoin=e.lineJoin),n.lineWidth!=e.lineWidth&&(n.lineWidth=i.lineWidth=e.lineWidth),n.miterLimit!=e.miterLimit&&(n.miterLimit=i.miterLimit=e.miterLimit),n.strokeStyle!=e.strokeStyle&&(n.strokeStyle=i.strokeStyle=e.strokeStyle)):(i.lineCap=e.lineCap,qc&&i.setLineDash(e.lineDash),i.lineJoin=e.lineJoin,i.lineWidth=e.lineWidth,i.miterLimit=e.miterLimit,i.strokeStyle=e.strokeStyle,t.ja={lineCap:e.lineCap,lineDash:e.lineDash,lineJoin:e.lineJoin,lineWidth:e.lineWidth,miterLimit:e.miterLimit,strokeStyle:e.strokeStyle})}function _r(t){D.call(this),this.a=t}function Br(t){var e=t.a;e.f()&&"ready"==e.lc()&&t.v()}function Nr(t,e){e.gd()&&t.postRenderFunctions.push(function(t,e,i){e=o(t).toString(),t.Sa(i.viewState.projection,i.usedTiles[e])}.bind(null,e))}function Vr(t,e){if(e){var i,n,r;for(n=0,r=e.length;n<r;++n)i=e[n],t[o(i).toString()]=i}}function Or(t,e){var i=e.P;void 0!==i&&("string"==typeof i?t.logos[i]="":i&&(s("string"==typeof i.href,44),s("string"==typeof i.src,45),t.logos[i.src]=i.href))}function Ur(t,e,i,n){e=o(e).toString(),i=i.toString(),e in t?i in t[e]?(t=t[e][i],n.K<t.K&&(t.K=n.K),n.J>t.J&&(t.J=n.J),n.N<t.N&&(t.N=n.N),n.R>t.R&&(t.R=n.R)):t[e][i]=n:(t[e]={},t[e][i]=n)}function Wr(t,e,i,n,r,a,s,h,l,c){var u=o(e).toString();u in t.wantedTiles||(t.wantedTiles[u]={});var f=t.wantedTiles[u];t=t.tileQueue;var d,p,v,g,y,m,b=i.minZoom;for(m=s;m>=b;--m)for(p=_e(i,a,m,p),v=i.a[m],g=p.K;g<=p.J;++g)for(y=p.N;y<=p.R;++y)s-m<=h?(d=dc(e,m,g,y,n,r),0==d.aa()&&(f[d.getKey()]=!0,d.getKey()in t.c||t.g([d,u,Be(i,d.ga),v])),void 0!==l&&l.call(c,d)):e.ud(m,g,y,r)}function Gr(t){_r.call(this,t),this.P=er()}function Xr(t,e,i){var n=e.pixelRatio,r=e.size[0]*n,o=e.size[1]*n,a=e.viewState.rotation,s=[i[0],i[3]],h=[i[2],i[3]],l=[i[2],i[1]];i=[i[0],i[1]],ar(e.coordinateToPixelTransform,s),ar(e.coordinateToPixelTransform,h),ar(e.coordinateToPixelTransform,l),ar(e.coordinateToPixelTransform,i),t.save(),gr(t,-a,r/2,o/2),t.beginPath(),t.moveTo(s[0]*n,s[1]*n),t.lineTo(h[0]*n,h[1]*n),t.lineTo(l[0]*n,l[1]*n),t.lineTo(i[0]*n,i[1]*n),t.clip(),gr(t,a,r/2,o/2)}function Hr(t,e,i,n,r){var o=t.a;if(F(o,e)){var a=n.size[0]*n.pixelRatio,s=n.size[1]*n.pixelRatio,h=n.viewState.rotation;gr(i,-h,a/2,s/2),t=void 0!==r?r:zr(t,n,0),E(o,new Zn(e,new Pr(i,n.pixelRatio,n.extent,t,n.viewState.rotation),n,i,null)),gr(i,h,a/2,s/2)}}function zr(t,e,i){var n=e.viewState,r=e.pixelRatio,o=r/n.resolution;return hr(t.P,r*e.size[0]/2,r*e.size[1]/2,o,-o,-n.rotation,-n.center[0]+i,-n.center[1])}function Yr(t){Gr.call(this,t),this.A=er()}function Jr(t){Yr.call(this,t),this.i=ti(),this.b=null,this.g=[],this.V=at(),this.ba=new Ie(0,0,0,0),this.u=er()}function qr(){}function Kr(t,e,i,n){this.ia=t,this.ja=e,this.overlaps=n,this.f=0,this.resolution=i,this.Y=this.L=null,this.c=[],this.coordinates=[],this.ka=er(),this.a=[],this.ba=[],this.xa=er(),this.ca=er()}function Zr(t,e,i,n,r,o,a){var s=t.coordinates.length,h=t.fc();a&&(i+=r),a=[e[i],e[i+1]];var l,c,u,f=[NaN,NaN],d=!0;for(l=i+r;l<n;l+=r){f[0]=e[l],f[1]=e[l+1],u=h[1];var p=h[2],v=h[3],g=f[0],y=f[1],m=0;g<h[0]?m|=16:g>p&&(m|=4),y<u?m|=8:y>v&&(m|=2),0===m&&(m=1),u=m,u!==c?(d&&(t.coordinates[s++]=a[0],t.coordinates[s++]=a[1]),t.coordinates[s++]=f[0],t.coordinates[s++]=f[1],d=!1):1===u?(t.coordinates[s++]=f[0],t.coordinates[s++]=f[1],d=!1):d=!0,a[0]=f[0],a[1]=f[1],c=u}return(o&&d||l===i+r)&&(t.coordinates[s++]=a[0],t.coordinates[s++]=a[1]),s}function Qr(t,e){t.L=[0,e,0],t.c.push(t.L),t.Y=[0,e,0],t.a.push(t.Y)}function $r(t,e,i){if(t.V){var n=ar(t.ka,t.V.slice());e.translate(n[0],n[1]),e.rotate(i)}e.fill(),t.V&&e.setTransform.apply(e,t.ca)}function to(t,e,i,n,r,a,s,h,l){var c;U(n,t.ka)?c=t.ba:(c=Ht(t.coordinates,0,t.coordinates.length,2,n,t.ba),or(t.ka,n)),n=!g(a);for(var u,f,d,p,v,y=0,m=s.length,b=0,w=t.xa,x=t.ca,M=0,S=0,C=t.c!=s||t.overlaps?0:200;y<m;){var A,I,L,k,P=s[y];switch(P[0]){case 0:b=P[1],n&&a[o(b).toString()]||!b.T()?y=P[2]:void 0===l||wt(l,b.T().M())?++y:y=P[2]+1;break;case 1:M>C&&($r(t,e,r),M=0),S>C&&(e.stroke(),S=0),M||S||e.beginPath(),++y;break;case 2:b=P[1],u=c[b],P=c[b+1],p=c[b+2]-u,b=c[b+3]-P,b=Math.sqrt(p*p+b*b),e.moveTo(u+b,P),e.arc(u,P,b,0,2*Math.PI,!0),++y;break;case 3:e.closePath(),++y;break;case 4:b=P[1],u=P[2],A=P[3],I=P[4]*i,L=P[5]*i;var T=P[6],E=P[7],F=P[8],D=P[9];k=P[10],p=P[11],v=P[12];var j=P[13],R=P[14];for(k&&(p+=r);b<u;b+=2){if(P=c[b]-I,k=c[b+1]-L,j&&(P=Math.round(P),k=Math.round(k)),1!=v||0!==p){var _=P+I,B=k+L;hr(w,_,B,v,v,p,-_,-B),e.setTransform.apply(e,w)}_=e.globalAlpha,1!=E&&(e.globalAlpha=_*E);var B=R+F>A.width?A.width-F:R,N=T+D>A.height?A.height-D:T;e.drawImage(A,F,D,B,N,P,k,B*i,N*i),1!=E&&(e.globalAlpha=_),1==v&&0===p||e.setTransform.apply(e,x)}++y;break;case 5:for(b=P[1],u=P[2],L=P[3],T=P[4]*i,E=P[5]*i,p=P[6],v=P[7]*i,A=P[8],I=P[9],(k=P[10])&&(p+=r);b<u;b+=2){for(P=c[b]+T,k=c[b+1]+E,1==v&&0===p||(hr(w,P,k,v,v,p,-P,-k),e.setTransform.apply(e,w)),F=L.split("\n"),D=F.length,1<D?(j=Math.round(1.5*e.measureText("M").width),k-=(D-1)/2*j):j=0,R=0;R<D;R++)_=F[R],I&&e.strokeText(_,P,k),A&&e.fillText(_,P,k),k+=j;1==v&&0===p||e.setTransform.apply(e,x)}++y;break;case 6:if(void 0!==h&&(b=P[1],b=h(b)))return b;++y;break;case 7:C?M++:$r(t,e,r),++y;break;case 8:for(b=P[1],u=P[2],P=c[b],k=c[b+1],p=P+.5|0,v=k+.5|0,p===f&&v===d||(e.moveTo(P,k),f=p,d=v),b+=2;b<u;b+=2)P=c[b],k=c[b+1],p=P+.5|0,v=k+.5|0,(b==u-2||p!==f||v!==d)&&(e.lineTo(P,k),f=p,d=v);++y;break;case 9:t.V=P[2],M&&($r(t,e,r),M=0),e.fillStyle=P[1],++y;break;case 10:f=void 0===P[7]||P[7];var V=P[8];d=P[2],S&&(e.stroke(),S=0),e.strokeStyle=P[1],e.lineWidth=f?d*i:d,e.lineCap=P[3],e.lineJoin=P[4],e.miterLimit=P[5],qc&&(d=P[6],f&&i!==V&&(d=d.map(function(t){return t*i/V}),P[6]=d,P[8]=i),e.setLineDash(d)),d=f=NaN,++y;break;case 11:e.font=P[1],e.textAlign=P[2],e.textBaseline=P[3],++y;break;case 12:C?S++:e.stroke(),++y;break;default:++y}}M&&$r(t,e,r),S&&e.stroke()}function eo(t){var e=t.a;e.reverse();var i,n,r,o=e.length,a=-1;for(i=0;i<o;++i)if(n=e[i],r=n[0],6==r)a=i;else if(0==r){for(n[2]=i,n=t.a,r=i;a<r;){var s=n[a];n[a]=n[r],n[r]=s,++a,--r}a=-1}}function io(t,e){t.L[2]=t.c.length,t.L=null,t.Y[2]=t.a.length,t.Y=null;var i=[6,e];t.c.push(i),t.a.push(i)}function no(t,e,i,n){Kr.call(this,t,e,i,n),this.j=this.P=null,this.G=this.C=this.A=this.B=this.F=this.D=this.u=this.l=this.o=this.i=this.b=void 0}function ro(t,e,i,n){Kr.call(this,t,e,i,n),this.i=null,this.b={hb:void 0,bb:void 0,cb:null,eb:void 0,fb:void 0,gb:void 0,oc:0,strokeStyle:void 0,lineCap:void 0,lineDash:null,lineJoin:void 0,lineWidth:void 0,miterLimit:void 0}}function oo(t,e,i,n,r){var o=t.coordinates.length;return e=Zr(t,e,i,n,r,!1,!1),o=[8,o,e],t.c.push(o),t.a.push(o),n}function ao(t){var e=t.b,i=e.strokeStyle,n=e.lineCap,r=e.lineDash,o=e.lineJoin,a=e.lineWidth,s=e.miterLimit;e.hb==i&&e.bb==n&&U(e.cb,r)&&e.eb==o&&e.fb==a&&e.gb==s||(e.oc!=t.coordinates.length&&(t.c.push([12]),e.oc=t.coordinates.length),t.c.push([10,i,a,n,o,s,r,!0,1],[1]),e.hb=i,e.bb=n,e.cb=r,e.eb=o,e.fb=a,e.gb=s)}function so(t,e,i,n){Kr.call(this,t,e,i,n),this.i=null,this.b={Pc:void 0,hb:void 0,bb:void 0,cb:null,eb:void 0,fb:void 0,gb:void 0,fillStyle:void 0,strokeStyle:void 0,lineCap:void 0,lineDash:null,lineJoin:void 0,lineWidth:void 0,miterLimit:void 0}}function ho(t,e,i,n,r){var o=t.b,a=void 0!==o.fillStyle,o=void 0!=o.strokeStyle,s=n.length,h=[1];for(t.c.push(h),t.a.push(h),h=0;h<s;++h){var l=n[h],c=t.coordinates.length;i=Zr(t,e,i,l,r,!0,!o),i=[8,c,i],t.c.push(i),t.a.push(i),o&&(i=[3],t.c.push(i),t.a.push(i)),i=l}return e=[7],t.a.push(e),a&&t.c.push(e),o&&(a=[12],t.c.push(a),t.a.push(a)),i}function lo(t,e){var i=t.b,n=i.fillStyle,r=i.strokeStyle,o=i.lineCap,a=i.lineDash,s=i.lineJoin,h=i.lineWidth,l=i.miterLimit;if(void 0!==n&&("string"!=typeof n||i.Pc!=n)){var c=[9,n];"string"!=typeof n&&(n=e.M(),c.push([n[0],n[3]])),t.c.push(c),i.Pc=i.fillStyle}void 0===r||i.hb==r&&i.bb==o&&U(i.cb,a)&&i.eb==s&&i.fb==h&&i.gb==l||(t.c.push([10,r,h,o,s,l,a,!0,1]),i.hb=r,i.bb=o,i.cb=a,i.eb=s,i.fb=h,i.gb=l)}function co(t,e,i,n){Kr.call(this,t,e,i,n),this.G=this.C=this.A=null,this.j="",this.u=this.l=0,this.D=void 0,this.B=this.F=0,this.o=this.i=this.b=null}function uo(t,e,i,n,r){if(""!==t.j&&t.o&&(t.b||t.i)){if(t.b){var o=t.b,a=t.A;if(!a||a.fillStyle!=o.fillStyle){var s=[9,o.fillStyle];t.c.push(s),t.a.push(s),a?a.fillStyle=o.fillStyle:t.A={fillStyle:o.fillStyle}}}t.i&&(o=t.i,a=t.C,a&&a.lineCap==o.lineCap&&a.lineDash==o.lineDash&&a.lineJoin==o.lineJoin&&a.lineWidth==o.lineWidth&&a.miterLimit==o.miterLimit&&a.strokeStyle==o.strokeStyle||(s=[10,o.strokeStyle,o.lineWidth,o.lineCap,o.lineJoin,o.miterLimit,o.lineDash,!1,1],t.c.push(s),t.a.push(s),a?(a.lineCap=o.lineCap,a.lineDash=o.lineDash,a.lineJoin=o.lineJoin,a.lineWidth=o.lineWidth,a.miterLimit=o.miterLimit,a.strokeStyle=o.strokeStyle):t.C={lineCap:o.lineCap,lineDash:o.lineDash,lineJoin:o.lineJoin,lineWidth:o.lineWidth,miterLimit:o.miterLimit,strokeStyle:o.strokeStyle})),o=t.o,a=t.G,a&&a.font==o.font&&a.textAlign==o.textAlign&&a.textBaseline==o.textBaseline||(s=[11,o.font,o.textAlign,o.textBaseline],t.c.push(s),t.a.push(s),a?(a.font=o.font,a.textAlign=o.textAlign,a.textBaseline=o.textBaseline):t.G={font:o.font,textAlign:o.textAlign,textBaseline:o.textBaseline}),Qr(t,r),o=t.coordinates.length,e=Zr(t,e,0,i,n,!1,!1),e=[5,o,e,t.j,t.l,t.u,t.F,t.B,!!t.b,!!t.i,t.D],t.c.push(e),t.a.push(e),io(t,r)}}function fo(t,e,i,n,r){this.D=t,this.f=e,this.l=n,this.u=i,this.i=r,this.c={},this.o=ti(1,1),this.j=er()}function po(t,e,i){var n,r=Math.floor(t.length/2);if(e>=r)for(n=r;n<e;n++)t[n][i]=!0;else if(e<r)for(n=e+1;n<r;n++)t[n][i]=!0}function vo(t){if(void 0!==_u[t])return _u[t];for(var e=2*t+1,i=Array(e),n=0;n<e;n++)i[n]=Array(e);for(var e=t,r=n=0;e>=n;)po(i,t+e,t+n),po(i,t+n,t+e),po(i,t-n,t+e),po(i,t-e,t+n),po(i,t-e,t-n),po(i,t-n,t-e),po(i,t+n,t-e),po(i,t+e,t-n),n++,r+=1+2*n,0<2*(r-e)+1&&(--e,r+=1-2*e);return _u[t]=i}function go(t){for(var e in t.c){var i,n=t.c[e];for(i in n)n[i].Kb()}}function yo(t,e,i,n,r,o,a){var s=Object.keys(t.c).map(Number);s.sort(function(t,e){return e-t});var h,l,c,u,f;for(h=0,l=s.length;h<l;++h)for(u=t.c[s[h].toString()],c=Ru.length-1;0<=c;--c)if(f=u[Ru[c]],void 0!==f&&(f=to(f,e,1,i,n,r,f.a,o,a)))return f}function mo(t,e){return o(t)-o(e)}function bo(t,e){var i=.5*t/e;return i*i}function wo(t,e,i,n,r,o){var a,s,h=!1;return(a=i.f)&&(s=a.Lb(),2==s||3==s?a.sd(r,o):(0==s&&a.load(),a.Yc(r,o),h=!0)),(r=(0,i.g)(e))&&(n=r.kc(n),(0,Nu[n.$()])(t,n,i,e)),h}function xo(t){Gr.call(this,t),this.b=!1,this.C=-1,this.A=NaN,this.i=at(),this.f=this.u=null,this.g=ti()}function Mo(t,e){lr.call(this,0,e),this.f=ti(),this.a=this.f.canvas,this.a.style.width="100%",this.a.style.height="100%",this.a.className="ol-unselectable",t.insertBefore(this.a,t.childNodes[0]||null),this.c=!0,this.g=er()}function So(t,e,i){var n=t.j,r=t.f;if(F(n,e)){var o=i.extent,a=i.pixelRatio,s=i.viewState.rotation,h=i.viewState,l=i.pixelRatio/h.resolution;t=hr(t.g,t.a.width/2,t.a.height/2,l,-l,-h.rotation,-h.center[0],-h.center[1]),E(n,new Zn(e,new Pr(r,a,o,t,s),i,r,null))}}function Co(t,e,i,n,r,o){return t=(i-t)*(o-e)-(r-t)*(n-e),t<=Wu&&t>=-Wu?void 0:0<t}function Ao(t){this.a=t}function Io(t){this.a=t}function Lo(t){this.a=t}function ko(){this.a="precision mediump float;varying vec2 a;varying vec2 b;varying float c;varying float d;uniform float m;uniform vec4 n;uniform vec4 o;uniform vec2 p;void main(void){vec2 windowCenter=vec2((a.x+1.0)/2.0*p.x*d,(a.y+1.0)/2.0*p.y*d);vec2 windowOffset=vec2((b.x+1.0)/2.0*p.x*d,(b.y+1.0)/2.0*p.y*d);float radius=length(windowCenter-windowOffset);float dist=length(windowCenter-gl_FragCoord.xy);if(dist>radius+c){if(o.a==0.0){gl_FragColor=n;}else{gl_FragColor=o;}gl_FragColor.a=gl_FragColor.a-(dist-(radius+c));}else if(n.a==0.0){gl_FragColor=o;if(dist<radius-c){gl_FragColor.a=gl_FragColor.a-(radius-c-dist);}} else{gl_FragColor=n;float strokeDist=radius-c;float antialias=2.0*d;if(dist>strokeDist){gl_FragColor=o;}else if(dist>=strokeDist-antialias){float step=smoothstep(strokeDist-antialias,strokeDist,dist);gl_FragColor=mix(n,o,step);}} gl_FragColor.a=gl_FragColor.a*m;if(gl_FragColor.a<=0.0){discard;}}"}function Po(){this.a="varying vec2 a;varying vec2 b;varying float c;varying float d;attribute vec2 e;attribute float f;attribute float g;uniform mat4 h;uniform mat4 i;uniform mat4 j;uniform float k;uniform float l;void main(void){mat4 offsetMatrix=i*j;a=vec4(h*vec4(e,0.0,1.0)).xy;d=l;float lineWidth=k*l;c=lineWidth/2.0;if(lineWidth==0.0){lineWidth=2.0*l;}vec2 offset;float radius=g+3.0*l;if(f==0.0){offset=vec2(-1.0,1.0);}else if(f==1.0){offset=vec2(-1.0,-1.0);}else if(f==2.0){offset=vec2(1.0,-1.0);}else{offset=vec2(1.0,1.0);}gl_Position=h*vec4(e+offset*radius,0.0,1.0)+offsetMatrix*vec4(offset*lineWidth,0.0,0.0);b=vec4(h*vec4(e.x+g,e.y,0.0,1.0)).xy;if(distance(a,b)>20000.0){gl_Position=vec4(a,0.0,1.0);}}"}function To(t,e){this.C=t.getUniformLocation(e,"n"),this.G=t.getUniformLocation(e,"k"),this.f=t.getUniformLocation(e,"j"),this.g=t.getUniformLocation(e,"i"),this.c=t.getUniformLocation(e,"m"),this.L=t.getUniformLocation(e,"l"),this.b=t.getUniformLocation(e,"h"),this.Y=t.getUniformLocation(e,"p"),this.P=t.getUniformLocation(e,"o"),this.o=t.getAttribLocation(e,"f"),this.a=t.getAttribLocation(e,"e"),this.F=t.getAttribLocation(e,"g")}function Eo(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}function Fo(t,e){return t[0]=e[0],t[1]=e[1],t[4]=e[2],t[5]=e[3],t[12]=e[4],t[13]=e[5],t}function Do(t,e){this.origin=vt(e),this.Ba=er(),this.za=er(),this.Aa=er(),this.sa=Eo(),this.a=[],this.l=null,this.b=[],this.i=[],this.c=[],this.u=null,this.o=void 0}function jo(t,e,i,n){t.drawElements(4,n-i,e.i?5125:5123,i*(e.i?4:2))}function Ro(t){this.a=void 0!==t?t:[],this.c=Hu}function _o(t,e){Do.call(this,0,e),this.D=null,this.j=[],this.F=[],this.B=0,this.f={fillColor:null,strokeColor:null,lineDash:null,lineWidth:void 0,v:!1}}function Bo(t,e,i,n){e.uniform4fv(t.D.P,i),e.uniform1f(t.D.G,n)}function No(){this.a="precision mediump float;varying vec2 a;varying float b;uniform float k;uniform sampler2D l;void main(void){vec4 texColor=texture2D(l,a);gl_FragColor.rgb=texColor.rgb;float alpha=texColor.a*b*k;if(alpha==0.0){discard;}gl_FragColor.a=alpha;}"}function Vo(){this.a="varying vec2 a;varying float b;attribute vec2 c;attribute vec2 d;attribute vec2 e;attribute float f;attribute float g;uniform mat4 h;uniform mat4 i;uniform mat4 j;void main(void){mat4 offsetMatrix=i;if(g==1.0){offsetMatrix=i*j;}vec4 offsets=offsetMatrix*vec4(e,0.0,0.0);gl_Position=h*vec4(c,0.0,1.0)+offsets;a=d;b=f;}"}function Oo(t,e){this.f=t.getUniformLocation(e,"j"),this.g=t.getUniformLocation(e,"i"),this.c=t.getUniformLocation(e,"k"),this.b=t.getUniformLocation(e,"h"),this.u=t.getAttribLocation(e,"e"),this.D=t.getAttribLocation(e,"f"),this.a=t.getAttribLocation(e,"c"),this.B=t.getAttribLocation(e,"g"),this.A=t.getAttribLocation(e,"d")}function Uo(t,e){this.u=t,this.a=e,this.c={},this.f={},this.b={},this.j=this.l=this.g=this.o=null,(this.i=0<=yc.indexOf("OES_element_index_uint"))&&e.getExtension("OES_element_index_uint"),M(this.u,"webglcontextlost",this.D,this),M(this.u,"webglcontextrestored",this.F,this)}function Wo(t,e,i){var n=t.a,r=i.a,a=String(o(i));if(a in t.c)n.bindBuffer(e,t.c[a].buffer);else{var s=n.createBuffer();n.bindBuffer(e,s);var h;34962==e?h=new Float32Array(r):34963==e&&(h=t.i?new Uint32Array(r):new Uint16Array(r)),n.bufferData(e,h,i.c),t.c[a]={Fa:i,buffer:s}}}function Go(t,e){var i=t.a,n=String(o(e)),r=t.c[n];i.isContextLost()||i.deleteBuffer(r.buffer),delete t.c[n]}function Xo(t){if(!t.g){var e=t.a,i=e.createFramebuffer();e.bindFramebuffer(e.FRAMEBUFFER,i);var n=qo(e,1,1),r=e.createRenderbuffer();e.bindRenderbuffer(e.RENDERBUFFER,r),e.renderbufferStorage(e.RENDERBUFFER,e.DEPTH_COMPONENT16,1,1),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,n,0),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.DEPTH_ATTACHMENT,e.RENDERBUFFER,r),e.bindTexture(e.TEXTURE_2D,null),e.bindRenderbuffer(e.RENDERBUFFER,null),e.bindFramebuffer(e.FRAMEBUFFER,null),t.g=i,t.l=n,t.j=r}return t.g}function Ho(t,e){var i=String(o(e));if(i in t.f)return t.f[i];var n=t.a,r=n.createShader(e.$());return n.shaderSource(r,e.a),n.compileShader(r),t.f[i]=r}function zo(t,e,i){var n=o(e)+"/"+o(i);if(n in t.b)return t.b[n];var r=t.a,a=r.createProgram();return r.attachShader(a,Ho(t,e)),r.attachShader(a,Ho(t,i)),r.linkProgram(a),t.b[n]=a}function Yo(t,e){return e!=t.o&&(t.a.useProgram(e),t.o=e,!0)}function Jo(t,e,i){var n=t.createTexture();return t.bindTexture(t.TEXTURE_2D,n),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR),void 0!==e&&t.texParameteri(3553,10242,e),void 0!==i&&t.texParameteri(3553,10243,i),n}function qo(t,e,i){var n=Jo(t,void 0,void 0);return t.texImage2D(t.TEXTURE_2D,0,t.RGBA,e,i,0,t.RGBA,t.UNSIGNED_BYTE,null),n}function Ko(t,e){Do.call(this,0,e),this.C=this.A=void 0,this.B=[],this.D=[],this.L=void 0,this.j=[],this.f=[],this.P=this.Y=void 0,this.G=null,this.xa=this.ca=this.ba=this.ka=this.ja=this.V=void 0,this.ta=[],this.F=[],this.ia=void 0}function Zo(t,e,i,n){var r,o,a,s,h,l,c=t.A,u=t.C,f=t.L,d=t.Y,p=t.P,v=t.V,g=t.ja,y=t.ka,m=t.ba?1:0,b=-t.ca,w=t.xa,x=t.ia,M=Math.cos(b),b=Math.sin(b),S=t.a.length,C=t.c.length;for(r=0;r<i;r+=n)h=e[r]-t.origin[0],l=e[r+1]-t.origin[1],o=C/8,a=-w*c,s=-w*(f-u),t.c[C++]=h,t.c[C++]=l,t.c[C++]=a*M-s*b,t.c[C++]=a*b+s*M,t.c[C++]=g/p,t.c[C++]=(y+f)/d,t.c[C++]=v,t.c[C++]=m,a=w*(x-c),s=-w*(f-u),t.c[C++]=h,t.c[C++]=l,t.c[C++]=a*M-s*b,t.c[C++]=a*b+s*M,t.c[C++]=(g+x)/p,t.c[C++]=(y+f)/d,t.c[C++]=v,t.c[C++]=m,a=w*(x-c),s=w*u,t.c[C++]=h,t.c[C++]=l,t.c[C++]=a*M-s*b,t.c[C++]=a*b+s*M,t.c[C++]=(g+x)/p,t.c[C++]=y/d,t.c[C++]=v,t.c[C++]=m,a=-w*c,s=w*u,t.c[C++]=h,t.c[C++]=l,t.c[C++]=a*M-s*b,t.c[C++]=a*b+s*M,t.c[C++]=g/p,t.c[C++]=y/d,t.c[C++]=v,t.c[C++]=m,t.a[S++]=o,t.a[S++]=o+1,t.a[S++]=o+2,t.a[S++]=o,t.a[S++]=o+2,t.a[S++]=o+3}function Qo(t,e,i,n){var r,a,s,h,l=e.length;for(h=0;h<l;++h){if(a=e[h],s=o(a).toString(),s in i)r=i[s];else{r=n;var c=Jo(r,33071,33071);r.texImage2D(r.TEXTURE_2D,0,r.RGBA,r.RGBA,r.UNSIGNED_BYTE,a),r=c,i[s]=r}t[h]=r}}function $o(t,e,i){var n=e-i;if(t[0]===t[n]&&t[1]===t[n+1]&&3<(e-0)/i){for(var r=n=0,o=t[e-i],a=t[e-i+1];n<e;n+=i)var s=t[n],h=t[n+1],r=r+(a*s-o*h),o=s,a=h;t=!!(r/2)}else t=!1;return t}function ta(){this.a="precision mediump float;varying float a;varying vec2 b;varying float c;uniform float m;uniform vec4 n;uniform vec2 o;uniform float p;void main(void){if(a>0.0){vec2 windowCoords=vec2((b.x+1.0)/2.0*o.x*p,(b.y+1.0)/2.0*o.y*p);if(length(windowCoords-gl_FragCoord.xy)>c*p){discard;}} gl_FragColor=n;float alpha=n.a*m;if(alpha==0.0){discard;}gl_FragColor.a=alpha;}"}function ea(){this.a="varying float a;varying vec2 b;varying float c;attribute vec2 d;attribute vec2 e;attribute vec2 f;attribute float g;uniform mat4 h;uniform mat4 i;uniform mat4 j;uniform float k;uniform float l;bool nearlyEquals(in float value,in float ref){float epsilon=0.000000000001;return value>=ref-epsilon&&value<=ref+epsilon;}void alongNormal(out vec2 offset,in vec2 nextP,in float turnDir,in float direction){vec2 dirVect=nextP-e;vec2 normal=normalize(vec2(-turnDir*dirVect.y,turnDir*dirVect.x));offset=k/2.0*normal*direction;}void miterUp(out vec2 offset,out float round,in bool isRound,in float direction){float halfWidth=k/2.0;vec2 tangent=normalize(normalize(f-e)+normalize(e-d));vec2 normal=vec2(-tangent.y,tangent.x);vec2 dirVect=f-e;vec2 tmpNormal=normalize(vec2(-dirVect.y,dirVect.x));float miterLength=abs(halfWidth/dot(normal,tmpNormal));offset=normal*direction*miterLength;round=0.0;if(isRound){round=1.0;}else if(miterLength>l+k){offset=halfWidth*tmpNormal*direction;}} bool miterDown(out vec2 offset,in vec4 projPos,in mat4 offsetMatrix,in float direction){bool degenerate=false;vec2 tangent=normalize(normalize(f-e)+normalize(e-d));vec2 normal=vec2(-tangent.y,tangent.x);vec2 dirVect=d-e;vec2 tmpNormal=normalize(vec2(-dirVect.y,dirVect.x));vec2 longOffset,shortOffset,longVertex;vec4 shortProjVertex;float halfWidth=k/2.0;if(length(f-e)>length(d-e)){longOffset=tmpNormal*direction*halfWidth;shortOffset=normalize(vec2(dirVect.y,-dirVect.x))*direction*halfWidth;longVertex=f;shortProjVertex=h*vec4(d,0.0,1.0);}else{shortOffset=tmpNormal*direction*halfWidth;longOffset=normalize(vec2(dirVect.y,-dirVect.x))*direction*halfWidth;longVertex=d;shortProjVertex=h*vec4(f,0.0,1.0);}vec4 p1=h*vec4(longVertex,0.0,1.0)+offsetMatrix*vec4(longOffset,0.0,0.0);vec4 p2=projPos+offsetMatrix*vec4(longOffset,0.0,0.0);vec4 p3=shortProjVertex+offsetMatrix*vec4(-shortOffset,0.0,0.0);vec4 p4=shortProjVertex+offsetMatrix*vec4(shortOffset,0.0,0.0);float denom=(p4.y-p3.y)*(p2.x-p1.x)-(p4.x-p3.x)*(p2.y-p1.y);float firstU=((p4.x-p3.x)*(p1.y-p3.y)-(p4.y-p3.y)*(p1.x-p3.x))/denom;float secondU=((p2.x-p1.x)*(p1.y-p3.y)-(p2.y-p1.y)*(p1.x-p3.x))/denom;float epsilon=0.000000000001;if(firstU>epsilon&&firstU<1.0-epsilon&&secondU>epsilon&&secondU<1.0-epsilon){shortProjVertex.x=p1.x+firstU*(p2.x-p1.x);shortProjVertex.y=p1.y+firstU*(p2.y-p1.y);offset=shortProjVertex.xy;degenerate=true;}else{float miterLength=abs(halfWidth/dot(normal,tmpNormal));offset=normal*direction*miterLength;}return degenerate;}void squareCap(out vec2 offset,out float round,in bool isRound,in vec2 nextP,in float turnDir,in float direction){round=0.0;vec2 dirVect=e-nextP;vec2 firstNormal=normalize(dirVect);vec2 secondNormal=vec2(turnDir*firstNormal.y*direction,-turnDir*firstNormal.x*direction);vec2 hypotenuse=normalize(firstNormal-secondNormal);vec2 normal=vec2(turnDir*hypotenuse.y*direction,-turnDir*hypotenuse.x*direction);float length=sqrt(c*c*2.0);offset=normal*length;if(isRound){round=1.0;}} void main(void){bool degenerate=false;float direction=float(sign(g));mat4 offsetMatrix=i*j;vec2 offset;vec4 projPos=h*vec4(e,0.0,1.0);bool round=nearlyEquals(mod(g,2.0),0.0);a=0.0;c=k/2.0;b=projPos.xy;if(nearlyEquals(mod(g,3.0),0.0)||nearlyEquals(mod(g,17.0),0.0)){alongNormal(offset,f,1.0,direction);}else if(nearlyEquals(mod(g,5.0),0.0)||nearlyEquals(mod(g,13.0),0.0)){alongNormal(offset,d,-1.0,direction);}else if(nearlyEquals(mod(g,23.0),0.0)){miterUp(offset,a,round,direction);}else if(nearlyEquals(mod(g,19.0),0.0)){degenerate=miterDown(offset,projPos,offsetMatrix,direction);}else if(nearlyEquals(mod(g,7.0),0.0)){squareCap(offset,a,round,f,1.0,direction);}else if(nearlyEquals(mod(g,11.0),0.0)){squareCap(offset,a,round,d,-1.0,direction);}if(!degenerate){vec4 offsets=offsetMatrix*vec4(offset,0.0,0.0);gl_Position=projPos+offsets;}else{gl_Position=vec4(offset,0.0,1.0);}}"}function ia(t,e){this.C=t.getUniformLocation(e,"n"),this.G=t.getUniformLocation(e,"k"),this.P=t.getUniformLocation(e,"l"),this.f=t.getUniformLocation(e,"j"),this.g=t.getUniformLocation(e,"i"),this.c=t.getUniformLocation(e,"m"),this.L=t.getUniformLocation(e,"p"),this.b=t.getUniformLocation(e,"h"),this.Y=t.getUniformLocation(e,"o"),this.i=t.getAttribLocation(e,"g"),this.j=t.getAttribLocation(e,"d"),this.l=t.getAttribLocation(e,"f"),this.a=t.getAttribLocation(e,"e")}function na(t,e){Do.call(this,0,e),this.D=null,this.F=[],this.j=[],this.f={strokeColor:null,lineCap:void 0,lineDash:null,lineJoin:void 0,lineWidth:void 0,miterLimit:void 0,v:!1}}function ra(t,e,i,n){var r,o,a,s,h,l,c,u=t.c.length,f=t.a.length,d="bevel"===t.f.lineJoin?0:"miter"===t.f.lineJoin?1:2,p="butt"===t.f.lineCap?0:"square"===t.f.lineCap?1:2,v=$o(e,i,n),g=f,y=1;for(r=0;r<i;r+=n){if(s=u/7,h=l,l=c||[e[r],e[r+1]],0===r){if(c=[e[r+n],e[r+n+1]],i-0===2*n&&U(l,c))break;if(!v){p&&(u=oa(t,[0,0],l,c,7*y*p,u),u=oa(t,[0,0],l,c,7*-y*p,u),t.a[f++]=s+2,t.a[f++]=s,t.a[f++]=s+1,t.a[f++]=s+1,t.a[f++]=s+3,t.a[f++]=s+2),u=oa(t,[0,0],l,c,3*y*(p||1),u),u=oa(t,[0,0],l,c,3*-y*(p||1),u),g=u/7-1;continue}h=[e[i-2*n],e[i-2*n+1]],o=c}else{if(r===i-n){v?c=o:(h=h||[0,0],u=oa(t,h,l,[0,0],5*y*(p||1),u),u=oa(t,h,l,[0,0],5*-y*(p||1),u),t.a[f++]=s,t.a[f++]=g-1,t.a[f++]=g,t.a[f++]=g,t.a[f++]=s+1,t.a[f++]=s,p&&(u=oa(t,h,l,[0,0],11*y*p,u),u=oa(t,h,l,[0,0],11*-y*p,u),t.a[f++]=s+2,t.a[f++]=s,t.a[f++]=s+1,t.a[f++]=s+1,t.a[f++]=s+3,t.a[f++]=s+2));break}c=[e[r+n],e[r+n+1]]}a=Co(h[0],h[1],l[0],l[1],c[0],c[1])?-1:1,u=oa(t,h,l,c,13*a*(d||1),u),u=oa(t,h,l,c,17*a*(d||1),u),u=oa(t,h,l,c,19*-a*(d||1),u),0<r&&(t.a[f++]=s,t.a[f++]=g-1,t.a[f++]=g,t.a[f++]=s+2,t.a[f++]=s,t.a[f++]=0<y*a?g:g-1),t.a[f++]=s,t.a[f++]=s+2,t.a[f++]=s+1,g=s+2,y=a,d&&(u=oa(t,h,l,c,23*a*d,u),t.a[f++]=s+1,t.a[f++]=s+3,t.a[f++]=s)}v&&(s=s||u/7,a=he([h[0],h[1],l[0],l[1],c[0],c[1]],0,6,2)?1:-1,u=oa(t,h,l,c,13*a*(d||1),u),oa(t,h,l,c,19*-a*(d||1),u),t.a[f++]=s,t.a[f++]=g-1,t.a[f++]=g,t.a[f++]=s+1,t.a[f++]=s,t.a[f++]=0<y*a?g:g-1)}function oa(t,e,i,n,r,o){return t.c[o++]=e[0],t.c[o++]=e[1],t.c[o++]=i[0],t.c[o++]=i[1],t.c[o++]=n[0],t.c[o++]=n[1],t.c[o++]=r,o}function aa(t,e,i){return e-=0,!(e<2*i)&&(e!==2*i||!U([t[0],t[1]],[t[0+i],t[i+1]]))}function sa(t,e,i,n){if($o(e,e.length,n)||(e.push(e[0]),e.push(e[1])),ra(t,e,e.length,n),i.length){var r;for(e=0,r=i.length;e<r;++e)$o(i[e],i[e].length,n)||(i[e].push(i[e][0]),i[e].push(i[e][1])),ra(t,i[e],i[e].length,n)}}function ha(t,e,i){i=void 0===i?t.a.length:i,t.b.push(i),t.i.push(e),t.f.v&&(t.j.push(i),t.f.v=!1)}function la(t,e,i,n,r){e.uniform4fv(t.D.C,i),e.uniform1f(t.D.G,n),e.uniform1f(t.D.P,r)}function ca(){this.a="precision mediump float;uniform vec4 e;uniform float f;void main(void){gl_FragColor=e;float alpha=e.a*f;if(alpha==0.0){discard;}gl_FragColor.a=alpha;}"}function ua(){this.a="attribute vec2 a;uniform mat4 b;uniform mat4 c;uniform mat4 d;void main(void){gl_Position=b*vec4(a,0.0,1.0);}"}function fa(t,e){this.C=t.getUniformLocation(e,"e"),this.f=t.getUniformLocation(e,"d"),this.g=t.getUniformLocation(e,"c"),this.c=t.getUniformLocation(e,"f"),this.b=t.getUniformLocation(e,"b"),this.a=t.getAttribLocation(e,"a")}function da(t){this.a=this.c=this.b=void 0,this.g=void 0===t||t,
this.f=0}function pa(t){var e=t.a;if(e){var i=e.next,n=e.pa;i&&(i.pa=n),n&&(n.next=i),t.a=i||n,t.b===t.c?(t.a=void 0,t.b=void 0,t.c=void 0):t.b===e?t.b=t.a:t.c===e&&(t.c=n?t.a.pa:t.a),t.f--}}function va(t){if(t.a=t.b,t.a)return t.a.data}function ga(t){if(t.a&&t.a.next)return t.a=t.a.next,t.a.data}function ya(t){if(t.a&&t.a.next)return t.a.next.data}function ma(t){if(t.a&&t.a.pa)return t.a=t.a.pa,t.a.data}function ba(t){if(t.a&&t.a.pa)return t.a.pa.data}function wa(t){if(t.a)return t.a.data}function xa(t){this.a=Qu(t),this.c={}}function Ma(t,e,i){var n=t.c[o(i)];ct([n.K,n.N,n.J,n.R],e)||(t.remove(i),t.Ha(e,i))}function Sa(t){return t.a.all().map(function(t){return t.value})}function Ca(t,e){return t.a.search({K:e[0],N:e[1],J:e[2],R:e[3]}).map(function(t){return t.value})}function Aa(t,e,i,n){return Ia(Ca(t,e),i,n)}function Ia(t,e,i){for(var n,r=0,o=t.length;r<o&&!(n=e.call(i,t[r]));r++);return n}function La(t,e){Do.call(this,0,e),this.o=new na(0,e),this.D=null,this.F=[],this.f=[],this.j={fillColor:null,v:!1}}function ka(t,e,i,n){var r=new da,o=new xa;if(e=Pa(t,e,n,r,o,!0),i.length){var a,s,h=[];for(a=0,s=i.length;a<s;++a){var l={list:new da,J:void 0};h.push(l),l.J=Pa(t,i[a],n,l.list,o,!1)}for(h.sort(function(t,e){return e.J-t.J}),a=0;a<h.length;++a)Ea(h[a].list,h[a].J,r,e,o)}Ta(r,o,!1),Fa(t,r,o)}function Pa(t,e,i,n,r,o){var a,s,h,l,c,u=t.c.length/2,f=[],d=[];if(o===he(e,0,e.length,i))for(l=h=_a(t,e[0],e[1],u++),o=e[0],a=i,s=e.length;a<s;a+=i)c=_a(t,e[a],e[a+1],u++),d.push(Ba(l,c,n)),f.push([Math.min(l.x,c.x),Math.min(l.y,c.y),Math.max(l.x,c.x),Math.max(l.y,c.y)]),o=e[a]>o?e[a]:o,l=c;else for(a=e.length-i,l=h=_a(t,e[a],e[a+1],u++),o=e[a],a-=i,s=0;a>=s;a-=i)c=_a(t,e[a],e[a+1],u++),d.push(Ba(l,c,n)),f.push([Math.min(l.x,c.x),Math.min(l.y,c.y),Math.max(l.x,c.x),Math.max(l.y,c.y)]),o=e[a]>o?e[a]:o,l=c;return d.push(Ba(c,h,n)),f.push([Math.min(l.x,c.x),Math.min(l.y,c.y),Math.max(l.x,c.x),Math.max(l.y,c.y)]),r.load(f,d),o}function Ta(t,e,i){var n=va(t),r=n,o=ga(t),a=!1;do{var s=i?Co(o.H.x,o.H.y,r.H.x,r.H.y,r.I.x,r.I.y):Co(r.I.x,r.I.y,r.H.x,r.H.y,o.H.x,o.H.y);void 0===s?(Na(r,o,t,e),a=!0,o===n&&(n=ya(t)),o=r,ma(t)):r.H.qa!==s&&(r.H.qa=s,a=!0),r=o,o=ga(t)}while(r!==n);return a}function Ea(t,e,i,n,r){Ta(t,r,!0);for(var o=va(t);o.H.x!==e;)o=ga(t);e=o.H,n={x:n,y:e.y,la:-1};var a,s,h,l,c=1/0;for(h=Oa({I:e,H:n},r,!0),a=0,s=h.length;a<s;++a){var u=h[a];if(void 0===u.I.qa){var f=Ua(e,n,u.I,u.H,!0),d=Math.abs(e.x-f[0]);d<c&&(c=d,l={x:f[0],y:f[1],la:-1},o=u)}}if(1/0!==c){if(h=o.H,0<c&&(o=Va(e,l,o.H,r),o.length))for(l=1/0,a=0,s=o.length;a<s;++a)c=o[a],u=Math.atan2(e.y-c.y,n.x-c.x),(u<l||u===l&&c.x<h.x)&&(l=u,h=c);for(o=va(i);o.H!==h;)o=ga(i);n={x:e.x,y:e.y,la:e.la,qa:void 0},a={x:o.H.x,y:o.H.y,la:o.H.la,qa:void 0},ya(t).I=n,Ba(e,o.H,t,r),Ba(a,n,t,r),o.H=a,t.g&&t.a&&(t.b=t.a,t.c=t.a.pa),i.concat(t)}}function Fa(t,e,i){for(var n=!1,r=Ra(e,i);3<e.f;)if(r){if(!Da(t,e,i,r,n)&&!Ta(e,i,n)&&!ja(t,e,i,!0))break}else if(!Da(t,e,i,r,n)&&!Ta(e,i,n)&&!ja(t,e,i)){if(!(r=Ra(e,i))){r=t,n=e,o=a=va(n);do{if(s=Oa(o,i),s.length){for(a=s[0],s=Ua(o.I,o.H,a.I,a.H),s=_a(r,s[0],s[1],r.c.length/2),h=new da,l=new xa,Ba(s,o.H,h,l),o.H=s,Ma(i,[Math.min(o.I.x,s.x),Math.min(o.I.y,s.y),Math.max(o.I.x,s.x),Math.max(o.I.y,s.y)],o),o=ga(n);o!==a;)Ba(o.I,o.H,h,l),i.remove(o),pa(n),o=wa(n);Ba(a.I,s,h,l),a.I=s,Ma(i,[Math.min(a.H.x,s.x),Math.min(a.H.y,s.y),Math.max(a.H.x,s.x),Math.max(a.H.y,s.y)],a),Ta(n,i,!1),Fa(r,n,i),Ta(h,l,!1),Fa(r,h,l);break}o=ga(n)}while(o!==a);break}var n=e,o=2*n.f,a=Array(o),s=va(n),h=s,l=0;do a[l++]=h.I.x,a[l++]=h.I.y,h=ga(n);while(h!==s);n=!he(a,0,o,2),Ta(e,i,n)}3===e.f&&(r=t.a.length,t.a[r++]=ba(e).I.la,t.a[r++]=wa(e).I.la,t.a[r++]=ya(e).I.la)}function Da(t,e,i,n,r){var o,a,s,h=t.a.length,l=va(e),c=ba(e),u=l,f=ga(e),d=ya(e),p=!1;do{if(o=u.I,a=u.H,s=f.H,!1===a.qa){var v=r?Wa(d.H,s,a,o,c.I):Wa(c.I,o,a,s,d.H);!n&&0!==Oa({I:o,H:s},i).length||!v||0!==Va(o,a,s,i,!0).length||!n&&!1!==o.qa&&!1!==s.qa&&he([c.I.x,c.I.y,o.x,o.y,a.x,a.y,s.x,s.y,d.H.x,d.H.y],0,10,2)!==!r||(t.a[h++]=o.la,t.a[h++]=a.la,t.a[h++]=s.la,Na(u,f,e,i),f===l&&(l=d),p=!0)}c=ba(e),u=wa(e),f=ga(e),d=ya(e)}while(u!==l&&3<e.f);return p}function ja(t,e,i,n){var r=va(e);ga(e);var o=r,a=ga(e),s=!1;do{var h=Ua(o.I,o.H,a.I,a.H,n);if(h){var l,s=t.a.length,c=t.c.length/2,u=ma(e);if(pa(e),i.remove(u),l=u===r,n?(h[0]===o.I.x&&h[1]===o.I.y?(ma(e),h=o.I,a.I=h,i.remove(o),l=l||o===r):(h=a.H,o.H=h,i.remove(a),l=l||a===r),pa(e)):(h=_a(t,h[0],h[1],c),o.H=h,a.I=h,Ma(i,[Math.min(o.I.x,o.H.x),Math.min(o.I.y,o.H.y),Math.max(o.I.x,o.H.x),Math.max(o.I.y,o.H.y)],o),Ma(i,[Math.min(a.I.x,a.H.x),Math.min(a.I.y,a.H.y),Math.max(a.I.x,a.H.x),Math.max(a.I.y,a.H.y)],a)),t.a[s++]=u.I.la,t.a[s++]=u.H.la,t.a[s++]=h.la,s=!0,l)break}o=ba(e),a=ga(e)}while(o!==r);return s}function Ra(t,e){var i=va(t),n=i;do{if(Oa(n,e).length)return!1;n=ga(t)}while(n!==i);return!0}function _a(t,e,i,n){var r=t.c.length;return t.c[r++]=e,t.c[r++]=i,{x:e,y:i,la:n,qa:void 0}}function Ba(t,e,i,n){var r={I:t,H:e},o={pa:void 0,next:void 0,data:r},a=i.a;if(a){var s=a.next;o.pa=a,o.next=s,a.next=o,s&&(s.pa=o),a===i.c&&(i.c=o)}else i.b=o,i.c=o,i.g&&(o.next=o,o.pa=o);return i.a=o,i.f++,n&&n.Ha([Math.min(t.x,e.x),Math.min(t.y,e.y),Math.max(t.x,e.x),Math.max(t.y,e.y)],r),r}function Na(t,e,i,n){wa(i)===e&&(pa(i),t.H=e.H,n.remove(e),Ma(n,[Math.min(t.I.x,t.H.x),Math.min(t.I.y,t.H.y),Math.max(t.I.x,t.H.x),Math.max(t.I.y,t.H.y)],t))}function Va(t,e,i,n,r){var o,a,s,h=[],l=Ca(n,[Math.min(t.x,e.x,i.x),Math.min(t.y,e.y,i.y),Math.max(t.x,e.x,i.x),Math.max(t.y,e.y,i.y)]);for(n=0,o=l.length;n<o;++n)for(a in l[n])s=l[n][a],"object"!=typeof s||r&&!s.qa||s.x===t.x&&s.y===t.y||s.x===e.x&&s.y===e.y||s.x===i.x&&s.y===i.y||-1!==h.indexOf(s)||!ae([t.x,t.y,e.x,e.y,i.x,i.y],0,6,2,s.x,s.y)||h.push(s);return h}function Oa(t,e,i){var n=t.I,r=t.H;e=Ca(e,[Math.min(n.x,r.x),Math.min(n.y,r.y),Math.max(n.x,r.x),Math.max(n.y,r.y)]);var o,a,s=[];for(o=0,a=e.length;o<a;++o){var h=e[o];t!==h&&(i||h.I!==r||h.H!==n)&&Ua(n,r,h.I,h.H,i)&&s.push(h)}return s}function Ua(t,e,i,n,r){var o=(n.y-i.y)*(e.x-t.x)-(n.x-i.x)*(e.y-t.y);if(0!==o&&(n=((n.x-i.x)*(t.y-i.y)-(n.y-i.y)*(t.x-i.x))/o,i=((e.x-t.x)*(t.y-i.y)-(e.y-t.y)*(t.x-i.x))/o,!r&&n>Wu&&n<1-Wu&&i>Wu&&i<1-Wu||r&&0<=n&&1>=n&&0<=i&&1>=i))return[t.x+n*(e.x-t.x),t.y+n*(e.y-t.y)]}function Wa(t,e,i,n,r){if(void 0===e.qa||void 0===n.qa)return!1;var o=(i.x-n.x)*(e.y-n.y)>(i.y-n.y)*(e.x-n.x);return r=(r.x-n.x)*(e.y-n.y)<(r.y-n.y)*(e.x-n.x),t=(t.x-e.x)*(n.y-e.y)>(t.y-e.y)*(n.x-e.x),i=(i.x-e.x)*(n.y-e.y)<(i.y-e.y)*(n.x-e.x),e=e.qa?i||t:i&&t,(n.qa?r||o:r&&o)&&e}function Ga(){}function Xa(t,e,i){this.i=e,this.o=t,this.f=i,this.c={}}function Ha(t,e){var i,n=[];for(i in t.c){var r,o=t.c[i];for(r in o)n.push(o[r].wa(e))}return function(){for(var t,e=n.length,i=0;i<e;i++)t=n[i].apply(this,arguments);return t}}function za(t,e){for(var i in t.c){var n,r=t.c[i];for(n in r)r[n].va(e)}}function Ya(t,e,i,n,r,o,a,s,h,l){var c=$u,u=Object.keys(t.c).map(Number);u.sort(function(t,e){return e-t});var f,d,p,v,g;for(f=0,d=u.length;f<d;++f)for(v=t.c[u[f].toString()],p=Ru.length-1;0<=p;--p)if(g=v[Ru[p]],void 0!==g&&(g=g.g(e,i,n,r,c,o,a,s,h,!0,l)))return g}function Ja(t,e,i,n,r,o,a){this.a=t,this.c=e,this.b=o,this.f=a,this.o=r,this.i=n,this.g=i,this.j=this.l=this.u=null}function qa(){this.a="precision mediump float;varying vec2 a;uniform float f;uniform sampler2D g;void main(void){vec4 texColor=texture2D(g,a);gl_FragColor.rgb=texColor.rgb;gl_FragColor.a=texColor.a*f;}"}function Ka(){this.a="varying vec2 a;attribute vec2 b;attribute vec2 c;uniform mat4 d;uniform mat4 e;void main(void){gl_Position=e*vec4(b,0.,1.);a=(d*vec4(c,0.,1.)).st;}"}function Za(t,e){this.b=t.getUniformLocation(e,"f"),this.f=t.getUniformLocation(e,"e"),this.i=t.getUniformLocation(e,"d"),this.g=t.getUniformLocation(e,"g"),this.a=t.getAttribLocation(e,"b"),this.c=t.getAttribLocation(e,"c")}function Qa(t,e){_r.call(this,e),this.f=t,this.ba=new Ro([-1,-1,0,0,1,-1,1,0,-1,1,0,1,1,1,1,1]),this.i=this.Ia=null,this.o=void 0,this.V=er(),this.ca=er(),this.C=Eo(),this.u=null}function $a(t,e,i){var n=t.f.f;if(void 0===t.o||t.o!=i){e.postRenderFunctions.push(function(t,e,i){t.isContextLost()||(t.deleteFramebuffer(e),t.deleteTexture(i))}.bind(null,n,t.i,t.Ia)),e=qo(n,i,i);var r=n.createFramebuffer();n.bindFramebuffer(36160,r),n.framebufferTexture2D(36160,36064,3553,e,0),t.Ia=e,t.i=r,t.o=i}else n.bindFramebuffer(36160,t.i)}function ts(t,e,i,n){if(t=t.a,F(t,e)){var r=n.viewState;E(t,new Zn(e,new Ja(i,r.center,r.resolution,r.rotation,n.size,n.extent,n.pixelRatio),n,null,i))}}function es(t,e,i,n){t=i-t,e=n-e;var r=Math.sqrt(t*t+e*e);return[Math.round(i+t/r),Math.round(n+e/r)]}function is(t,e,i,n,r,o,a,s,h,l,c){var u=ti(Math.round(i*t),Math.round(i*e));if(0===h.length)return u.canvas;u.scale(i,i);var f=at();h.forEach(function(t){ut(f,t.extent)});var d=ti(Math.round(i*bt(f)/n),Math.round(i*yt(f)/n)),p=i/n;h.forEach(function(t){d.drawImage(t.image,l,l,t.image.width-2*l,t.image.height-2*l,(t.extent[0]-f[0])*p,-(t.extent[3]-f[3])*p,bt(t.extent)*p,yt(t.extent)*p)});var v=[a[0],a[3]];return s.f.forEach(function(t){var e=t.source,r=t.target,a=e[1][0],s=e[1][1],h=e[2][0],l=e[2][1];t=(r[0][0]-v[0])/o;var c=-(r[0][1]-v[1])/o,p=(r[1][0]-v[0])/o,g=-(r[1][1]-v[1])/o,y=(r[2][0]-v[0])/o,m=-(r[2][1]-v[1])/o,r=e[0][0],e=e[0][1],a=a-r,s=s-e,h=h-r,l=l-e;t:{for(a=[[a,s,0,0,p-t],[h,l,0,0,y-t],[0,0,a,s,g-c],[0,0,h,l,m-c]],s=a.length,h=0;h<s;h++){for(var l=h,b=Math.abs(a[h][h]),w=h+1;w<s;w++){var x=Math.abs(a[w][h]);x>b&&(b=x,l=w)}if(0===b){a=null;break t}for(b=a[l],a[l]=a[h],a[h]=b,l=h+1;l<s;l++)for(b=-a[l][h]/a[h][h],w=h;w<s+1;w++)a[l][w]=h==w?0:a[l][w]+b*a[h][w]}for(h=Array(s),l=s-1;0<=l;l--)for(h[l]=a[l][s]/a[l][l],b=l-1;0<=b;b--)a[b][s]-=a[b][l]*h[l];a=h}a&&(u.save(),u.beginPath(),rf?(h=(t+p+y)/3,l=(c+g+m)/3,s=es(h,l,t,c),p=es(h,l,p,g),y=es(h,l,y,m),u.moveTo(p[0],p[1]),u.lineTo(s[0],s[1]),u.lineTo(y[0],y[1])):(u.moveTo(p,g),u.lineTo(t,c),u.lineTo(y,m)),u.clip(),u.transform(a[0],a[2],a[1],a[3],t,c),u.translate(f[0]-r,f[3]-e),u.scale(n/i,-n/i),u.drawImage(d.canvas,0,0),u.restore())}),c&&(u.save(),u.strokeStyle="black",u.lineWidth=1,s.f.forEach(function(t){var e=t.target;t=(e[0][0]-v[0])/o;var i=-(e[0][1]-v[1])/o,n=(e[1][0]-v[0])/o,r=-(e[1][1]-v[1])/o,a=(e[2][0]-v[0])/o,e=-(e[2][1]-v[1])/o;u.beginPath(),u.moveTo(n,r),u.lineTo(t,i),u.lineTo(a,e),u.closePath(),u.stroke()}),u.restore()),u.canvas}function ns(t,e,i,n,r){this.b=t,this.g=e;var o={},a=Nt(this.g,this.b);this.c=function(t){var e=t[0]+"/"+t[1];return o[e]||(o[e]=a(t)),o[e]},this.i=n,this.u=r*r,this.f=[],this.j=!1,this.l=this.b.c&&!!n&&!!this.b.M()&&bt(n)==bt(this.b.M()),this.a=this.b.M()?bt(this.b.M()):null,this.o=this.g.M()?bt(this.g.M()):null,t=[i[0],i[3]],e=[i[2],i[3]],n=[i[2],i[1]],i=[i[0],i[1]],r=this.c(t);var s=this.c(e),h=this.c(n),l=this.c(i);if(rs(this,t,e,n,i,r,s,h,l,10),this.j){var c=1/0;this.f.forEach(function(t){c=Math.min(c,t.source[0][0],t.source[1][0],t.source[2][0])}),this.f.forEach(function(t){if(Math.max(t.source[0][0],t.source[1][0],t.source[2][0])-c>this.a/2){var e=[[t.source[0][0],t.source[0][1]],[t.source[1][0],t.source[1][1]],[t.source[2][0],t.source[2][1]]];e[0][0]-c>this.a/2&&(e[0][0]-=this.a),e[1][0]-c>this.a/2&&(e[1][0]-=this.a),e[2][0]-c>this.a/2&&(e[2][0]-=this.a),Math.max(e[0][0],e[1][0],e[2][0])-Math.min(e[0][0],e[1][0],e[2][0])<this.a/2&&(t.source=e)}},this)}o={}}function rs(t,e,i,n,r,o,a,s,h,l){var u=et([o,a,s,h]),f=t.a?bt(u)/t.a:null,d=t.a,p=t.b.c&&.5<f&&1>f,v=!1;if(0<l){if(t.g.f&&t.o)var g=et([e,i,n,r]),v=v|.25<bt(g)/t.o;!p&&t.b.f&&f&&(v|=.25<f)}if(v||!t.i||wt(u,t.i)){if(!(v||isFinite(o[0])&&isFinite(o[1])&&isFinite(a[0])&&isFinite(a[1])&&isFinite(s[0])&&isFinite(s[1])&&isFinite(h[0])&&isFinite(h[1]))){if(!(0<l))return;v=!0}if(0<l&&(v||(u=t.c([(e[0]+n[0])/2,(e[1]+n[1])/2]),d=p?(c(o[0],d)+c(s[0],d))/2-c(u[0],d):(o[0]+s[0])/2-u[0],u=(o[1]+s[1])/2-u[1],v=d*d+u*u>t.u),v))return void(Math.abs(e[0]-n[0])<=Math.abs(e[1]-n[1])?(p=[(i[0]+n[0])/2,(i[1]+n[1])/2],d=t.c(p),u=[(r[0]+e[0])/2,(r[1]+e[1])/2],f=t.c(u),rs(t,e,i,p,u,o,a,d,f,l-1),rs(t,u,p,n,r,f,d,s,h,l-1)):(p=[(e[0]+i[0])/2,(e[1]+i[1])/2],d=t.c(p),u=[(n[0]+r[0])/2,(n[1]+r[1])/2],f=t.c(u),rs(t,e,p,u,r,o,d,f,h,l-1),rs(t,p,i,n,u,d,a,s,f,l-1)));if(p){if(!t.l)return;t.j=!0}t.f.push({source:[o,s,h],target:[e,n,r]}),t.f.push({source:[o,a,s],target:[e,i,n]})}}function os(t){var e=at();return t.f.forEach(function(t){t=t.source,ft(e,t[0]),ft(e,t[1]),ft(e,t[2])}),e}function as(t){j.call(this),this.g=_t(t.projection),this.B=ss(t.attributions),this.P=t.logo,this.V=void 0!==t.state?t.state:"ready",this.u=void 0!==t.wrapX&&t.wrapX}function ss(t){if("string"==typeof t)return[new He({html:t})];if(t instanceof He)return[t];if(Array.isArray(t)){for(var e=t.length,i=Array(e),n=0;n<e;n++){var r=t[n];i[n]="string"==typeof r?new He({html:r}):r}return i}return null}function hs(){this.a="precision mediump float;varying vec2 a;uniform sampler2D e;void main(void){gl_FragColor=texture2D(e,a);}"}function ls(){this.a="varying vec2 a;attribute vec2 b;attribute vec2 c;uniform vec4 d;void main(void){gl_Position=vec4(b*d.xy+d.zw,0.,1.);a=c;}"}function cs(t,e){this.b=t.getUniformLocation(e,"e"),this.f=t.getUniformLocation(e,"d"),this.a=t.getAttribLocation(e,"b"),this.c=t.getAttribLocation(e,"c")}function us(t,e){Qa.call(this,t,e),this.L=sf,this.ia=hf,this.b=null,this.G=new Ro([0,0,0,1,1,0,1,1,0,1,0,0,1,1,1,0]),this.A=this.g=null,this.l=-1,this.P=[0,0]}function fs(t,e){Qa.call(this,t,e),this.g=!1,this.P=-1,this.L=NaN,this.A=at(),this.l=this.b=this.G=null}function ds(){this.f=0,this.b={},this.c=this.a=null}function ps(t,e){return t.b.hasOwnProperty(e)}function vs(t,e){lr.call(this,0,e),this.a=document.createElement("CANVAS"),this.a.style.width="100%",this.a.style.height="100%",this.a.className="ol-unselectable",t.insertBefore(this.a,t.childNodes[0]||null),this.F=this.B=0,this.A=ti(),this.l=!0,this.f=fi(this.a,{antialias:!0,depth:!0,failIfMajorPerformanceCaveat:!0,preserveDrawingBuffer:!1,stencil:!0}),this.g=new Uo(this.a,this.f),M(this.a,"webglcontextlost",this.Ke,this),M(this.a,"webglcontextrestored",this.Le,this),this.c=new ds,this.D=null,this.o=new Wi(function(t){var e=t[1];t=t[2];var i=e[0]-this.D[0],e=e[1]-this.D[1];return 65536*Math.log(t)+Math.sqrt(i*i+e*e)/t}.bind(this),function(t){return t[0].getKey()}),this.C=function(){if(0!==this.o.a.length){zi(this.o);var t=Gi(this.o);gs(this,t[0],t[3],t[4])}return!1}.bind(this),this.i=0,ms(this)}function gs(t,e,i,n){var r=t.f,o=e.getKey();if(ps(t.c,o))t=t.c.get(o),r.bindTexture(3553,t.Ia),9729!=t.Zc&&(r.texParameteri(3553,10240,9729),t.Zc=9729),9729!=t.$c&&(r.texParameteri(3553,10241,9729),t.$c=9729);else{var a=r.createTexture();if(r.bindTexture(3553,a),0<n){var s=t.A.canvas,h=t.A;t.B!==i[0]||t.F!==i[1]?(s.width=i[0],s.height=i[1],t.B=i[0],t.F=i[1]):h.clearRect(0,0,i[0],i[1]),h.drawImage(e.Za(),n,n,i[0],i[1],0,0,i[0],i[1]),r.texImage2D(3553,0,6408,6408,5121,s)}else r.texImage2D(3553,0,6408,6408,5121,e.Za());r.texParameteri(3553,10240,9729),r.texParameteri(3553,10241,9729),r.texParameteri(3553,10242,33071),r.texParameteri(3553,10243,33071),t.c.set(o,{Ia:a,Zc:9729,$c:9729})}}function ys(t,e,i){var n=t.j;if(F(n,e)){t=t.g;var r=i.viewState;E(n,new Zn(e,new Ja(t,r.center,r.resolution,r.rotation,i.size,i.extent,i.pixelRatio),i,null,t))}}function ms(t){t=t.f,t.activeTexture(33984),t.blendFuncSeparate(770,771,1,771),t.disable(2884),t.disable(2929),t.disable(3089),t.disable(2960)}function bs(t){j.call(this);var e=Ms(t);this.Oa=void 0!==t.loadTilesWhileAnimating&&t.loadTilesWhileAnimating,this.Ub=void 0!==t.loadTilesWhileInteracting&&t.loadTilesWhileInteracting,this.Tb=void 0!==t.pixelRatio?t.pixelRatio:Jc,this.Vb=e.logos,this.Aa=function(){this.i=void 0,this.cf.call(this,Date.now())}.bind(this),this.Ba=er(),this.Zb=er(),this.Ja=0,this.b=null,this.za=at(),this.B=this.C=this.G=null,this.a=document.createElement("DIV"),this.a.className="ol-viewport"+(Zc?" ol-touch":""),this.a.style.position="relative",this.a.style.overflow="hidden",this.a.style.width="100%",this.a.style.height="100%",this.a.style.msTouchAction="none",this.a.style.touchAction="none",this.u=document.createElement("DIV"),this.u.className="ol-overlaycontainer",this.a.appendChild(this.u),this.l=document.createElement("DIV"),this.l.className="ol-overlaycontainer-stopevent",t="click dblclick mousedown touchstart mspointerdown pointerdown mousewheel wheel".split(" ");for(var i=0,n=t.length;i<n;++i)M(this.l,t[i],P);this.a.appendChild(this.l),this.ca=new Bi(this);for(var r in Oc)M(this.ca,Oc[r],this.Vc,this);this.ba=e.keyboardEventTarget,this.j=null,M(this.a,"wheel",this.Va,this),M(this.a,"mousewheel",this.Va,this),this.L=e.controls,this.g=e.interactions,this.A=e.overlays,this.kd={},this.V=new e.df(this.a,this),this.P=null,this.ta=[],this.sa=[],this.ia=new Yi(this.Rd.bind(this),this.je.bind(this)),this.ac={},M(this,R(cf),this.Wd,this),M(this,R(df),this.ke,this),M(this,R(uf),this.ge,this),M(this,R(ff),this.ie,this),_(this,e.values),this.L.forEach(function(t){t.setMap(this)},this),M(this.L,Rc,function(t){t.element.setMap(this)},this),M(this.L,_c,function(t){t.element.setMap(null)},this),this.g.forEach(function(t){t.setMap(this)},this),M(this.g,Rc,function(t){t.element.setMap(this)},this),M(this.g,_c,function(t){t.element.setMap(null)},this),this.A.forEach(this.Jc,this),M(this.A,Rc,function(t){this.Jc(t.element)},this),M(this.A,_c,function(t){var e=t.element.bd;void 0!==e&&delete this.kd[e.toString()],t.element.setMap(null)},this)}function ws(t){return t=t.get(ff),void 0!==t?"string"==typeof t?document.getElementById(t):t:null}function xs(t,e){var i=t.b;return i?ar(i.coordinateToPixelTransform,e.slice(0,2)):null}function Ms(t){var e=null;void 0!==t.keyboardEventTarget&&(e="string"==typeof t.keyboardEventTarget?document.getElementById(t.keyboardEventTarget):t.keyboardEventTarget);var i={},n={};if(void 0===t.logo||"boolean"==typeof t.logo&&t.logo)n["data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAAA3NCSVQICAjb4U/gAAAACXBIWXMAAAHGAAABxgEXwfpGAAAAGXRFWHRTb2Z0d2FyZQB3d3cuaW5rc2NhcGUub3Jnm+48GgAAAhNQTFRF////AP//AICAgP//AFVVQECA////K1VVSbbbYL/fJ05idsTYJFtbbcjbJllmZszWWMTOIFhoHlNiZszTa9DdUcHNHlNlV8XRIVdiasrUHlZjIVZjaMnVH1RlIFRkH1RkH1ZlasvYasvXVsPQH1VkacnVa8vWIVZjIFRjVMPQa8rXIVVkXsXRsNveIFVkIFZlIVVj3eDeh6GmbMvXH1ZkIFRka8rWbMvXIFVkIFVjIFVkbMvWH1VjbMvWIFVlbcvWIFVla8vVIFVkbMvWbMvVH1VkbMvWIFVlbcvWIFVkbcvVbMvWjNPbIFVkU8LPwMzNIFVkbczWIFVkbsvWbMvXIFVkRnB8bcvW2+TkW8XRIFVkIlZlJVloJlpoKlxrLl9tMmJwOWd0Omh1RXF8TneCT3iDUHiDU8LPVMLPVcLPVcPQVsPPVsPQV8PQWMTQWsTQW8TQXMXSXsXRX4SNX8bSYMfTYcfTYsfTY8jUZcfSZsnUaIqTacrVasrVa8jTa8rWbI2VbMvWbcvWdJObdcvUdszUd8vVeJaee87Yfc3WgJyjhqGnitDYjaarldPZnrK2oNbborW5o9bbo9fbpLa6q9ndrL3ArtndscDDutzfu8fJwN7gwt7gxc/QyuHhy+HizeHi0NfX0+Pj19zb1+Tj2uXk29/e3uLg3+Lh3+bl4uXj4ufl4+fl5Ofl5ufl5ujm5+jmySDnBAAAAFp0Uk5TAAECAgMEBAYHCA0NDg4UGRogIiMmKSssLzU7PkJJT1JTVFliY2hrdHZ3foSFhYeJjY2QkpugqbG1tre5w8zQ09XY3uXn6+zx8vT09vf4+Pj5+fr6/P39/f3+gz7SsAAAAVVJREFUOMtjYKA7EBDnwCPLrObS1BRiLoJLnte6CQy8FLHLCzs2QUG4FjZ5GbcmBDDjxJBXDWxCBrb8aM4zbkIDzpLYnAcE9VXlJSWlZRU13koIeW57mGx5XjoMZEUqwxWYQaQbSzLSkYGfKFSe0QMsX5WbjgY0YS4MBplemI4BdGBW+DQ11eZiymfqQuXZIjqwyadPNoSZ4L+0FVM6e+oGI6g8a9iKNT3o8kVzNkzRg5lgl7p4wyRUL9Yt2jAxVh6mQCogae6GmflI8p0r13VFWTHBQ0rWPW7ahgWVcPm+9cuLoyy4kCJDzCm6d8PSFoh0zvQNC5OjDJhQopPPJqph1doJBUD5tnkbZiUEqaCnB3bTqLTFG1bPn71kw4b+GFdpLElKIzRxxgYgWNYc5SCENVHKeUaltHdXx0dZ8uBI1hJ2UUDgq82CM2MwKeibqAvSO7MCABq0wXEPiqWEAAAAAElFTkSuQmCC"]="https://openlayers.org/";else{var r=t.logo;"string"==typeof r?n[r]="":r instanceof HTMLElement?n[o(r).toString()]=r:r&&(s("string"==typeof r.href,44),s("string"==typeof r.src,45),n[r.src]=r.href)}r=t.layers instanceof zn?t.layers:new zn({layers:t.layers}),i[cf]=r,i[ff]=t.target,i[df]=void 0!==t.view?t.view:new ge;var a,r=lr;void 0!==t.renderer?(Array.isArray(t.renderer)?a=t.renderer:"string"==typeof t.renderer?a=[t.renderer]:s(!1,46),0<=a.indexOf("dom")&&(a=a.concat(lf))):a=lf;var h,l;for(h=0,l=a.length;h<l;++h){var c=a[h];if("canvas"==c){if(Kc){r=Mo;break}}else if("webgl"==c&&Uc){r=vs;break}}return void 0!==t.controls?Array.isArray(t.controls)?a=new ze(t.controls.slice()):(s(t.controls instanceof ze,47),a=t.controls):a=li(),void 0!==t.interactions?Array.isArray(t.interactions)?h=new ze(t.interactions.slice()):(s(t.interactions instanceof ze,48),h=t.interactions):h=Gn(),void 0!==t.overlays?Array.isArray(t.overlays)?t=new ze(t.overlays.slice()):(s(t.overlays instanceof ze,49),t=t.overlays):t=new ze,{controls:a,interactions:h,keyboardEventTarget:e,logos:n,overlays:t,df:r,values:i}}function Ss(t){j.call(this),this.bd=t.id,this.j=void 0===t.insertFirst||t.insertFirst,this.l=void 0===t.stopEvent||t.stopEvent,this.b=document.createElement("DIV"),this.b.className="ol-overlay-container",this.b.style.position="absolute",this.autoPan=void 0!==t.autoPan&&t.autoPan,this.g=t.autoPanAnimation||{},this.i=void 0!==t.autoPanMargin?t.autoPanMargin:20,this.a={Ab:"",Ib:"",Mb:"",Rb:"",visible:!0},this.f=null,M(this,R(Sf),this.Vd,this),M(this,R(Cf),this.ae,this),M(this,R(Af),this.be,this),M(this,R(If),this.de,this),M(this,R(Lf),this.ee,this),void 0!==t.element&&this.set(Sf,t.element),this.set(Af,void 0!==t.offset?t.offset:[0,0]),this.set(Lf,void 0!==t.positioning?t.positioning:wf),void 0!==t.position&&this.set(If,t.position)}function Cs(t,e){var i=t.getBoundingClientRect(),n=i.left+window.pageXOffset,i=i.top+window.pageYOffset;return[n,i,n+e[0],i+e[1]]}function As(t,e){t.a.visible!==e&&(t.b.style.display=e?"":"none",t.a.visible=e)}function Is(t){var e=t.get(Cf),i=t.get(If);if(void 0!==e&&e.b&&void 0!==i){var i=xs(e,i),n=e.Ya(),e=t.b.style,r=t.get(Af),o=t.get(Lf),a=r[0],r=r[1];o==gf||o==bf||o==Mf?(""!==t.a.Ib&&(t.a.Ib=e.left=""),a=Math.round(n[0]-i[0]-a)+"px",t.a.Mb!=a&&(t.a.Mb=e.right=a)):(""!==t.a.Mb&&(t.a.Mb=e.right=""),o!=vf&&o!=mf&&o!=xf||(a-=t.b.offsetWidth/2),a=Math.round(i[0]+a)+"px",t.a.Ib!=a&&(t.a.Ib=e.left=a)),o==pf||o==vf||o==gf?(""!==t.a.Rb&&(t.a.Rb=e.top=""),i=Math.round(n[1]-i[1]-r)+"px",t.a.Ab!=i&&(t.a.Ab=e.bottom=i)):(""!==t.a.Ab&&(t.a.Ab=e.bottom=""),o!=yf&&o!=mf&&o!=bf||(r-=t.b.offsetHeight/2),i=Math.round(i[1]+r)+"px",t.a.Rb!=i&&(t.a.Rb=e.top=i)),As(t,!0)}else As(t,!1)}function Ls(t){j.call(this),this.a=void 0,this.b="geometry",this.i=null,this.g=void 0,this.f=null,M(this,R(this.b),this.Gb,this),void 0!==t&&(t instanceof Xt||!t?this.Da(t):_(this,t))}function ks(t,e){S(t,R(t.b),t.Gb,t),t.b=e,M(t,R(t.b),t.Gb,t),t.Gb()}function Ps(t){if("function"!=typeof t){var e;Array.isArray(t)?e=t:(s(t instanceof Mr,41),e=[t]),t=function(){return e}}return t}function Ts(t){return Es(t,!1,[]).join("")}function Es(t,e,i){if(t.nodeType==Node.CDATA_SECTION_NODE||t.nodeType==Node.TEXT_NODE)e?i.push(String(t.nodeValue).replace(/(\r\n|\r|\n)/g,"")):i.push(t.nodeValue);else for(t=t.firstChild;t;t=t.nextSibling)Es(t,e,i);return i}function Fs(t){return(new DOMParser).parseFromString(t,"application/xml")}function Ds(t,e){return function(i,n){var r=t.call(void 0!==e?e:this,i,n);void 0!==r&&n[n.length-1].push(r)}}function js(t,e){return function(i,n){var r=t.call(void 0!==e?e:this,i,n);void 0!==r&&(n[n.length-1]=r)}}function Rs(t){return function(e,i){var n=t.call(this,e,i);if(void 0!==n){var r,o=i[i.length-1],a=e.localName;r=a in o?o[a]:o[a]=[],r.push(n)}}}function _s(t,e){return function(i,n){var r=t.call(this,i,n);void 0!==r&&(n[n.length-1][void 0!==e?e:i.localName]=r)}}function Bs(t){return function(e,i,n){t.call(this,e,i,n),n[n.length-1].node.appendChild(e)}}function Ns(t){var e,i;return function(n,r,o){if(void 0===e){e={};var a={};a[n.localName]=t,e[n.namespaceURI]=a,i=Vs(n.localName)}Xs(e,i,r,o)}}function Vs(t){return function(e,i,n){return e=i[i.length-1].node,i=t,void 0===i&&(i=n),kf.createElementNS(e.namespaceURI,i)}}function Os(t,e){for(var i=e.length,n=Array(i),r=0;r<i;++r)n[r]=t[e[r]];return n}function Us(t,e,i){i=void 0!==i?i:{};var n,r;for(n=0,r=t.length;n<r;++n)i[t[n]]=e;return i}function Ws(t,e,i,n){for(e=e.firstElementChild;e;e=e.nextElementSibling){var r=t[e.namespaceURI];void 0!==r&&(r=r[e.localName])&&r.call(n,e,i)}}function Gs(t,e,i,n,r){return n.push(t),Ws(e,i,n,r),n.pop()}function Xs(t,e,i,n,r,o){for(var a,s,h=(void 0!==r?r:i).length,l=0;l<h;++l)a=i[l],void 0!==a&&(s=e.call(o,a,n,void 0!==r?r[l]:void 0),void 0!==s&&t[s.namespaceURI][s.localName].call(o,s,a,n))}function Hs(t,e,i,n,r,o,a){r.push(t),Xs(e,i,n,r,o,a),r.pop()}function zs(t,e,i){return function(n,r,o){var a=new XMLHttpRequest;a.open("GET","function"==typeof t?t(n,r,o):t,!0),"arraybuffer"==e.$()&&(a.responseType="arraybuffer"),a.onload=function(){if(!a.status||200<=a.status&&300>a.status){var t,n=e.$();"json"==n||"text"==n?t=a.responseText:"xml"==n?(t=a.responseXML)||(t=Fs(a.responseText)):"arraybuffer"==n&&(t=a.response),t&&i.call(this,e.i(t,{featureProjection:o}),e.b(t))}}.bind(this),a.send()}}function Ys(t,e){return zs(t,e,function(t){El(this,t),this.v()})}function Js(){this.f=this.defaultDataProjection=null}function qs(t,e,i){var n;return i&&(n={dataProjection:i.dataProjection?i.dataProjection:t.b(e),featureProjection:i.featureProjection}),Mc({dataProjection:t.defaultDataProjection,featureProjection:t.f},n)}function Ks(t,e,i){var n,r=i?_t(i.featureProjection):null,o=i?_t(i.dataProjection):null;if(n=r&&o&&!Bt(r,o)?t instanceof Xt?(e?t.clone():t).transform(e?r:o,e?o:r):Gt(e?t.slice():t,e?r:o,e?o:r):t,e&&i&&i.decimals){var a=Math.pow(10,i.decimals);t=function(t){for(var e=0,i=t.length;e<i;++e)t[e]=Math.round(t[e]*a)/a;return t},Array.isArray(n)?t(n):n.zb(t)}return n}function Zs(){Js.call(this)}function Qs(t){return"string"==typeof t?(t=JSON.parse(t))?t:null:null!==t?t:null}function $s(t,e,i,n,r,o){var a=NaN,s=NaN,h=(i-e)/n;if(0!==h)if(1==h)a=t[e],s=t[e+1];else if(2==h)a=(1-r)*t[e]+r*t[e+n],s=(1-r)*t[e+1]+r*t[e+n+1];else{var l,s=t[e],h=t[e+1],c=0,a=[0];for(l=e+n;l<i;l+=n){var u=t[l],f=t[l+1],c=c+Math.sqrt((u-s)*(u-s)+(f-h)*(f-h));a.push(c),s=u,h=f}for(i=r*c,h=0,c=a.length,l=!1;h<c;)r=h+(c-h>>1),s=+N(a[r],i),0>s?h=r+1:(c=r,l=!s);r=l?h:~h,0>r?(i=(i-a[-r-2])/(a[-r-1]-a[-r-2]),e+=(-r-2)*n,a=t[e],a+=i*(t[e+n]-a),r=t[e+1],s=r+i*(t[e+n+1]-r)):(a=t[e+r*n],s=t[e+r*n+1])}return o?(o[0]=a,o[1]=s,o):[a,s]}function th(t,e){Yt.call(this),this.f=null,this.j=-1,this.ea(t,e)}function eh(t){return t.j!=t.c&&(t.f=t.Sc(.5,t.f),t.j=t.c),t.f}function ih(t,e){Yt.call(this),this.f=[],this.ea(t,e)}function nh(t){var e=t.s,i=t.f;t=t.X;var n,r,o=[],a=0;for(n=0,r=i.length;n<r;++n){var s=i[n],h=new th(null);h.U(t,e.slice(a,s)),o.push(h),a=s}return o}function rh(t){var e=[],i=t.s,n=0,r=t.f;t=t.a;var o,a;for(o=0,a=r.length;o<a;++o){var s=r[o],n=$s(i,n,s,t,.5);O(e,n),n=s}return e}function oh(t,e){var i,n,r=t.X,o=[],a=[];for(i=0,n=e.length;i<n;++i){var s=e[i];0===i&&(r=s.X),O(o,s.s),a.push(o.length)}t.U(r,o,a)}function ah(t,e){Yt.call(this),this.ea(t,e)}function sh(t,e){Yt.call(this),this.f=[],this.A=-1,this.C=null,this.G=-1,this.j=null,this.ea(t,e)}function hh(t){if(t.A!=t.c){var e,i,n,r=t.s,o=t.f,a=t.a,s=0,h=[];for(e=0,i=o.length;e<i;++e){var l=o[e];n=r;var c=l[0],u=a,f=ht(void 0);n=dt(f,n,s,c,u),h.push((n[0]+n[2])/2,(n[1]+n[3])/2),s=l[l.length-1]}for(r=lh(t),o=t.f,a=t.a,e=0,i=[],l=0,n=o.length;l<n;++l)s=o[l],i=se(r,e,s,a,h,2*l,i),e=s[s.length-1];t.C=i,t.A=t.c}return t.C}function lh(t){if(t.G!=t.c){var e,i=t.s;t:{e=t.f;var n,r;for(n=0,r=e.length;n<r;++n)if(!le(i,e[n],t.a,void 0)){e=!1;break t}e=!0}e?t.j=i:(t.j=i.slice(),t.j.length=ue(t.j,t.f,t.a)),t.G=t.c}return t.j}function ch(t){var e=t.X,i=t.s;t=t.f;var n,r,o,a,s=[],h=0;for(n=0,r=t.length;n<r;++n){var l=t[n].slice(),c=l[l.length-1];if(0!==h)for(o=0,a=l.length;o<a;++o)l[o]-=h;o=new fe(null),o.U(e,i.slice(h,c),l),s.push(o),h=c}return s}function uh(t,e,i,n){qt(t,e,i),t.f=n,t.v()}function fh(t){Xt.call(this),this.b=t?t:null,vh(this)}function dh(t){var e,i,n=[];for(e=0,i=t.length;e<i;++e)n.push(t[e].clone());return n}function ph(t){var e,i;if(t.b)for(e=0,i=t.b.length;e<i;++e)S(t.b[e],"change",t.v,t)}function vh(t){var e,i;if(t.b)for(e=0,i=t.b.length;e<i;++e)M(t.b[e],"change",t.v,t)}function gh(t){t=t?t:{},Js.call(this),this.defaultDataProjection=_t(t.defaultDataProjection?t.defaultDataProjection:"EPSG:4326"),t.featureProjection&&(this.f=_t(t.featureProjection)),this.a=t.geometryName}function yh(t,e){return t?Ks((0,Tf[t.type])(t),!1,e):null}function mh(t,e,i){e="Feature"===e.type?e:{type:"Feature",geometry:e},i=yh(e.geometry,i);var n=new Ls;return t.a&&ks(n,t.a),n.Da(i),void 0!==e.id&&(n.a=e.id,n.v()),e.properties&&_(n,e.properties),n}function bh(){new XMLSerializer,Js.call(this)}function wh(t,e,i){var n=[];for(e=e.firstChild;e;e=e.nextSibling)e.nodeType==Node.ELEMENT_NODE&&O(n,Mh(t,e,i));return n}function xh(t){t=t?t:{},this.featureType=t.featureType,this.featureNS=t.featureNS,this.srsName=t.srsName,this.schemaLocation="",this.a={},this.a["http://www.opengis.net/gml"]={featureMember:js(xh.prototype.c),featureMembers:js(xh.prototype.c)},bh.call(this)}function Mh(t,e,i){var n={featureType:t.featureType,featureNS:t.featureNS};return i&&Mc(n,qs(t,e,i)),t.c(e,[n])||[]}function Sh(t){return t=Ts(t),Ch(t)}function Ch(t){if(t=/^\s*(true|1)|(false|0)\s*$/.exec(t))return void 0!==t[1]||!1}function Ah(t){return t=Ts(t),t=Date.parse(t),isNaN(t)?void 0:t/1e3}function Ih(t){return t=Ts(t),Lh(t)}function Lh(t){if(t=/^\s*([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?)\s*$/i.exec(t))return parseFloat(t[1])}function kh(t){return t=Ts(t),Ph(t)}function Ph(t){if(t=/^\s*(\d+)\s*$/.exec(t))return parseInt(t[1],10)}function Th(t){return Ts(t).trim()}function Eh(t,e){jh(t,e?"1":"0")}function Fh(t,e){t.appendChild(kf.createTextNode(e.toPrecision()))}function Dh(t,e){t.appendChild(kf.createTextNode(e.toString()))}function jh(t,e){t.appendChild(kf.createTextNode(e))}function Rh(t,e,i,n){return t.push(parseFloat(i.getAttribute("lon")),parseFloat(i.getAttribute("lat"))),"ele"in n?(t.push(n.ele),delete n.ele,e.nc=!0):t.push(0),"time"in n?(t.push(n.time),delete n.time,e.mc=!0):t.push(0),t}function _h(t,e,i){var n="XY",r=2;if(t.nc&&t.mc?(n="XYZM",r=4):t.nc?(n="XYZ",r=3):t.mc&&(n="XYM",r=3),4!==r){var o,a;for(o=0,a=e.length/4;o<a;o++)e[o*r]=e[4*o],e[o*r+1]=e[4*o+1],t.nc&&(e[o*r+2]=e[4*o+2]),t.mc&&(e[o*r+2]=e[4*o+3]);if(e.length=e.length/4*r,i)for(o=0,a=i.length;o<a;o++)i[o]=i[o]/4*r}return n}function Bh(t,e){var i=e[e.length-1],n=t.getAttribute("href");null!==n&&(i.link=n),Ws(Df,t,e)}function Nh(t,e){e[e.length-1].extensionsNode_=t}function Vh(t,e,i){t.setAttribute("href",e),e=i[i.length-1].properties,Hs({node:t},Uf,Pf,[e.linkText,e.linkType],i,Of)}function Oh(t,e,i){var n=i[i.length-1],r=n.node.namespaceURI,o=n.properties;switch(t.setAttributeNS(null,"lat",e[1]),t.setAttributeNS(null,"lon",e[0]),n.geometryLayout){case"XYZM":0!==e[3]&&(o.time=e[3]);case"XYZ":0!==e[2]&&(o.ele=e[2]);break;case"XYM":0!==e[2]&&(o.time=e[2])}e="rtept"==t.nodeName?Xf[r]:qf[r],n=Os(o,e),Hs({node:t,properties:o},Kf,Pf,n,i,e)}function Uh(t,e,i,n,r,o){T.call(this),this.o=null,this.a=t?t:new Image,null!==n&&(this.a.crossOrigin=n),this.f=o?document.createElement("CANVAS"):null,this.i=o,this.g=null,this.b=r,this.c=i,this.j=e,this.l=!1,2==this.b&&Wh(this)}function Wh(t){var e=ti(1,1);try{e.drawImage(t.a,0,0),e.getImageData(0,0,1,1)}catch(e){t.l=!0}}function Gh(t){t=t||{},this.f=void 0!==t.anchor?t.anchor:[.5,.5],this.i=null,this.c=void 0!==t.anchorOrigin?t.anchorOrigin:td,this.A=void 0!==t.anchorXUnits?t.anchorXUnits:Zf,this.C=void 0!==t.anchorYUnits?t.anchorYUnits:Zf,this.L=void 0!==t.crossOrigin?t.crossOrigin:null;var e=void 0!==t.img?t.img:null,i=void 0!==t.imgSize?t.imgSize:null,n=t.src;s(!(void 0!==n&&e),4),s(!e||e&&i,5),void 0!==n&&0!==n.length||!e||(n=e.src||o(e).toString()),s(void 0!==n&&0<n.length,6);var r=void 0!==t.src?0:2;this.g=void 0!==t.color?Ke(t.color):null;var a=this.L,h=this.g,l=Lu.get(n,a,h);l||(l=new Uh(e,n,i,a,r,h),Lu.set(n,a,h,l)),this.a=l,this.G=void 0!==t.offset?t.offset:[0,0],this.b=void 0!==t.offsetOrigin?t.offsetOrigin:td,this.l=null,this.D=void 0!==t.size?t.size:null,yr.call(this,{opacity:void 0!==t.opacity?t.opacity:1,rotation:void 0!==t.rotation?t.rotation:0,scale:void 0!==t.scale?t.scale:1,snapToPixel:void 0===t.snapToPixel||t.snapToPixel,rotateWithView:void 0!==t.rotateWithView&&t.rotateWithView
})}function Xh(t){t=t||{},this.f=t.font,this.j=t.rotation,this.o=t.rotateWithView,this.c=t.scale,this.D=t.text,this.l=t.textAlign,this.u=t.textBaseline,this.a=void 0!==t.fill?t.fill:new wr({color:"#333"}),this.b=void 0!==t.stroke?t.stroke:null,this.g=void 0!==t.offsetX?t.offsetX:0,this.i=void 0!==t.offsetY?t.offsetY:0}function Hh(t){if(t=Ts(t),t=/^\s*#?\s*([0-9A-Fa-f]{8})\s*$/.exec(t))return t=t[1],[parseInt(t.substr(6,2),16),parseInt(t.substr(4,2),16),parseInt(t.substr(2,2),16),parseInt(t.substr(0,2),16)/255]}function zh(t){t=Ts(t);for(var e,i=[],n=/^\s*([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?)\s*,\s*([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?)(?:\s*,\s*([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?))?\s*/i;e=n.exec(t);)i.push(parseFloat(e[1]),parseFloat(e[2]),e[3]?parseFloat(e[3]):0),t=t.substr(e[0].length);return""!==t?void 0:i}function Yh(t){var e=Ts(t).trim();return t.baseURI?new URL(e,t.baseURI).href:e}function Jh(t){return Ih(t)}function qh(t,e){return Gs(null,ud,t,e)}function Kh(t,e){var i=Gs({s:[],vd:[]},dd,t,e);if(i){var n,r,o=i.s,i=i.vd;for(n=0,r=Math.min(o.length,i.length);n<r;++n)o[4*n+3]=i[n];return i=new th(null),i.U("XYZM",o),i}}function Zh(t,e){var i=Gs({},cd,t,e),n=Gs(null,pd,t,e);if(n){var r=new th(null);return r.U("XYZ",n),_(r,i),r}}function Qh(t,e){var i=Gs({},cd,t,e),n=Gs(null,pd,t,e);if(n){var r=new fe(null);return r.U("XYZ",n,[n.length]),_(r,i),r}}function $h(t,e){var i=Gs([],wd,t,e);if(!i)return null;if(0===i.length)return new fh(i);var n,r,o,a,h=!0,l=i[0].$();for(o=1,a=i.length;o<a;++o)if(r=i[o],r.$()!=l){h=!1;break}if(h)if("Point"==l){for(n=i[0],h=n.X,l=n.s,o=1,a=i.length;o<a;++o)r=i[o],O(l,r.s);n=new ah(null),n.U(h,l),nl(n,i)}else if("LineString"==l)n=new ih(null),oh(n,i),nl(n,i);else if("Polygon"==l){r=n=new sh(null),o=r.X,a=[];var c,u,h=[],l=0;for(c=i.length;l<c;++l){var f=i[l];0===l&&(o=f.X);var d=a.length;u=f.Ta();var p,v;for(p=0,v=u.length;p<v;++p)u[p]+=d;O(a,f.s),h.push(u)}uh(r,o,a,h),nl(n,i)}else"GeometryCollection"==l?n=new fh(i):s(!1,37);else n=new fh(i);return n}function tl(t,e){var i=Gs({},cd,t,e),n=Gs(null,pd,t,e);if(n){var r=new oe(null);return r.U("XYZ",n),_(r,i),r}}function el(t,e){var i=Gs({},cd,t,e),n=Gs([null],fd,t,e);if(n&&n[0]){var r,o,a=new fe(null),s=n[0],h=[s.length];for(r=1,o=n.length;r<o;++r)O(s,n[r]),h.push(s.length);return a.U("XYZ",s,h),_(a,i),a}}function il(t,e){var i=Gs({},Ld,t,e);if(!i)return null;var n="fillStyle"in i?i.fillStyle:void 0,r=i.fill;void 0===r||r||(n=null),r="imageStyle"in i?i.imageStyle:void 0,void 0==r&&(r=void 0);var o="textStyle"in i?i.textStyle:void 0,a="strokeStyle"in i?i.strokeStyle:void 0,i=i.outline;return void 0===i||i||(a=null),[new Mr({fill:n,image:r,stroke:a,text:o,zIndex:void 0})]}function nl(t,e){var i,n,r,o,a=e.length,s=Array(e.length),h=Array(e.length);for(r=o=!1,n=0;n<a;++n)i=e[n],s[n]=i.get("extrude"),h[n]=i.get("altitudeMode"),r=r||void 0!==s[n],o=o||h[n];r&&t.set("extrude",s),o&&t.set("altitudeMode",h)}function rl(t,e){Ws(ad,t,e)}function ol(t,e){Ws(sd,t,e)}function al(t,e){var i,n=Ke(e),n=[255*(4==n.length?n[3]:1),n[2],n[1],n[0]];for(i=0;4>i;++i){var r=parseInt(n[i],10).toString(16);n[i]=1==r.length?"0"+r:r}jh(t,n.join(""))}function sl(t,e,i){t={node:t};var n,r,o=e.$();if("GeometryCollection"==o)n=dh(e.b),r=vl;else if("MultiPoint"==o){n=e.s,r=e.X,e=e.a;var a,h,o=[];for(a=0,h=n.length;a<h;a+=e){var l=new oe(null);l.U(r,n.slice(a,a+e)),o.push(l)}n=o,r=tp}else"MultiLineString"==o?(n=nh(e),r=ep):"MultiPolygon"==o?(n=ch(e),r=np):s(!1,39);Hs(t,Ud,r,n,i)}function hl(t,e,i){Hs({node:t},Od,ip,[e],i)}function ll(t,e,i){var n={node:t};e.a&&t.setAttribute("id",e.a),t=Mc({},e.o);var r={address:1,description:1,name:1,open:1,phoneNumber:1,styleUrl:1,visibility:1};r[e.b]=1;var o=Object.keys(t||{}).sort().filter(function(t){return!r[t]});if(0<o.length){var a=Os(t,o);Hs(n,Gd,Qd,[{names:o,values:a}],i)}(o=e.g)&&(o=o.call(e,0))&&(o=Array.isArray(o)?o[0]:o,this.a&&(t.Style=o),(o=o.ha())&&(t.name=o.ha())),o=Wd[i[i.length-1].node.namespaceURI],t=Os(t,o),Hs(n,Gd,Pf,t,i,o),t=i[0],(e=e.T())&&(e=Ks(e,!0,t)),Hs(n,Gd,vl,[e],i)}function cl(t,e,i){var n=e.s;t={node:t},t.layout=e.X,t.stride=e.a,Hs(t,Xd,Kd,[n],i)}function ul(t,e,i){e=pe(e);var n=e.shift();t={node:t},Hs(t,Hd,$d,e,i),Hs(t,Hd,rp,[n],i)}function fl(t,e){Fh(t,Math.round(1e6*e)/1e6)}function dl(t,e,i){return kf.createElementNS(id[0],"gx:"+i)}function pl(t,e){return kf.createElementNS(e[e.length-1].node.namespaceURI,"Placemark")}function vl(t,e){if(t)return kf.createElementNS(e[e.length-1].node.namespaceURI,Ed[t.$()])}function gl(t,e){e[e.length-1].tb[t.getAttribute("k")]=t.getAttribute("v")}function yl(t){return t.getAttributeNS("http://www.w3.org/1999/xlink","href")}function ml(t,e){return Gs({},Op,t,e)}function bl(t,e){return Gs({},_p,t,e)}function wl(t,e){var i=ml(t,e);if(i){var n=[Ph(t.getAttribute("width")),Ph(t.getAttribute("height"))];return i.size=n,i}}function xl(t,e){return Gs([],Up,t,e)}function Ml(t){var e=Th(t).split(" ");if(e&&2==e.length)return t=+e[0],e=+e[1],isNaN(t)||isNaN(e)?void 0:[t,e]}function Sl(t,e,i){Yt.call(this),Cl(this,t,e?e:0,i)}function Cl(t,e,i,n){if(e){Kt(t,n,e,0),t.s||(t.s=[]),n=t.s,e=Zt(n,e),n[e++]=n[0]+i;var r;for(i=1,r=t.a;i<r;++i)n[e++]=n[i];n.length=e}else qt(t,"XY",null);t.v()}function Al(t,e,i,n,r){Oi.call(this,t,e),this.f=i,this.c=new Image,null!==n&&(this.c.crossOrigin=n),this.b=null,this.g=r}function Il(t){t.b.forEach(C),t.b=null}function Ll(){return[[-(1/0),-(1/0),1/0,1/0]]}function kl(t){t=t||{},as.call(this,{attributions:t.attributions,logo:t.logo,projection:void 0,state:"ready",wrapX:void 0===t.wrapX||t.wrapX}),this.A=n,this.G=t.format,this.ba=void 0==t.overlaps||t.overlaps,this.L=t.url,void 0!==t.loader?this.A=t.loader:void 0!==this.L&&(s(this.G,7),this.A=Ys(this.L,this.G)),this.ca=void 0!==t.strategy?t.strategy:Ll;var e=void 0===t.useSpatialIndex||t.useSpatialIndex;this.a=e?new xa:null,this.C=new xa,this.b={},this.f={},this.j={},this.l={},this.i=null;var i,r;t.features instanceof ze?(i=t.features,r=i.a):Array.isArray(t.features)&&(r=t.features),e||void 0!==i||(i=new ze(r)),void 0!==r&&El(this,r),void 0!==i&&Fl(this,i)}function Pl(t,e,i){t.l[e]=[M(i,"change",t.hd,t),M(i,Cc,t.hd,t)]}function Tl(t,e,i){var n=!0,r=i.a;return void 0!==r?r.toString()in t.f?n=!1:t.f[r.toString()]=i:(s(!(e in t.j),30),t.j[e]=i),n}function El(t,e){var i,n,r,a,s=[],h=[],l=[];for(n=0,r=e.length;n<r;n++)a=e[n],i=o(a).toString(),Tl(t,i,a)&&h.push(a);for(n=0,r=h.length;n<r;n++){a=h[n],i=o(a).toString(),Pl(t,i,a);var c=a.T();c?(i=c.M(),s.push(i),l.push(a)):t.b[i]=a}for(t.a&&t.a.load(s,l),n=0,r=h.length;n<r;n++)E(t,new _l(tv,h[n]))}function Fl(t,e){var i=!1;M(t,tv,function(t){i||(i=!0,e.push(t.feature),i=!1)}),M(t,nv,function(t){i||(i=!0,e.remove(t.feature),i=!1)}),M(e,Rc,function(t){i||(i=!0,this.$b(t.element),i=!1)},t),M(e,_c,function(t){i||(i=!0,this.ld(t.element),i=!1)},t),t.i=e}function Dl(t,e,i,n){t.a?Aa(t.a,e,i,n):t.i&&t.i.forEach(i,n)}function jl(t,e,i,n){var r=t.C;e=t.ca(e,i);var o,a;for(o=0,a=e.length;o<a;++o){var s=e[o];Aa(r,s,function(t){return rt(t.extent,s)})||(t.A.call(t,s,i,n),r.Ha(s,{extent:s.slice()}))}}function Rl(t,e){for(var i in t.f)if(t.f[i]===e){delete t.f[i];break}}function _l(t,e){k.call(this,t),this.feature=e}function Bl(t){hn.call(this,{handleDownEvent:Ol,handleEvent:Vl,handleUpEvent:Ul}),this.ba=null,this.j=!1,this.Aa=t.source?t.source:null,this.ta=t.features?t.features:null,this.Nd=t.snapTolerance?t.snapTolerance:12,this.L=t.type,this.b=ql(this.L),this.sa=t.minPoints?t.minPoints:this.b===av?3:2,this.ia=t.maxPoints?t.maxPoints:1/0,this.Oa=t.finishCondition?t.finishCondition:xt;var e=t.geometryFunction;if(!e)if("Circle"===this.L)e=function(t,e){var i=e?e:new Sl([NaN,NaN]),n=t[0],r=t[1],o=n[0]-r[0],n=n[1]-r[1];return Cl(i,t[0],Math.sqrt(o*o+n*n)),i};else{var i,n=this.b;n===rv?i=oe:n===ov?i=th:n===av&&(i=fe),e=function(t,e){var r=e;return r?n===av?r.ea([t[0].concat([t[0][0]])]):r.ea(t):r=new i(t),r}}this.A=e,this.G=this.l=this.a=this.u=this.g=this.i=null,this.Ba=t.clickTolerance?t.clickTolerance*t.clickTolerance:36,this.ca=new Lr({source:new kl({useSpatialIndex:!1,wrapX:!!t.wrapX&&t.wrapX}),style:t.style?t.style:Nl()}),this.za=t.geometryName,this.Md=t.condition?t.condition:rn,this.Ub=t.freehand?xt:t.freehandCondition?t.freehandCondition:on,M(this,R(au),this.Ja,this)}function Nl(){var t=Ar();return function(e){return t[e.T().$()]}}function Vl(t){this.j=this.b!==rv&&this.Ub(t);var e=!this.j;return this.j&&"pointerdrag"===t.type&&null!==this.g?(Hl(this,t),e=!1):"pointermove"===t.type?e=Wl(this,t):"dblclick"===t.type&&(e=!1),cn.call(this,t)&&e}function Ol(t){return this.j?(this.ba=t.pixel,this.i||Xl(this,t),!0):!!this.Md(t)&&(this.ba=t.pixel,!0)}function Ul(t){var e=this.ba,i=t.pixel,n=e[0]-i[0],e=e[1]-i[1],n=n*n+e*e,e=!0,i=this.b===sv;return(this.j?n>this.Ba:n<=this.Ba)?(Wl(this,t),this.i?this.j||i?zl(this):Gl(this,t)?this.Oa(t)&&zl(this):Hl(this,t):(Xl(this,t),this.b===rv&&zl(this)),e=!1):i&&(this.i=null),e}function Wl(t,e){if(t.i){var i,n=e.coordinate,r=t.g.T();t.b===rv?i=t.a:t.b===av?(i=t.a[0],i=i[i.length-1],Gl(t,e)&&(n=t.i.slice())):(i=t.a,i=i[i.length-1]),i[0]=n[0],i[1]=n[1],t.A(t.a,r),t.u&&t.u.T().ea(n),r instanceof fe&&t.b!==av?(t.l||(t.l=new Ls(new th(null))),0>=r.f.length?n=null:(n=new re(null),qt(n,r.X,r.s.slice(0,r.f[0])),n.v()),r=t.l.T(),r.U(n.X,n.s)):t.G&&(r=t.l.T(),r.ea(t.G)),Jl(t)}else r=e.coordinate.slice(),t.u?t.u.T().ea(r):(t.u=new Ls(new oe(r)),Jl(t));return!0}function Gl(t,e){var i=!1;if(t.g){var n=!1,r=[t.i];if(t.b===ov?n=t.a.length>t.sa:t.b===av&&(n=t.a[0].length>t.sa,r=[t.a[0][0],t.a[0][t.a[0].length-2]]),n)for(var n=e.map,o=0,a=r.length;o<a;o++){var s=r[o],h=xs(n,s),l=e.pixel,i=l[0]-h[0],h=l[1]-h[1];if(i=Math.sqrt(i*i+h*h)<=(t.j?1:t.Nd)){t.i=s;break}}}return i}function Xl(t,e){var i=e.coordinate;t.i=i,t.b===rv?t.a=i.slice():t.b===av?(t.a=[[i.slice(),i.slice()]],t.G=t.a[0]):(t.a=[i.slice(),i.slice()],t.b===sv&&(t.G=t.a)),t.G&&(t.l=new Ls(new th(t.G))),i=t.A(t.a),t.g=new Ls,t.za&&ks(t.g,t.za),t.g.Da(i),Jl(t),E(t,new Kl(hv,t.g))}function Hl(t,e){var i,n,r=e.coordinate,o=t.g.T();t.b===ov?(t.i=r.slice(),n=t.a,n.length>=t.ia&&(t.j?n.pop():i=!0),n.push(r.slice()),t.A(n,o)):t.b===av&&(n=t.a[0],n.length>=t.ia&&(t.j?n.pop():i=!0),n.push(r.slice()),i&&(t.i=n[0]),t.A(t.a,o)),Jl(t),i&&zl(t)}function zl(t){var e=Yl(t),i=t.a,n=e.T();t.b===ov?(i.pop(),t.A(i,n)):t.b===av&&(i[0].pop(),t.A(i,n),i=n.ua()),"MultiPoint"===t.L?e.Da(new ah([i])):"MultiLineString"===t.L?e.Da(new ih([i])):"MultiPolygon"===t.L&&e.Da(new sh([i])),E(t,new Kl(lv,e)),t.ta&&t.ta.push(e),t.Aa&&t.Aa.$b(e)}function Yl(t){t.i=null;var e=t.g;return e&&(t.g=null,t.u=null,t.l=null,t.ca.oa().clear(!0)),e}function Jl(t){var e=[];t.g&&e.push(t.g),t.l&&e.push(t.l),t.u&&e.push(t.u),t=t.ca.oa(),t.clear(!0),El(t,e),t.v()}function ql(t){var e;return"Point"===t||"MultiPoint"===t?e=rv:"LineString"===t||"MultiLineString"===t?e=ov:"Polygon"===t||"MultiPolygon"===t?e=av:"Circle"===t&&(e=sv),e}function Kl(t,e){k.call(this,t),this.feature=e}function Zl(t,e,i,n,r,o,a,s,l,c,u){if(Oi.call(this,r,0),this.B=void 0!==u&&u,this.u=a,this.l=s,this.j=null,this.b=e,this.g=n,this.i=o?o:r,this.c=[],this.ab=null,this.f=0,o=Ne(n,this.i),s=this.g.M(),r=this.b.M(),o=s?mt(o,s):o,0===pt(o))this.state=4;else if((s=t.M())&&(r=r?mt(r,s):s),s=vt(o),u=n.a[this.i[0]],n=Wt(s,i,t),s=Pt(i,u,s),u=It(i),void 0!==u&&(s*=u),u=It(t),void 0!==u&&(s/=u),n=Pt(t,s,n)/s,isFinite(n)&&0<n&&(s/=n),n=s,!isFinite(n)||0>=n)this.state=4;else if(this.o=new ns(t,i,o,r,n*(void 0!==c?c:.5)),0===this.o.f.length)this.state=4;else if(this.f=Ue(e,n),i=os(this.o),r&&(t.c?(i[1]=h(i[1],r[1],r[3]),i[3]=h(i[3],r[1],r[3])):i=mt(i,r)),pt(i)){for(t=_e(e,i,this.f),e=t.K;e<=t.J;e++)for(i=t.N;i<=t.R;i++)(c=l(this.f,e,i,a))&&this.c.push(c);0===this.c.length&&(this.state=4)}else this.state=4}function Ql(t,e){var i=/\{z\}/g,n=/\{x\}/g,r=/\{y\}/g,o=/\{-y\}/g;return function(a){if(a)return t.replace(i,a[0].toString()).replace(n,a[1].toString()).replace(r,function(){return(-a[2]-1).toString()}).replace(o,function(){var t=e.c?e.c[a[0]]:null;return s(t,55),(t.R-t.N+1+a[2]).toString()})}}function $l(t,e){for(var i=t.length,n=Array(i),r=0;r<i;++r)n[r]=Ql(t[r],e);return tc(n)}function tc(t){return 1===t.length?t[0]:function(e,i,n){if(e)return t[c((e[1]<<e[0])+e[2],t.length)](e,i,n)}}function ec(){}function ic(t){ds.call(this),this.g=void 0!==t?t:2048}function nc(t){return t.f>t.g}function rc(t){as.call(this,{attributions:t.attributions,extent:t.extent,logo:t.logo,projection:t.projection,state:t.state,wrapX:t.wrapX}),this.C=void 0!==t.opaque&&t.opaque,this.i=void 0!==t.tilePixelRatio?t.tilePixelRatio:1,this.tileGrid=void 0!==t.tileGrid?t.tileGrid:null,this.a=new ic(t.cacheSize),this.l=[0,0],this.La=""}function oc(t,e,i,n,r){if(e=t.qb(e),!e)return!1;for(var o,a,s=!0,h=n.K;h<=n.J;++h)for(var l=n.N;l<=n.R;++l)o=t.Eb(i,h,l),a=!1,ps(e,o)&&(o=e.get(o),(a=o.aa()===ou)&&(a=!1!==r(o))),a||(s=!1);return s}function ac(t,e,i){var n=t.Ga(i);return i=t.i,e=Te(Oe(n,e),t.l),1==i?t=e:(t=t.l,void 0===t&&(t=[0,0]),t[0]=e[0]*i+.5|0,t[1]=e[1]*i+.5|0),t}function sc(t,e,i){var n=void 0!==i?i:t.g;if(i=t.Ga(n),t.u&&n.f){var r=e;e=r[0],t=Be(i,r),n=Xe(n),ot(n,t[0],t[1])?e=r:(r=bt(n),t[0]+=r*Math.ceil((n[0]-t[0])/r),e=Ve(i,t[0],t[1],i.a[e],!1,void 0))}if(r=e[0],n=e[1],t=e[2],i.minZoom>r||r>i.maxZoom)i=!1;else{var o=i.M();i=!(i=o?_e(i,o,r):i.c?i.c[r]:null)||Le(i,n,t)}return i?e:null}function hc(t,e){k.call(this,t),this.tile=e}function lc(t){if(rc.call(this,{attributions:t.attributions,cacheSize:t.cacheSize,extent:t.extent,logo:t.logo,opaque:t.opaque,projection:t.projection,state:t.state,tileGrid:t.tileGrid,tilePixelRatio:t.tilePixelRatio,wrapX:t.wrapX}),this.tileLoadFunction=t.tileLoadFunction,this.tileUrlFunction=this.f?this.f.bind(this):ec,this.urls=null,t.urls){var e=t.urls;this.urls=e;var i=e.join("\n");cc(this,this.f?this.f.bind(this):$l(e,this.tileGrid),i)}else if(t.url){e=t.url;var i=[],n=/\{([a-z])-([a-z])\}/.exec(e);if(n){var r,o=n[2].charCodeAt(0);for(r=n[1].charCodeAt(0);r<=o;++r)i.push(e.replace(n[0],String.fromCharCode(r)))}else if(n=n=/\{(\d+)-(\d+)\}/.exec(e))for(o=parseInt(n[2],10),r=parseInt(n[1],10);r<=o;r++)i.push(e.replace(n[0],r.toString()));else i.push(e);i=this.urls=i,cc(this,this.f?this.f.bind(this):$l(i,this.tileGrid),e)}t.tileUrlFunction&&cc(this,t.tileUrlFunction)}function cc(t,e,i){t.tileUrlFunction=e,"undefined"!=typeof i?t.La!==i&&(t.La=i,t.v()):t.v()}function uc(t){lc.call(this,{attributions:t.attributions,cacheSize:t.cacheSize,extent:t.extent,logo:t.logo,opaque:t.opaque,projection:t.projection,state:t.state,tileGrid:t.tileGrid,tileLoadFunction:t.tileLoadFunction?t.tileLoadFunction:vc,tilePixelRatio:t.tilePixelRatio,tileUrlFunction:t.tileUrlFunction,url:t.url,urls:t.urls,wrapX:t.wrapX}),this.crossOrigin=void 0!==t.crossOrigin?t.crossOrigin:null,this.tileClass=void 0!==t.tileClass?t.tileClass:Al,this.b={},this.j={},this.G=t.reprojectionErrorThreshold}function fc(t,e,i,n,r,o,a){return e=[e,i,n],r=(i=sc(t,e,o))?t.tileUrlFunction(i,r,o):void 0,r=new t.tileClass(e,void 0!==r?0:4,void 0!==r?r:"",t.crossOrigin,t.tileLoadFunction),r.key=a,M(r,"change",t.A,t),r}function dc(t,e,i,n,r,o){if(t.g&&o&&!Bt(t.g,o)){r=t.qb(o),n=[e,i,n];var a;if(e=t.Eb.apply(t,n),ps(r,e)&&(a=r.get(e)),i=t.getKey(),a&&a.key==i)return a;var s=t.g,h=t.Ga(s),l=t.Ga(o),c=sc(t,n,o);return t=new Zl(s,h,o,l,n,c,t.i,0,function(t,e,i,n){return pc(this,t,e,i,n,s)}.bind(t),t.G,!1),t.key=i,a?(t.a=a,r.replace(e,t)):r.set(e,t),t}return pc(t,e,i,n,r,o)}function pc(t,e,i,n,r,o){var a,s=t.Eb(e,i,n),h=t.getKey();if(ps(t.a,s)){if(a=t.a.get(s),a.key!=h){var l=a;if(a=fc(t,e,i,n,r,o,h),0==l.aa()?a.a=l.a:a.a=l,a.a){e=a.a,i=a;do{if(e.aa()==ou){e.a=null;break}1==e.aa()?i=e:0==e.aa()?i.a=e.a:i=e,e=i.a}while(e)}t.a.replace(s,a)}}else a=fc(t,e,i,n,r,o,h),t.a.set(s,a);return a}function vc(t,e){t.Za().src=e}var gc,yc,mc={},bc=this,wc=0;i(a,Error);var xc=function(){var t;return t="cosh"in Math?Math.cosh:function(t){return t=Math.exp(t),(t+1/t)/2}}(),Mc="function"==typeof Object.assign?Object.assign:function(t,e){if(!t||!t)throw new TypeError("Cannot convert undefined or null to object");for(var i=Object(t),n=1,r=arguments.length;n<r;++n){var o=arguments[n];if(void 0!==o&&null!==o)for(var a in o)o.hasOwnProperty(a)&&(i[a]=o[a])}return i};I.prototype.xa=!1,I.prototype.Z=n,k.prototype.preventDefault=k.prototype.stopPropagation=function(){this.Ve=!0},i(T,I),T.prototype.addEventListener=function(t,e){var i=this.D[t];i||(i=this.D[t]=[]),-1===i.indexOf(e)&&i.push(e)},T.prototype.Z=function(){A(this)},T.prototype.removeEventListener=function(t,e){var i=this.D[t];if(i){var r=i.indexOf(e);t in this.Y?(i[r]=n,++this.Y[t]):(i.splice(r,1),0===i.length&&delete this.D[t])}},i(D,T),D.prototype.v=function(){++this.c,E(this,"change")},D.prototype.ka=function(t,e,i){if(Array.isArray(t)){for(var n=t.length,r=Array(n),o=0;o<n;++o)r[o]=M(this,t[o],e,i);return r}return M(this,t,e,i)},i(j,D);var Sc={};j.prototype.get=function(t){var e;return this.o.hasOwnProperty(t)&&(e=this.o[t]),e},j.prototype.set=function(t,e,i){i?this.o[t]=e:(i=this.o[t],this.o[t]=e,i!==e&&(e=R(t),E(this,new B(e,t,i)),e=Cc,E(this,new B(e,t,i))))};var Cc="propertychange";i(B,k),St.prototype.offset=function(t,e,i){var n=t[1]*Math.PI/180;e/=this.radius;var r=Math.asin(Math.sin(n)*Math.cos(e)+Math.cos(n)*Math.sin(e)*Math.cos(i));return[180*(t[0]*Math.PI/180+Math.atan2(Math.sin(i)*Math.sin(e)*Math.cos(n),Math.cos(e)-Math.sin(n)*Math.sin(r)))/Math.PI,180*r/Math.PI]};var Ac=new St(6370997),Ic={};Ic.degrees=2*Math.PI*Ac.radius/360,Ic.ft=.3048,Ic.m=1,Ic["us-ft"]=1200/3937,At.prototype.M=function(){return this.i};var Lc={},kc={};i(Xt,j),Xt.prototype.M=function(t){this.B!=this.c&&(this.u=this.Cb(this.u),this.B=this.c);var e=this.u;return t?(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3]):t=e,t},Xt.prototype.transform=function(t,e){return this.zb(Nt(t,e)),this},i(Yt,Xt),gc=Yt.prototype,gc.Cb=function(t){var e=this.s,i=this.s.length,n=this.a;return t=ht(t),dt(t,e,0,i,n)},gc.Uc=function(){return this.s.slice(this.s.length-this.a)},gc.kc=function(t){if(this.l!=this.c&&(p(this.g),this.i=0,this.l=this.c),0>t||0!==this.i&&t<=this.i)return this;var e=t.toString();if(this.g.hasOwnProperty(e))return this.g[e];var i=this.Ua(t);return i.s.length<this.s.length?this.g[e]=i:(this.i=t,this)},gc.Ua=function(){return this},gc.zb=function(t){this.s&&(t(this.s,this.s,this.a),this.v())},gc.rotate=function(t,e){var i=this.s;if(i){for(var n=i.length,r=this.a,o=i?i:[],a=Math.cos(t),s=Math.sin(t),h=e[0],l=e[1],c=0,u=0;u<n;u+=r){var f=i[u]-h,d=i[u+1]-l;for(o[c++]=h+f*a-d*s,o[c++]=l+f*s+d*a,f=u+2;f<u+r;++f)o[c++]=i[f]}i&&o.length!=c&&(o.length=c),this.v()}},gc.scale=function(t,e,i){var n=e;void 0===n&&(n=t);var r=i;if(r||(r=vt(this.M())),i=this.s){e=i.length;for(var o=this.a,a=i?i:[],s=r[0],r=r[1],h=0,l=0;l<e;l+=o){var c=i[l]-s,u=i[l+1]-r;for(a[h++]=s+t*c,a[h++]=r+n*u,c=l+2;c<l+o;++c)a[h++]=i[c]}i&&a.length!=h&&(a.length=h),this.v()}},gc.translate=function(t,e){var i=this.s;i&&(zt(i,i.length,this.a,t,e,i),this.v())},i(re,Yt),gc=re.prototype,gc.clone=function(){var t=new re(null);return qt(t,this.X,this.s.slice()),t.v(),t},gc.ua=function(){return te(this.s,0,this.s.length,this.a)},gc.Ua=function(t){var e=[];return e.length=ie(this.s,0,this.s.length,this.a,t,e,0),t=new re(null),qt(t,"XY",e),t.v(),t},gc.$=function(){return"LinearRing"},gc.ea=function(t,e){t?(Kt(this,e,t,1),this.s||(this.s=[]),this.s.length=Qt(this.s,0,t,this.a)):qt(this,"XY",null),this.v()},i(oe,Yt),gc=oe.prototype,gc.clone=function(){var t=new oe(null);return t.U(this.X,this.s.slice()),t},gc.ua=function(){return this.s?this.s.slice():[]},gc.Cb=function(t){return lt(this.s,t)},gc.$=function(){return"Point"},gc.ea=function(t,e){t?(Kt(this,e,t,0),this.s||(this.s=[]),this.s.length=Zt(this.s,t),this.v()):this.U("XY",null)},gc.U=function(t,e){qt(this,t,e),this.v()},i(fe,Yt),gc=fe.prototype,gc.Ld=function(t){this.s?O(this.s,t.s):this.s=t.s.slice(),this.f.push(this.s.length),this.v()},gc.clone=function(){var t=new fe(null);return t.U(this.X,this.s.slice(),this.f.slice()),t},gc.ua=function(t){var e;return void 0!==t?(e=ve(this).slice(),ce(e,0,this.f,this.a,t)):e=this.s,ee(e,0,this.f,this.a)},gc.Ta=function(){return this.f},gc.Ua=function(t){var e=[],i=[];return e.length=ne(this.s,0,this.f,this.a,Math.sqrt(t),e,0,i),t=new fe(null),t.U("XY",e,i),t},gc.$=function(){return"Polygon"},gc.ea=function(t,e){if(t){Kt(this,e,t,2),this.s||(this.s=[]);var i=$t(this.s,0,t,this.a,this.f);this.s.length=0===i.length?0:i[i.length-1],this.v()}else this.U("XY",null,this.f)},gc.U=function(t,e,i){qt(this,t,e),this.f=i,this.v()},i(ge,j),gc=ge.prototype,gc.animate=function(t){var e,i=Date.now(),n=this.get(Pc).slice(),r=Me(this),o=this.get(Ec),a=arguments.length;1<a&&"function"==typeof arguments[a-1]&&(e=arguments[a-1],--a);for(var s=[],h=0;h<a;++h){var l=arguments[h],c={start:i,complete:!1,anchor:l.anchor,duration:void 0!==l.duration?l.duration:1e3,easing:l.easing||$};l.center&&(c.vc=n,c.xc=l.center,n=c.xc),void 0!==l.zoom?(c.Pb=r,c.Qb=this.constrainResolution(this.b,l.zoom-this.j,0),r=c.Qb):l.resolution&&(c.Pb=r,c.Qb=l.resolution,r=c.Qb),void 0!==l.rotation&&(c.wc=o,c.rd=l.rotation,o=c.rd),c.Bb=e,i+=c.duration,s.push(c)}this.a.push(s),Ce(this,Fc,1),this.Sb()},gc.Sb=function(){if(void 0!==this.l&&(cancelAnimationFrame(this.l),this.l=void 0),ye(this)){for(var t=Date.now(),e=!1,i=this.a.length-1;0<=i;--i){for(var n=this.a[i],r=!0,o=0,a=n.length;o<a;++o){var s=n[o];if(!s.complete){if(e=t-s.start,e=0<s.duration?e/s.duration:1,1<=e?(s.complete=!0,e=1):r=!1,e=s.easing(e),s.vc){var h=s.vc[0],l=s.vc[1];this.set(Pc,[h+e*(s.xc[0]-h),l+e*(s.xc[1]-l)])}if(s.Pb&&(h=s.Pb+e*(s.Qb-s.Pb),s.anchor&&this.set(Pc,we(this,h,s.anchor)),this.set(Tc,h)),void 0!==s.wc&&(e=s.wc+e*(s.rd-s.wc),s.anchor&&this.set(Pc,be(this,e,s.anchor)),this.set(Ec,e)),e=!0,!s.complete)break}}r&&(this.a[i]=null,Ce(this,Fc,-1),(n=n[0].Bb)&&n(!0))}this.a=this.a.filter(Boolean),e&&void 0===this.l&&(this.l=requestAnimationFrame(this.Sb))}},gc.constrainResolution=function(t,e,i){return this.f.resolution(t,e||0,i||0)},gc.constrainRotation=function(t,e){return this.f.rotation(t,e||0)},gc.Mc=function(t){var e=this.get(Pc);s(e,1);var i=Me(this);s(void 0!==i,2);var n=this.get(Ec);return s(void 0!==n,3),gt(e,i,n,t)},gc.aa=function(){var t=this.get(Pc),e=this.B,i=Me(this),n=this.get(Ec);return{center:t.slice(),projection:void 0!==e?e:null,resolution:i,rotation:n}},gc.Td=function(){var t,e=Me(this);if(void 0!==e&&e>=this.u&&e<=this.b){t=this.j||0;var i,n;if(this.i){if(n=V(this.i,e,1),t+=n,n==this.i.length-1)return t;i=this.i[n],n=i/this.i[n+1]}else i=this.b,n=this.A;t+=Math.log(i/e)/Math.log(n)}return t},gc.rotate=function(t,e){if(void 0!==e){var i=be(this,t,e);Se(this,i)}this.set(Ec,t),ye(this)&&me(this)},gc.ff=function(t){t=this.constrainResolution(this.b,t-this.j,0),Ae(this,t)};var Pc="center",Tc="resolution",Ec="rotation",Fc=0,Dc=[0,0,0];Ee.prototype.M=function(){return this.j},i(ze,j),gc=ze.prototype,gc.clear=function(){for(;0<this.get(jc);)this.pop()},gc.forEach=function(t,e){this.a.forEach(t,e)},gc.item=function(t){return this.a[t]},gc.pop=function(){return Ye(this,this.get(jc)-1)},gc.push=function(t){var e=this.get(jc);return this.a.splice(e,0,t),Je(this),E(this,new qe(Rc,t)),this.get(jc)},gc.remove=function(t){var e,i,n=this.a;for(e=0,i=n.length;e<i;++e)if(n[e]===t)return Ye(this,e)};var jc="length",Rc="add",_c="remove";i(qe,k);var Bc=/^#(?:[0-9a-f]{3}){1,2}$/i,Nc=/^([a-z]*)$/i,Vc=function(){var t={},e=0;return function(i){var n;if(t.hasOwnProperty(i))n=t[i];else{if(1024<=e){n=0;for(var r in t)0===(3&n++)&&(delete t[r],--e)}n=i;var o;if(Nc.exec(n)&&(r=document.createElement("div"),r.style.color=n,document.body.appendChild(r),n=getComputedStyle(r).color,document.body.removeChild(r)),Bc.exec(n)){o=n.length-1,s(3==o||6==o,54);var a=3==o?1:2;o=parseInt(n.substr(1+0*a,a),16),r=parseInt(n.substr(1+1*a,a),16),n=parseInt(n.substr(1+2*a,a),16),1==a&&(o=(o<<4)+o,r=(r<<4)+r,n=(n<<4)+n),o=[o,r,n,1]}else 0==n.indexOf("rgba(")?(n=n.slice(5,-1).split(",").map(Number),o=Qe(n)):0==n.indexOf("rgb(")?(n=n.slice(4,-1).split(",").map(Number),n.push(1),o=Qe(n)):s(!1,14);n=o,t[i]=n,++e}return n}}();i(ii,k),i(ni,j),ni.prototype.Z=function(){ei(this.element),j.prototype.Z.call(this)},ni.prototype.setMap=function(t){this.l&&ei(this.element);for(var e=0,i=this.u.length;e<i;++e)C(this.u[e]);this.u.length=0,(this.l=t)&&((this.G?this.G:t.l).appendChild(this.element),this.render!==n&&this.u.push(M(t,"postrender",this.render,this)),t.render())},i(ri,ni),ri.prototype.P=function(t){if(t.preventDefault(),this.element.classList.toggle("ol-collapsed"),this.f){t=this.j;var e=t.parentNode;e&&e.replaceChild(this.i,t)}else t=this.i,(e=t.parentNode)&&e.replaceChild(this.j,t);this.f=!this.f},i(ai,ni),ai.prototype.j=function(t){t.preventDefault(),void 0!==this.f?this.f():(t=this.l.W())&&void 0!==t.get(Ec)&&(0<this.g?t.animate({rotation:0,duration:this.g,easing:Q}):(t.set(Ec,0),ye(t)&&me(t)))},i(hi,ni),hi.prototype.b=function(t,e){e.preventDefault();var i=this.l.W();if(i){var n=Me(i);n&&(n=i.constrainResolution(n,t),0<this.a?(ye(i)&&me(i),i.animate({resolution:n,duration:this.a,easing:Q})):Ae(i,n))}},i(ci,ii),ci.prototype.preventDefault=function(){ii.prototype.preventDefault.call(this),this.originalEvent.preventDefault()},ci.prototype.stopPropagation=function(){ii.prototype.stopPropagation.call(this),this.originalEvent.stopPropagation()};var Oc={Af:"singleclick",nf:"click",pf:"dblclick",sf:"pointerdrag",vf:"pointermove",rf:"pointerdown",yf:"pointerup",xf:"pointerover",wf:"pointerout",tf:"pointerenter",uf:"pointerleave",qf:"pointercancel"};i(ui,ci);var Uc,Wc=["experimental-webgl","webgl","webkit-3d","moz-webgl"],Gc="undefined"!=typeof navigator?navigator.userAgent.toLowerCase():"",Xc=-1!==Gc.indexOf("firefox"),Hc=-1!==Gc.indexOf("safari")&&-1==Gc.indexOf("chrom"),zc=-1!==Gc.indexOf("webkit")&&-1==Gc.indexOf("edge"),Yc=-1!==Gc.indexOf("macintosh"),Jc=window.devicePixelRatio||1,qc=!1,Kc=function(){if(!("HTMLCanvasElement"in window))return!1;try{var t=document.createElement("CANVAS").getContext("2d");return!!t&&(void 0!==t.setLineDash&&(qc=!0),!0)}catch(t){return!1}}(),Zc="ontouchstart"in window,Qc="PointerEvent"in window,$c=!!navigator.msPointerEnabled,tu=!1,eu=[];if("WebGLRenderingContext"in window)try{var iu=fi(document.createElement("CANVAS"),{failIfMajorPerformanceCaveat:!0});iu&&(tu=!0,eu=iu.getSupportedExtensions())}catch(t){}Uc=tu,yc=eu,i(pi,di),gc=pi.prototype,gc.ne=function(t){if(!vi(this,t)){if(1..toString()in this.c){var e=gi(t);Ri(this.a,"pointercancel",e,t),delete this.c[1..toString()]}e=gi(t),this.c[1..toString()]=t,Ri(this.a,"pointerdown",e,t)}},gc.oe=function(t){if(!vi(this,t)){var e=gi(t);Ri(this.a,"pointermove",e,t)}},gc.re=function(t){if(!vi(this,t)){var e=this.c[1..toString()];e&&e.button===t.button&&(e=gi(t),Ri(this.a,"pointerup",e,t),delete this.c[1..toString()])}},gc.qe=function(t){if(!vi(this,t)){var e=gi(t);ji(this.a,e,t)}},gc.pe=function(t){if(!vi(this,t)){var e=gi(t);Di(this.a,e,t)}},i(yi,di),gc=yi.prototype,gc.we=function(t){this.c[t.pointerId.toString()]=t;var e=mi(this,t);Ri(this.a,"pointerdown",e,t)},gc.xe=function(t){var e=mi(this,t);Ri(this.a,"pointermove",e,t)},gc.Ae=function(t){var e=mi(this,t);Ri(this.a,"pointerup",e,t),delete this.c[t.pointerId.toString()]},gc.ye=function(t){var e=mi(this,t);Di(this.a,e,t)},gc.ze=function(t){var e=mi(this,t);ji(this.a,e,t)},gc.ve=function(t){var e=mi(this,t);Ri(this.a,"pointercancel",e,t),delete this.c[t.pointerId.toString()]},gc.ue=function(t){E(this.a,new wi("lostpointercapture",t,t))},gc.te=function(t){E(this.a,new wi("gotpointercapture",t,t))},i(bi,di),gc=bi.prototype,gc.Qe=function(t){_i(this.a,t)},gc.Re=function(t){_i(this.a,t)},gc.Ue=function(t){_i(this.a,t)},gc.Se=function(t){_i(this.a,t)},gc.Te=function(t){_i(this.a,t)},gc.Pe=function(t){_i(this.a,t)},gc.le=function(t){_i(this.a,t)},gc.Ud=function(t){_i(this.a,t)},i(wi,k);var nu=!1;try{nu=1===new MouseEvent("click",{buttons:1}).buttons}catch(t){}i(Si,di),gc=Si.prototype,gc.od=function(){this.i=0,this.f=void 0},gc.lf=function(t){var e=t.touches,i=Object.keys(this.c),n=i.length;if(n>=e.length){var r,o,a,s=[];for(r=0;r<n;++r){o=i[r],a=this.c[o];var h;if(!(h=1==o))t:{h=e.length;for(var l,c=0;c<h;c++)if(l=e[c],l.identifier===o-2){h=!0;break t}h=!1}h||s.push(a.out)}for(r=0;r<s.length;++r)this.bc(t,s[r])}e=t.changedTouches[0],i=Object.keys(this.c).length,(0===i||1===i&&1..toString()in this.c)&&(this.b=e.identifier,void 0!==this.f&&clearTimeout(this.f)),Ii(this,t),this.i++,Ai(this,t,this.Oe)},gc.Oe=function(t,e){this.c[e.pointerId]={target:e.target,out:e,jd:e.target};var i=this.a;e.bubbles=!0,Ri(i,"pointerover",e,t),i=this.a,e.bubbles=!1,Ri(i,"pointerenter",e,t),Ri(this.a,"pointerdown",e,t)},gc.kf=function(t){t.preventDefault(),Ai(this,t,this.se)},gc.se=function(t,e){var i=this.c[e.pointerId];if(i){var n=i.out,r=i.jd;Ri(this.a,"pointermove",e,t),n&&r!==e.target&&(n.relatedTarget=e.target,e.relatedTarget=r,n.target=r,e.target?(Di(this.a,n,t),ji(this.a,e,t)):(e.target=r,e.relatedTarget=null,this.bc(t,e))),i.out=e,i.jd=e.target}},gc.jf=function(t){Ii(this,t),Ai(this,t,this.mf)},gc.mf=function(t,e){Ri(this.a,"pointerup",e,t),this.a.out(e,t),Fi(this.a,e,t),delete this.c[e.pointerId],e.isPrimary&&(this.b=void 0,this.f=setTimeout(this.od.bind(this),200))},gc.hf=function(t){Ai(this,t,this.bc)},gc.bc=function(t,e){Ri(this.a,"pointercancel",e,t),this.a.out(e,t),Fi(this.a,e,t),delete this.c[e.pointerId],e.isPrimary&&(this.b=void 0,this.f=setTimeout(this.od.bind(this),200))},i(Li,T),Li.prototype.b=function(t){var e=this.f[t.type];e&&e(t)},Li.prototype.out=function(t,e){t.bubbles=!0,Ri(this,"pointerout",t,e)},Li.prototype.Z=function(){for(var t,e=this.a.length,i=0;i<e;i++)t=this.a[i],Ti(this,Object.keys(t.g));T.prototype.Z.call(this)};var ru=[["bubbles",!1],["cancelable",!1],["view",null],["detail",null],["screenX",0],["screenY",0],["clientX",0],["clientY",0],["ctrlKey",!1],["altKey",!1],["shiftKey",!1],["metaKey",!1],["button",0],["relatedTarget",null],["buttons",0],["pointerId",0],["width",0],["height",0],["pressure",0],["tiltX",0],["tiltY",0],["pointerType",""],["hwTimestamp",0],["isPrimary",!1],["type",""],["target",null],["currentTarget",null],["which",0]];i(Bi,T),gc=Bi.prototype,gc.Wc=function(t){Vi(this,t);var e=new ui("pointerup",this.b,t);E(this,e),!this.o&&0===t.button&&Ni(this,this.c),0===this.B&&(this.f.forEach(C),this.f.length=0,this.o=!1,this.c=null,L(this.a),this.a=null)},gc.ce=function(t){Vi(this,t);var e=new ui("pointerdown",this.b,t);E(this,e),this.c=t,0===this.f.length&&(this.a=new Li(document),this.f.push(M(this.a,"pointermove",this.He,this),M(this.a,"pointerup",this.Wc,this),M(this.g,"pointercancel",this.Wc,this)))},gc.He=function(t){if(t.clientX!=this.c.clientX||t.clientY!=this.c.clientY){this.o=!0;var e=new ui("pointerdrag",this.b,t,this.o);E(this,e)}t.preventDefault()},gc.$e=function(t){E(this,new ui(t.type,this.b,t,!(!this.c||t.clientX==this.c.clientX&&t.clientY==this.c.clientY)))},gc.Z=function(){this.l&&(C(this.l),this.l=null),this.j&&(C(this.j),this.j=null),this.f.forEach(C),this.f.length=0,this.a&&(L(this.a),this.a=null),this.g&&(L(this.g),this.g=null),T.prototype.Z.call(this)},i(Oi,T),Oi.prototype.v=function(){E(this,"change")},Oi.prototype.getKey=function(){return this.key+"/"+this.ga},Oi.prototype.aa=function(){return this.state};var ou=2;Wi.prototype.clear=function(){this.a.length=0,this.b.length=0,p(this.c)},Wi.prototype.g=function(t){s(!(this.f(t)in this.c),31);var e=this.l(t);return 1/0!=e&&(this.a.push(t),this.b.push(e),this.c[this.f(t)]=!0,Hi(this,0,this.a.length-1),!0)},i(Yi,Wi),Yi.prototype.g=function(t){var e=Wi.prototype.g.call(this,t);return e&&M(t[0],"change",this.j,this),e},Yi.prototype.j=function(t){t=t.target;var e=t.aa();e!==ou&&3!==e&&4!==e&&5!==e||(S(t,"change",this.j,this),t=t.getKey(),t in this.i&&(delete this.i[t],--this.o),this.u())},i(qi,j),qi.prototype.setMap=function(t){this.V=t};var au="active";i($i,qi),i(hn,qi),hn.prototype.C=function(t){return t},i(un,hn),un.prototype.C=Mt,i(vn,hn),vn.prototype.C=Mt,i(bn,I),bn.prototype.Z=function(){
this.setMap(null)},bn.prototype.setMap=function(t){if(this.a){this.a.u.removeChild(this.c);var e=this.c.style;e.left=e.top=e.width=e.height="inherit"}(this.a=t)&&this.a.u.appendChild(this.c)},bn.prototype.T=function(){return this.f},i(Mn,hn),Mn.prototype.T=function(){return this.a.T()},Mn.prototype.g=n;var su="boxstart",hu="boxdrag",lu="boxend";i(Ln,k),i(kn,Mn),kn.prototype.g=function(){var t=this.V,e=t.W(),i=t.Ya(),n=this.T().M();if(this.u){var r,o,a=e.Mc(i),n=[xs(t,[n[0],n[1]]),xs(t,[n[2],n[3]])],t=ht(void 0);for(r=0,o=n.length;r<o;++r)ft(t,n[r]);t=1/Math.max(bt(t)/i[0],yt(t)/i[1]),n=(a[2]-a[0])/2*(t-1),t=(a[3]-a[1])/2*(t-1),a[0]-=n,a[2]+=n,a[1]-=t,a[3]+=t,n=a}i=e.constrainResolution(Math.max(bt(n)/i[0],yt(n)/i[1])),e.animate({resolution:i,center:vt(n),duration:this.l,easing:Q})},i(Pn,qi),i(En,qi),i(Dn,qi),Dn.prototype.l=function(){this.i=void 0,Ce(this.V.W(),1,-1)},Dn.prototype.u=function(t){t=t.W(),ye(t)&&me(t),Zi(t,-h(this.f,-1,1),this.a,this.B),this.g=void 0,this.f=0,this.a=null,this.j=this.b=void 0};var cu="trackpad",uu="wheel";i(Rn,hn),Rn.prototype.C=Mt,i(Vn,hn),Vn.prototype.C=Mt,i(Xn,j),Xn.prototype.M=function(){return this.get(pu)},Xn.prototype.f=function(){return this.get(du)},Xn.prototype.l=function(t){this.set(du,t)};var fu="opacity",du="visible",pu="extent",vu="zIndex",gu="maxResolution",yu="minResolution";i(zn,Xn),gc=zn.prototype,gc.Hb=function(){this.f()&&this.v()},gc.Zd=function(){this.g.forEach(C),this.g.length=0;var t=this.get(mu);this.g.push(M(t,Rc,this.Yd,this),M(t,_c,this.$d,this));for(var e in this.b)this.b[e].forEach(C);p(this.b);var i,n,t=t.a;for(e=0,i=t.length;e<i;e++)n=t[e],this.b[o(n).toString()]=[M(n,Cc,this.Hb,this),M(n,"change",this.Hb,this)];this.v()},gc.Yd=function(t){t=t.element;var e=o(t).toString();this.b[e]=[M(t,Cc,this.Hb,this),M(t,"change",this.Hb,this)],this.v()},gc.$d=function(t){t=o(t.element).toString(),this.b[t].forEach(C),delete this.b[t],this.v()},gc.ic=function(t){var e=void 0!==t?t:[],i=e.length;this.get(mu).forEach(function(t){t.ic(e)}),t=Hn(this);var n,r;for(n=e.length;i<n;i++)r=e[i],r.opacity*=t.opacity,r.visible=r.visible&&t.visible,r.maxResolution=Math.min(r.maxResolution,t.maxResolution),r.minResolution=Math.max(r.minResolution,t.minResolution),void 0!==t.extent&&(r.extent=void 0!==r.extent?mt(r.extent,t.extent):t.extent);return e},gc.lc=function(){return"ready"};var mu="layers";i(Yn,At);var bu=6378137*Math.PI,wu=[-bu,-bu,bu,bu],xu=[-180,-85,180,85],Mu="EPSG:3857 EPSG:102100 EPSG:102113 EPSG:900913 urn:ogc:def:crs:EPSG:6.18:3:3857 urn:ogc:def:crs:EPSG::3857 http://www.opengis.net/gml/srs/epsg.xml#3857".split(" ").map(function(t){return new Yn(t)}),Su=new St(6378137);i(Kn,At);var Cu=[-180,-90,180,90],Au=Math.PI*Su.radius/180,Iu=[new Kn("CRS:84"),new Kn("EPSG:4326","neu"),new Kn("urn:ogc:def:crs:EPSG::4326","neu"),new Kn("urn:ogc:def:crs:EPSG:6.6:4326","neu"),new Kn("urn:ogc:def:crs:OGC:1.3:CRS84"),new Kn("urn:ogc:def:crs:OGC:2:84"),new Kn("http://www.opengis.net/gml/srs/epsg.xml#4326","neu"),new Kn("urn:x-ogc:def:crs:EPSG:4326","neu")];i(Zn,k),i(Qn,Xn),gc=Qn.prototype,gc.ic=function(t){return t=t?t:[],t.push(Hn(this)),t},gc.oa=function(){return this.get("source")||null},gc.lc=function(){var t=this.oa();return t?t.aa():"undefined"},gc.Je=function(){this.v()},gc.he=function(){this.j&&(C(this.j),this.j=null);var t=this.oa();t&&(this.j=M(t,"change",this.Je,this)),this.v()},gc.setMap=function(t){this.b&&(C(this.b),this.b=null),t||this.v(),this.g&&(C(this.g),this.g=null),t&&(this.b=M(t,"precompose",function(t){var e=Hn(this);e.Jb=!1,e.zIndex=1/0,t.frameState.layerStatesArray.push(e),t.frameState.layerStates[o(this)]=e},this),this.g=M(this,"change",t.render,t),this.v())},tr.prototype.clear=function(){this.a={},this.c=0},tr.prototype.get=function(t,e,i){return t=e+":"+t+":"+(i?Ze(i):"null"),t in this.a?this.a[t]:null},tr.prototype.set=function(t,e,i,n){this.a[e+":"+t+":"+(i?Ze(i):"null")]=n,++this.c};var Lu=new tr,ku=Array(6);i(lr,I),gc=lr.prototype,gc.Z=function(){for(var t in this.b)L(this.b[t])},gc.na=function(t,e,i,n,r,a,s){function h(t,i){var a=o(t).toString(),s=e.layerStates[o(i)].Jb;if(!(a in e.skippedFeatureUids)||s)return n.call(r,t,s?i:null)}var l,c=e.viewState,u=c.resolution,f=c.projection,c=t;if(f.c){var f=f.M(),d=bt(f),p=t[0];(p<f[0]||p>f[2])&&(c=[p+d*Math.ceil((f[0]-p)/d),t[1]])}for(f=e.layerStatesArray,d=f.length-1;0<=d;--d){var v=f[d],p=v.layer;if($n(v,u)&&a.call(s,p)&&(v=fr(this,p),p.oa()&&(l=v.na(p.oa().u?c:t,e,i,h,r)),l))return l}},gc.Xd=function(){this.j.render()},gc.uc=n,gc.bf=function(t,e){for(var i in this.b)if(!(e&&i in e.layerStates)){var n=i,r=this.b[n];delete this.b[n],C(this.u[n]),delete this.u[n],L(r)}},i(vr,Qn);var Pu="preload",Tu="useInterimTilesOnError",Eu=[0,0,0,1],Fu=[],Du=[0,0,0,1];i(mr,yr),gc=mr.prototype,gc.clone=function(){var t=new mr({fill:this.f?this.f.clone():void 0,points:this.g!==this.c?this.a/2:this.a,radius:this.c,radius2:this.g,angle:this.l,snapToPixel:this.B,stroke:this.b?this.b.clone():void 0,rotation:this.u,rotateWithView:this.F,atlasManager:this.C});return t.j=this.j,t.o=this.o,t},gc.pb=function(){return this.G},gc.pc=function(){return this.A},gc.rb=function(){return this.D},gc.hc=function(){return this.L},gc.Lb=function(){return 2},gc.sb=function(){return this.Y},gc.Ma=function(){return this.P},gc.Yc=n,gc.load=n,gc.sd=n,gc.Rc=function(t,e,i,n){var r;if(e.setTransform(1,0,0,1,0,0),e.translate(i,n),e.beginPath(),1/0===this.a)e.arc(t.size/2,t.size/2,this.c,0,2*Math.PI,!0);else for(this.g!==this.c&&(this.a*=2),i=0;i<=this.a;i++)n=2*i*Math.PI/this.a-Math.PI/2+this.l,r=0===i%2?this.c:this.g,e.lineTo(t.size/2+r*Math.cos(n),t.size/2+r*Math.sin(n));this.f&&(e.fillStyle=$e(this.f.a),e.fill()),this.b&&(e.strokeStyle=t.strokeStyle,e.lineWidth=t.qd,t.lineDash&&e.setLineDash(t.lineDash),e.lineCap=t.lineCap,e.lineJoin=t.lineJoin,e.miterLimit=t.miterLimit,e.stroke()),e.closePath()},gc.Qc=function(t,e,i,n){if(e.setTransform(1,0,0,1,0,0),e.translate(i,n),e.beginPath(),1/0===this.a)e.arc(t.size/2,t.size/2,this.c,0,2*Math.PI,!0);else{this.g!==this.c&&(this.a*=2);var r;for(i=0;i<=this.a;i++)r=2*i*Math.PI/this.a-Math.PI/2+this.l,n=0===i%2?this.c:this.g,e.lineTo(t.size/2+n*Math.cos(r),t.size/2+n*Math.sin(r))}e.fillStyle=Eu,e.fill(),this.b&&(e.strokeStyle=t.strokeStyle,e.lineWidth=t.qd,t.lineDash&&e.setLineDash(t.lineDash),e.stroke()),e.closePath()},i(br,mr),br.prototype.clone=function(){var t=new br({fill:this.f?this.f.clone():void 0,stroke:this.b?this.b.clone():void 0,radius:this.c,snapToPixel:this.B,atlasManager:this.C});return t.j=this.j,t.o=this.o,t},wr.prototype.clone=function(){var t=this.a;return new wr({color:t&&t.slice?t.slice():t||void 0})},xr.prototype.clone=function(){var t=this.a;return new xr({color:t&&t.slice?t.slice():t||void 0,lineCap:this.f,lineDash:this.c?this.c.slice():void 0,lineJoin:this.g,miterLimit:this.i,width:this.b})},xr.prototype.setLineDash=function(t){this.c=t,this.o=void 0},Mr.prototype.clone=function(){var t=this.T();return t&&t.clone&&(t=t.clone()),new Mr({geometry:t,fill:this.b?this.b.clone():void 0,image:this.f?this.f.clone():void 0,stroke:this.c?this.c.clone():void 0,text:this.ha()?this.ha().clone():void 0,zIndex:this.a})},Mr.prototype.T=function(){return this.i},Mr.prototype.ha=function(){return this.o},Mr.prototype.Da=function(t){"function"==typeof t?this.g=t:"string"==typeof t?this.g=function(e){return e.get(t)}:t?t&&(this.g=function(){return t}):this.g=Ir,this.i=t};var ju=null;i(Lr,Qn),i(Pr,kr),gc=Pr.prototype,gc.Ra=function(t){if(wt(this.o,t.M())){if(this.c||this.a){this.c&&jr(this,this.c),this.a&&Rr(this,this.a);var e;e=this.A;var i=this.F,n=t.s;e=n?Ht(n,0,n.length,t.a,e,i):null,i=e[2]-e[0],n=e[3]-e[1],i=Math.sqrt(i*i+n*n),n=this.f,n.beginPath(),n.arc(e[0],e[1],i,0,2*Math.PI),this.c&&n.fill(),this.a&&n.stroke()}""!==this.b&&Er(this,t.s.slice(0,t.a),2,2)}},gc.cd=function(t){this.fa(t.b,t.c),this.Ea(t.f),this.Ca(t.ha())},gc.mb=function(t){var e=t.s;t=t.a,this.g&&Tr(this,e,e.length),""!==this.b&&Er(this,e,e.length,t)},gc.kb=function(t){var e=t.s;t=t.a,this.g&&Tr(this,e,e.length),""!==this.b&&Er(this,e,e.length,t)},gc.ib=function(t){if(wt(this.o,t.M())){if(this.a){Rr(this,this.a);var e=this.f,i=t.s;e.beginPath(),Fr(this,i,0,i.length,t.a,!1),e.stroke()}""!==this.b&&(t=eh(t),Er(this,t,2,2))}},gc.jb=function(t){var e=t.M();if(wt(this.o,e)){if(this.a){Rr(this,this.a);var e=this.f,i=t.s,n=0,r=t.Ta(),o=t.a;e.beginPath();var a,s;for(a=0,s=r.length;a<s;++a)n=Fr(this,i,n,r[a],o,!1);e.stroke()}""!==this.b&&(t=rh(t),Er(this,t,t.length,2))}},gc.nb=function(t){if(wt(this.o,t.M())){if(this.a||this.c){this.c&&jr(this,this.c),this.a&&Rr(this,this.a);var e=this.f;e.beginPath(),Dr(this,ve(t),0,t.Ta(),t.a),this.c&&e.fill(),this.a&&e.stroke()}""!==this.b&&(t=de(t),Er(this,t,2,2))}},gc.lb=function(t){if(wt(this.o,t.M())){if(this.a||this.c){this.c&&jr(this,this.c),this.a&&Rr(this,this.a);var e,i,n=this.f,r=lh(t),o=0,a=t.f,s=t.a;for(n.beginPath(),e=0,i=a.length;e<i;++e)o=Dr(this,r,o,a[e],s);this.c&&n.fill(),this.a&&n.stroke()}""!==this.b&&(t=hh(t),Er(this,t,t.length,2))}},gc.fa=function(t,e){if(t){var i=t.a;this.c={fillStyle:$e(i?i:Eu)}}else this.c=null;if(e){var i=e.a,n=e.f,r=e.c,o=e.g,a=e.b,s=e.i;this.a={lineCap:void 0!==n?n:"round",lineDash:r?r:Fu,lineJoin:void 0!==o?o:"round",lineWidth:this.B*(void 0!==a?a:1),miterLimit:void 0!==s?s:10,strokeStyle:$e(i?i:Du)}}else this.a=null},gc.Ea=function(t){if(t){var e=t.pb(),i=t.rb(1),n=t.sb(),r=t.Ma();this.C=e[0],this.G=e[1],this.L=r[1],this.g=i,this.D=t.j,this.ba=n[0],this.ca=n[1],this.xa=t.F,this.ia=t.u,this.i=t.o,this.sa=t.B,this.Y=r[0]}else this.g=null},gc.Ca=function(t){if(t){var e=t.a;e?(e=e.a,this.j={fillStyle:$e(e?e:Eu)}):this.j=null;var i=t.b;if(i){var e=i.a,n=i.f,r=i.c,o=i.g,a=i.b,i=i.i;this.u={lineCap:void 0!==n?n:"round",lineDash:r?r:Fu,lineJoin:void 0!==o?o:"round",lineWidth:void 0!==a?a:1,miterLimit:void 0!==i?i:10,strokeStyle:$e(e?e:Du)}}else this.u=null;var e=t.f,n=t.g,r=t.i,o=t.o,a=t.j,i=t.c,s=t.ha(),h=t.l;t=t.u,this.P={font:void 0!==e?e:"10px sans-serif",textAlign:void 0!==h?h:"center",textBaseline:void 0!==t?t:"middle"},this.b=void 0!==s?s:"",this.ta=void 0!==n?this.B*n:0,this.za=void 0!==r?this.B*r:0,this.Aa=void 0!==o&&o,this.Ba=void 0!==a?a:0,this.l=this.B*(void 0!==i?i:1)}else this.b=""},i(_r,D),_r.prototype.na=n,_r.prototype.j=function(t,e,i){return function(n,r){return oc(t,e,n,r,function(t){i[n]||(i[n]={}),i[n][t.ga.toString()]=t})}},i(Gr,_r),Gr.prototype.L=function(t,e,i){Hr(this,"postcompose",t,e,i)},i(Yr,Gr),Yr.prototype.o=function(t,e,i){Hr(this,"precompose",i,t,void 0);var n=this.i.canvas;if(n){var r=e.extent,o=void 0!==r;o&&Xr(i,t,r);var r=this.u,a=i.globalAlpha;i.globalAlpha=e.opacity,i.drawImage(n,0,0,+n.width,+n.height,Math.round(r[4]),Math.round(r[5]),Math.round(n.width*r[0]),Math.round(n.height*r[3])),i.globalAlpha=a,o&&i.restore()}this.L(i,t)},Yr.prototype.na=function(t,e,i,n,r){var o=this.a;return o.oa().na(t,e.viewState.resolution,e.viewState.rotation,i,e.skippedFeatureUids,function(t){return n.call(r,t,o)})},i(Jr,Yr),Jr.prototype.l=function(t,e){var i=t.pixelRatio,n=t.size,r=t.viewState,o=r.projection,a=r.resolution,r=r.center,s=this.a,h=s.oa(),l=h.c,c=h.Ga(o),u=Ue(c,a,0),f=c.a[u],d=t.extent;if(void 0!==e.extent&&(d=mt(d,e.extent)),d[2]<d[0]||d[3]<d[1])return!1;var p,v=Re(c,d,f),g=De(c,u);p=c.a[u];var y=Te(Oe(c,u),c.o);p=st(g[0]+v.K*y[0]*p,g[1]+v.N*y[1]*p,g[0]+(v.J+1)*y[0]*p,g[1]+(v.R+1)*y[1]*p,void 0),g=h.i,y={},y[u]={};var m,b,w,x=this.j(h,o,y),M=s.get(Tu),S=this.V,C=this.ba,A=!1;for(b=v.K;b<=v.J;++b)for(w=v.N;w<=v.R;++w){m=dc(h,u,b,w,i,o);var I=m.aa();I==ou||4==I||3==I&&!M?I==ou&&(y[u][m.ga.toString()]=m,A||-1!=this.g.indexOf(m)||(A=!0)):(m=Ui(m),Fe(c,m.ga,x,C,S)||(m=je(c,m.ga,C,S))&&x(u+1,m))}if(b=t.viewHints,!(this.f&&16<Date.now()-t.time&&(b[Fc]||b[1])||!A&&this.b&&ct(this.b,p)&&this.G==l)){m=ac(h,u,o),b=(v.J-v.K+1)*m[0],m=(v.R-v.N+1)*m[0],A=this.i,w=A.canvas,x=h.jc(o),w.width!=b||w.height!=m?(w.width=b,w.height=m):A.clearRect(0,0,b,m),this.g.length=0,M=Object.keys(y).map(Number),M.sort(N);var L,k,P,T,E,F,I=0;for(k=M.length;I<k;++I){b=M[I],C=ac(h,b,o),m=c.a[b],L=m/f,P=g*h.gc(o),T=y[b];for(var D in T)m=T[D],w=Ne(c,m.ga,S),b=(w[0]-p[0])/f*g,w=(p[3]-w[3])/f*g,E=C[0]*L,F=C[1]*L,x||A.clearRect(b,w,E,F),this.C(m,b,w,E,F,P),this.g.push(m)}this.G=l,this.f=f,this.b=p}return D=i/g*this.f/a,D=hr(this.u,i*n[0]/2,i*n[1]/2,D,D,0,g*(this.b[0]-r[0])/this.f,g*(r[1]-this.b[3])/this.f),hr(this.A,i*n[0]/2-D[4],i*n[1]/2-D[5],i/a,-i/a,0,-r[0],-r[1]),Ur(t.usedTiles,h,u,v),Wr(t,h,c,i,o,d,u,s.get(Pu)),Nr(t,h),Or(t,h),0<this.g.length},Jr.prototype.C=function(t,e,i,n,r,o){(t=t.Za())&&this.i.drawImage(t,o,o,t.width-2*o,t.height-2*o,e,i,n,r)},i(Kr,kr),Kr.prototype.g=function(t,e,i,n,r){to(this,t,e,i,n,r,this.c,void 0,void 0)},Kr.prototype.Kb=n,Kr.prototype.fc=function(){return this.ja},i(no,Kr),no.prototype.mb=function(t,e){if(this.j){Qr(this,e);var i=t.s,n=this.coordinates.length,i=Zr(this,i,0,i.length,t.a,!1,!1);this.c.push([4,n,i,this.j,this.b,this.i,this.o,this.l,this.u,this.D,this.F,this.B,this.A,this.C,this.G]),this.a.push([4,n,i,this.P,this.b,this.i,this.o,this.l,this.u,this.D,this.F,this.B,this.A,this.C,this.G]),io(this,e)}},no.prototype.kb=function(t,e){if(this.j){Qr(this,e);var i=t.s,n=this.coordinates.length,i=Zr(this,i,0,i.length,t.a,!1,!1);this.c.push([4,n,i,this.j,this.b,this.i,this.o,this.l,this.u,this.D,this.F,this.B,this.A,this.C,this.G]),this.a.push([4,n,i,this.P,this.b,this.i,this.o,this.l,this.u,this.D,this.F,this.B,this.A,this.C,this.G]),io(this,e)}},no.prototype.Kb=function(){eo(this),this.i=this.b=void 0,this.j=this.P=null,this.G=this.C=this.B=this.F=this.D=this.u=this.l=this.A=this.o=void 0},no.prototype.Ea=function(t){var e=t.pb(),i=t.Ma(),n=t.pc(1),r=t.rb(1),o=t.sb();this.b=e[0],this.i=e[1],this.P=n,this.j=r,this.o=i[1],this.l=t.j,this.u=o[0],this.D=o[1],this.F=t.F,this.B=t.u,this.A=t.o,this.C=t.B,this.G=i[0]},i(ro,Kr),gc=ro.prototype,gc.fc=function(){return this.i||(this.i=nt(this.ja),0<this.f&&it(this.i,this.resolution*(this.f+1)/2,this.i)),this.i},gc.ib=function(t,e){var i=this.b,n=i.lineWidth;void 0!==i.strokeStyle&&void 0!==n&&(ao(this),Qr(this,e),this.a.push([10,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,i.lineDash,!0,1],[1]),i=t.s,oo(this,i,0,i.length,t.a),this.a.push([12]),io(this,e))},gc.jb=function(t,e){var i=this.b,n=i.lineWidth;if(void 0!==i.strokeStyle&&void 0!==n){ao(this),Qr(this,e),this.a.push([10,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,i.lineDash,!0,1],[1]);var r,o,i=t.Ta(),n=t.s,a=t.a,s=0;for(r=0,o=i.length;r<o;++r)s=oo(this,n,s,i[r],a);this.a.push([12]),io(this,e)}},gc.Kb=function(){this.b.oc!=this.coordinates.length&&this.c.push([12]),eo(this),this.b=null},gc.fa=function(t,e){var i=e.a;this.b.strokeStyle=$e(i?i:Du),i=e.f,this.b.lineCap=void 0!==i?i:"round",i=e.c,this.b.lineDash=i?i:Fu,i=e.g,this.b.lineJoin=void 0!==i?i:"round",i=e.b,this.b.lineWidth=void 0!==i?i:1,i=e.i,this.b.miterLimit=void 0!==i?i:10,this.b.lineWidth>this.f&&(this.f=this.b.lineWidth,this.i=null)},i(so,Kr),gc=so.prototype,gc.Ra=function(t,e){var i=this.b,n=i.strokeStyle;if(void 0!==i.fillStyle||void 0!==n){lo(this,t),Qr(this,e),this.a.push([9,Ze(Eu)]),void 0!==i.strokeStyle&&this.a.push([10,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,i.lineDash,!0,1]);var r=t.s,n=this.coordinates.length;Zr(this,r,0,r.length,t.a,!1,!1),r=[1],n=[2,n],this.c.push(r,n),this.a.push(r,n),n=[7],this.a.push(n),void 0!==i.fillStyle&&this.c.push(n),void 0!==i.strokeStyle&&(i=[12],this.c.push(i),this.a.push(i)),io(this,e)}},gc.nb=function(t,e){var i=this.b;lo(this,t),Qr(this,e),this.a.push([9,Ze(Eu)]),void 0!==i.strokeStyle&&this.a.push([10,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,i.lineDash,!0,1]);var i=t.Ta(),n=ve(t);ho(this,n,0,i,t.a),io(this,e)},gc.lb=function(t,e){var i=this.b,n=i.strokeStyle;if(void 0!==i.fillStyle||void 0!==n){lo(this,t),Qr(this,e),this.a.push([9,Ze(Eu)]),void 0!==i.strokeStyle&&this.a.push([10,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,i.lineDash,!0,1]);var r,o,i=t.f,n=lh(t),a=t.a,s=0;for(r=0,o=i.length;r<o;++r)s=ho(this,n,s,i[r],a);io(this,e)}},gc.Kb=function(){eo(this),this.b=null;var t=this.ia;if(0!==t){var e,i,n=this.coordinates;for(e=0,i=n.length;e<i;++e)n[e]=t*Math.round(n[e]/t)}},gc.fc=function(){return this.i||(this.i=nt(this.ja),0<this.f&&it(this.i,this.resolution*(this.f+1)/2,this.i)),this.i},gc.fa=function(t,e){var i=this.b;if(t){var n=t.a;i.fillStyle=$e(n?n:Eu)}else i.fillStyle=void 0;e?(n=e.a,i.strokeStyle=$e(n?n:Du),n=e.f,i.lineCap=void 0!==n?n:"round",n=e.c,i.lineDash=n?n.slice():Fu,n=e.g,i.lineJoin=void 0!==n?n:"round",n=e.b,i.lineWidth=void 0!==n?n:1,n=e.i,i.miterLimit=void 0!==n?n:10,i.lineWidth>this.f&&(this.f=i.lineWidth,this.i=null)):(i.strokeStyle=void 0,i.lineCap=void 0,i.lineDash=null,i.lineJoin=void 0,i.lineWidth=void 0,i.miterLimit=void 0)},i(co,Kr),co.prototype.Ca=function(t){if(t){var e=t.a;e?(e=e.a,e=$e(e?e:Eu),this.b?this.b.fillStyle=e:this.b={fillStyle:e}):this.b=null;var i=t.b;if(i){var e=i.a,n=i.f,r=i.c,o=i.g,a=i.b,i=i.i,n=void 0!==n?n:"round",r=r?r.slice():Fu,o=void 0!==o?o:"round",a=void 0!==a?a:1,i=void 0!==i?i:10,e=$e(e?e:Du);if(this.i){var s=this.i;s.lineCap=n,s.lineDash=r,s.lineJoin=o,s.lineWidth=a,s.miterLimit=i,s.strokeStyle=e}else this.i={lineCap:n,lineDash:r,lineJoin:o,lineWidth:a,miterLimit:i,strokeStyle:e}}else this.i=null;var h=t.f,e=t.g,n=t.i,r=t.o,a=t.j,i=t.c,o=t.ha(),s=t.l,l=t.u;t=void 0!==h?h:"10px sans-serif",s=void 0!==s?s:"center",l=void 0!==l?l:"middle",this.o?(h=this.o,h.font=t,h.textAlign=s,h.textBaseline=l):this.o={font:t,textAlign:s,textBaseline:l},this.j=void 0!==o?o:"",this.l=void 0!==e?e:0,this.u=void 0!==n?n:0,this.D=void 0!==r&&r,this.F=void 0!==a?a:0,this.B=void 0!==i?i:1}else this.j=""};var Ru=["Polygon","Circle","LineString","Image","Text"];i(fo,qr);var _u={0:[[!0]]};fo.prototype.na=function(t,e,i,n,r,o){n=Math.round(n);var a=2*n+1,s=hr(this.j,n+.5,n+.5,1/e,-1/e,-i,-t[0],-t[1]),h=this.o;h.canvas.width!==a||h.canvas.height!==a?(h.canvas.width=a,h.canvas.height=a):h.clearRect(0,0,a,a);var l;void 0!==this.i&&(l=at(),ft(l,t),it(l,e*(this.i+n),l));var c=vo(n);return yo(this,h,s,i,r,function(t){for(var e=h.getImageData(0,0,a,a).data,i=0;i<a;i++)for(var n=0;n<a;n++)if(c[i][n]&&0<e[4*(n*a+i)+3])return(t=o(t))?t:void h.clearRect(0,0,a,a)},l)},fo.prototype.a=function(t,e){var i=void 0!==t?t.toString():"0",n=this.c[i];return void 0===n&&(n={},this.c[i]=n),i=n[e],void 0===i&&(i=new Bu[e](this.D,this.f,this.u,this.l),n[e]=i),i},fo.prototype.b=function(){return g(this.c)},fo.prototype.g=function(t,e,i,n,r,o){var a=Object.keys(this.c).map(Number);a.sort(N);var s=this.f,h=s[0],l=s[1],c=s[2],s=s[3],h=[h,l,h,s,c,s,c,l];Ht(h,0,8,2,i,h),t.save(),t.beginPath(),t.moveTo(h[0],h[1]),t.lineTo(h[2],h[3]),t.lineTo(h[4],h[5]),t.lineTo(h[6],h[7]),t.clip(),o=o?o:Ru;for(var u,f,h=0,l=a.length;h<l;++h)for(u=this.c[a[h].toString()],c=0,s=o.length;c<s;++c)f=u[o[c]],void 0!==f&&f.g(t,e,i,n,r);t.restore()};var Bu={Circle:so,Image:no,LineString:ro,Polygon:so,Text:co},Nu={Point:function(t,e,i,n){var r=i.f;if(r){if(2!=r.Lb())return;var o=t.a(i.a,"Image");o.Ea(r),o.mb(e,n)}(r=i.ha())&&(t=t.a(i.a,"Text"),t.Ca(r),uo(t,e.s,2,2,n))},LineString:function(t,e,i,n){var r=i.c;if(r){var o=t.a(i.a,"LineString");o.fa(null,r),o.ib(e,n)}(r=i.ha())&&(t=t.a(i.a,"Text"),t.Ca(r),uo(t,eh(e),2,2,n))},Polygon:function(t,e,i,n){var r=i.b,o=i.c;if(r||o){var a=t.a(i.a,"Polygon");a.fa(r,o),a.nb(e,n)}(r=i.ha())&&(t=t.a(i.a,"Text"),t.Ca(r),uo(t,de(e),2,2,n))},MultiPoint:function(t,e,i,n){var r=i.f;if(r){if(2!=r.Lb())return;var o=t.a(i.a,"Image");o.Ea(r),o.kb(e,n)}(r=i.ha())&&(t=t.a(i.a,"Text"),t.Ca(r),i=e.s,uo(t,i,i.length,e.a,n))},MultiLineString:function(t,e,i,n){var r=i.c;if(r){var o=t.a(i.a,"LineString");o.fa(null,r),o.jb(e,n)}(r=i.ha())&&(t=t.a(i.a,"Text"),t.Ca(r),e=rh(e),uo(t,e,e.length,2,n))},MultiPolygon:function(t,e,i,n){var r=i.b,o=i.c;if(o||r){var a=t.a(i.a,"Polygon");a.fa(r,o),a.lb(e,n)}(r=i.ha())&&(t=t.a(i.a,"Text"),t.Ca(r),e=hh(e),uo(t,e,e.length,2,n))},GeometryCollection:function(t,e,i,n){e=e.b;var r,o;for(r=0,o=e.length;r<o;++r)(0,Nu[e[r].$()])(t,e[r],i,n)},Circle:function(t,e,i,n){var r=i.b,o=i.c;if(r||o){var a=t.a(i.a,"Circle");a.fa(r,o),a.Ra(e,n)}(r=i.ha())&&(t=t.a(i.a,"Text"),t.Ca(r),uo(t,e.s.slice(0,e.a),2,2,n))}};i(xo,Gr),xo.prototype.o=function(t,e,i){var n=t.extent,r=t.pixelRatio,o=e.Jb?t.skippedFeatureUids:{},a=t.viewState,s=a.projection,a=a.rotation,h=s.M(),l=this.a.oa(),c=zr(this,t,0);Hr(this,"precompose",i,t,c);var u=e.extent,f=void 0!==u;if(f&&Xr(i,t,u),(u=this.f)&&!u.b()){var d,p=0,v=0;if(F(this.a,"render")){d=i.canvas.width;var g=i.canvas.height;if(a){var y=Math.round(Math.sqrt(d*d+g*g)),p=(y-d)/2,v=(y-g)/2;d=g=y}this.g.canvas.width=d,this.g.canvas.height=g,d=this.g}else d=i;if(g=d.globalAlpha,d.globalAlpha=e.opacity,d!=i&&d.translate(p,v),e=t.size[0]*r,y=t.size[1]*r,gr(d,-a,e/2,y/2),u.g(d,r,c,a,o),l.u&&s.c&&!rt(h,n)){for(var s=n[0],l=bt(h),m=0;s<h[0];)--m,c=l*m,c=zr(this,t,c),u.g(d,r,c,a,o),s+=l;for(m=0,s=n[2];s>h[2];)++m,c=l*m,c=zr(this,t,c),u.g(d,r,c,a,o),s-=l;c=zr(this,t,0)}gr(d,a,e/2,y/2),d!=i&&(Hr(this,"render",d,t,c),i.drawImage(d.canvas,-p,-v),d.translate(-p,-v)),d.globalAlpha=g}f&&i.restore(),this.L(i,t,c)},xo.prototype.na=function(t,e,i,n,r){if(this.f){var a=this.a,s={};return this.f.na(t,e.viewState.resolution,e.viewState.rotation,i,{},function(t){var e=o(t).toString();if(!(e in s))return s[e]=!0,n.call(r,t,a)})}},xo.prototype.G=function(){Br(this)},xo.prototype.l=function(t){function e(t){var e,n=t.g;if(n?e=n.call(t,l):(n=i.u)&&(e=n(t,l)),e){if(e){if(n=!1,Array.isArray(e))for(var r=0,o=e.length;r<o;++r)n=wo(f,t,e[r],bo(l,c),this.G,this)||n;else n=wo(f,t,e,bo(l,c),this.G,this)||n;t=n}else t=!1;this.b=this.b||t}}var i=this.a,n=i.oa();Vr(t.attributions,n.B),Or(t,n);var r=t.viewHints[Fc],o=t.viewHints[1],a=i.A,s=i.C;if(!this.b&&!a&&r||!s&&o)return!0;var h=t.extent,s=t.viewState,r=s.projection,l=s.resolution,c=t.pixelRatio,o=i.c,u=i.i,a=i.get("renderOrder");if(void 0===a&&(a=mo),h=it(h,u*l),u=s.projection.M(),n.u&&s.projection.c&&!rt(u,t.extent)&&(t=Math.max(bt(h)/2,bt(u)),h[0]=u[0]-t,h[2]=u[2]+t),!this.b&&this.A==l&&this.C==o&&this.u==a&&rt(this.i,h))return!0;this.f=null,this.b=!1;var f=new fo(.5*l/c,h,l,n.ba,i.i);if(jl(n,h,l,r),a){var d=[];Dl(n,h,function(t){d.push(t)},this),d.sort(a),d.forEach(e,this)}else Dl(n,h,e,this);return go(f),this.A=l,this.C=o,this.u=a,this.i=h,this.f=f,!0},i(Mo,lr),Mo.prototype.Oc=function(t){return t instanceof vr?new Jr(t):t instanceof Lr?new xo(t):null},Mo.prototype.$=function(){return"canvas"},Mo.prototype.uc=function(t){if(t){var e=this.f,i=t.pixelRatio,n=Math.round(t.size[0]*i),i=Math.round(t.size[1]*i);this.a.width!=n||this.a.height!=i?(this.a.width=n,this.a.height=i):e.clearRect(0,0,n,i);var r=t.viewState.rotation;cr(t),So(this,"precompose",t);var o=t.layerStatesArray;W(o),gr(e,r,n/2,i/2);var a,s,h,l,c=t.viewState.resolution;for(a=0,s=o.length;a<s;++a)l=o[a],h=l.layer,h=fr(this,h),$n(l,c)&&"ready"==l.pd&&h.l(t,l)&&h.o(t,l,e);gr(e,-r,n/2,i/2),So(this,"postcompose",t),this.c||(this.a.style.display="",this.c=!0),dr(this,t),t.postRenderFunctions.push(ur)}else this.c&&(this.a.style.display="none",this.c=!1)};var Vu=[0,0,0,1],Ou=[],Uu=[0,0,0,1],Wu=Number.EPSILON||2.220446049250313e-16;i(Io,Ao),Io.prototype.$=function(){return 35632},i(Lo,Ao),Lo.prototype.$=function(){return 35633},i(ko,Io);var Gu=new ko;i(Po,Lo);var Xu=new Po;i(Do,kr),Do.prototype.g=function(t,e,i,n,r,o,a,s,h,l,c){var u,f,d,p,v,g,y,m,b=t.a;this.o&&(u=b.isEnabled(b.STENCIL_TEST),f=b.getParameter(b.STENCIL_FUNC),d=b.getParameter(b.STENCIL_VALUE_MASK),p=b.getParameter(b.STENCIL_REF),v=b.getParameter(b.STENCIL_WRITEMASK),g=b.getParameter(b.STENCIL_FAIL),y=b.getParameter(b.STENCIL_PASS_DEPTH_PASS),m=b.getParameter(b.STENCIL_PASS_DEPTH_FAIL),b.enable(b.STENCIL_TEST),b.clear(b.STENCIL_BUFFER_BIT),b.stencilMask(255),b.stencilFunc(b.ALWAYS,1,255),b.stencilOp(b.KEEP,b.KEEP,b.REPLACE),this.o.g(t,e,i,n,r,o,a,s,h,l,c),b.stencilMask(0),b.stencilFunc(b.NOTEQUAL,1,255)),Wo(t,34962,this.u),Wo(t,34963,this.l),o=this.Nb(b,t,r,o);var w=ir(this.Ba);nr(w,rr(ku,2/(i*r[0]),0,0,2/(i*r[1]),0,0)),sr(w,-n),nr(w,rr(ku,1,0,0,1,-(e[0]-this.origin[0]),-(e[1]-this.origin[1]))),e=ir(this.Aa),nr(e,rr(ku,2/r[0],0,0,2/r[1],0,0)),r=ir(this.za),0!==n&&sr(r,-n),b.uniformMatrix4fv(o.b,!1,Fo(this.sa,w)),b.uniformMatrix4fv(o.g,!1,Fo(this.sa,e)),b.uniformMatrix4fv(o.f,!1,Fo(this.sa,r)),b.uniform1f(o.c,a);var x;return void 0===h?this.ob(b,t,s,!1):(l?t=this.Db(b,t,s,h,c):(b.clear(b.COLOR_BUFFER_BIT|b.DEPTH_BUFFER_BIT),this.ob(b,t,s,!0),t=(t=h(null))?t:void 0),x=t),this.Ob(b,o),this.o&&(u||b.disable(b.STENCIL_TEST),b.clear(b.STENCIL_BUFFER_BIT),b.stencilFunc(f,p,d),b.stencilMask(v),b.stencilOp(g,m,y)),x};var Hu=35044;i(_o,Do),gc=_o.prototype,gc.Ra=function(t,e){var i=t.f(),n=t.a;if(i){this.b.push(this.a.length),this.i.push(e),this.f.v&&(this.F.push(this.a.length),this.f.v=!1),this.B=i;var r,i=t.s,i=zt(i,2,n,-this.origin[0],-this.origin[1]),o=this.c.length,a=this.a.length,s=o/4;for(r=0;2>r;r+=n)this.c[o++]=i[r],this.c[o++]=i[r+1],this.c[o++]=0,this.c[o++]=this.B,this.c[o++]=i[r],this.c[o++]=i[r+1],this.c[o++]=1,this.c[o++]=this.B,this.c[o++]=i[r],this.c[o++]=i[r+1],this.c[o++]=2,this.c[o++]=this.B,this.c[o++]=i[r],this.c[o++]=i[r+1],this.c[o++]=3,this.c[o++]=this.B,this.a[a++]=s,this.a[a++]=s+1,this.a[a++]=s+2,this.a[a++]=s+2,this.a[a++]=s+3,this.a[a++]=s,s+=4}else this.f.v&&(this.j.pop(),this.j.length&&(n=this.j[this.j.length-1],this.f.fillColor=n[0],this.f.strokeColor=n[1],this.f.lineWidth=n[2],this.f.v=!1))},gc.va=function(){this.u=new Ro(this.c),this.l=new Ro(this.a),this.b.push(this.a.length),0===this.F.length&&0<this.j.length&&(this.j=[]),this.a=this.c=null},gc.wa=function(t){var e=this.u,i=this.l;return function(){Go(t,e),Go(t,i)}},gc.Nb=function(t,e,i,n){var r,o=zo(e,Gu,Xu);return this.D?r=this.D:this.D=r=new To(t,o),Yo(e,o),t.enableVertexAttribArray(r.a),t.vertexAttribPointer(r.a,2,5126,!1,16,0),t.enableVertexAttribArray(r.o),t.vertexAttribPointer(r.o,1,5126,!1,16,8),t.enableVertexAttribArray(r.F),t.vertexAttribPointer(r.F,1,5126,!1,16,12),t.uniform2fv(r.Y,i),t.uniform1f(r.L,n),r},gc.Ob=function(t,e){t.disableVertexAttribArray(e.a),t.disableVertexAttribArray(e.o),t.disableVertexAttribArray(e.F)},gc.ob=function(t,e,i){if(g(i)){var n,r,a;for(r=this.b[this.b.length-1],i=this.F.length-1;0<=i;--i)n=this.F[i],a=this.j[i],t.uniform4fv(this.D.C,a[0]),Bo(this,t,a[1],a[2]),jo(t,e,n,r),r=n}else{var s,h,l,c;for(l=this.b.length-2,a=r=this.b[l+1],n=this.F.length-1;0<=n;--n){for(s=this.j[n],t.uniform4fv(this.D.C,s[0]),Bo(this,t,s[1],s[2]),s=this.F[n];0<=l&&this.b[l]>=s;)c=this.b[l],h=this.i[l],h=o(h).toString(),i[h]&&(r!==a&&jo(t,e,r,a),a=c),l--,r=c;r!==a&&jo(t,e,r,a),r=a=s}}},gc.Db=function(t,e,i,n,r){var a,s,h,l,c,u,f;for(f=this.b.length-2,h=this.b[f+1],a=this.F.length-1;0<=a;--a)for(s=this.j[a],t.uniform4fv(this.D.C,s[0]),Bo(this,t,s[1],s[2]),l=this.F[a];0<=f&&this.b[f]>=l;){if(s=this.b[f],c=this.i[f],u=o(c).toString(),void 0===i[u]&&c.T()&&(void 0===r||wt(r,c.T().M()))&&(t.clear(t.COLOR_BUFFER_BIT|t.DEPTH_BUFFER_BIT),jo(t,e,s,h),h=n(c)))return h;f--,h=s}},gc.fa=function(t,e){var i,n;e?(i=e.c,this.f.lineDash=i?i:Ou,i=e.a,i=i instanceof CanvasGradient||i instanceof CanvasPattern?Uu:Ke(i).map(function(t,e){return 3!=e?t/255:t})||Uu,n=e.b,n=void 0!==n?n:1):(i=[0,0,0,0],n=0);var r=t?t.a:[0,0,0,0];r=r instanceof CanvasGradient||r instanceof CanvasPattern?Vu:Ke(r).map(function(t,e){return 3!=e?t/255:t})||Vu,this.f.strokeColor&&U(this.f.strokeColor,i)&&this.f.fillColor&&U(this.f.fillColor,r)&&this.f.lineWidth===n||(this.f.v=!0,this.f.fillColor=r,this.f.strokeColor=i,this.f.lineWidth=n,this.j.push([r,i,n]))},i(No,Io);var zu=new No;i(Vo,Lo);var Yu=new Vo;i(Uo,I),Uo.prototype.Z=function(){A(this.u);var t=this.a;if(!t.isContextLost()){for(var e in this.c)t.deleteBuffer(this.c[e].buffer);for(e in this.b)t.deleteProgram(this.b[e]);for(e in this.f)t.deleteShader(this.f[e]);t.deleteFramebuffer(this.g),t.deleteRenderbuffer(this.j),t.deleteTexture(this.l)}},Uo.prototype.D=function(){p(this.c),p(this.f),p(this.b),this.j=this.l=this.g=this.o=null},Uo.prototype.F=function(){},i(Ko,Do),gc=Ko.prototype,gc.wa=function(t){var e=this.u,i=this.l,n=this.ta,r=this.F,o=t.a;return function(){if(!o.isContextLost()){var a,s;for(a=0,s=n.length;a<s;++a)o.deleteTexture(n[a]);for(a=0,s=r.length;a<s;++a)o.deleteTexture(r[a])}Go(t,e),Go(t,i)}},gc.kb=function(t,e){this.b.push(this.a.length),this.i.push(e);var i=t.s;Zo(this,i,i.length,t.a)},gc.mb=function(t,e){this.b.push(this.a.length),this.i.push(e);var i=t.s;Zo(this,i,i.length,t.a)},gc.va=function(t){t=t.a,this.B.push(this.a.length),this.D.push(this.a.length),this.u=new Ro(this.c),this.l=new Ro(this.a);var e={};Qo(this.ta,this.j,e,t),Qo(this.F,this.f,e,t),this.L=this.C=this.A=void 0,this.f=this.j=null,this.P=this.Y=void 0,this.a=null,this.xa=this.ca=this.ba=this.ka=this.ja=this.V=void 0,this.c=null,this.ia=void 0},gc.Nb=function(t,e){var i,n=zo(e,zu,Yu);return this.G?i=this.G:this.G=i=new Oo(t,n),Yo(e,n),t.enableVertexAttribArray(i.a),t.vertexAttribPointer(i.a,2,5126,!1,32,0),t.enableVertexAttribArray(i.u),t.vertexAttribPointer(i.u,2,5126,!1,32,8),t.enableVertexAttribArray(i.A),t.vertexAttribPointer(i.A,2,5126,!1,32,16),t.enableVertexAttribArray(i.D),t.vertexAttribPointer(i.D,1,5126,!1,32,24),t.enableVertexAttribArray(i.B),t.vertexAttribPointer(i.B,1,5126,!1,32,28),i},gc.Ob=function(t,e){t.disableVertexAttribArray(e.a),t.disableVertexAttribArray(e.u),t.disableVertexAttribArray(e.A),t.disableVertexAttribArray(e.D),t.disableVertexAttribArray(e.B)},gc.ob=function(t,e,i,n){var r=n?this.F:this.ta;if(n=n?this.D:this.B,g(i)){var a,s;for(i=0,a=r.length,s=0;i<a;++i){t.bindTexture(3553,r[i]);var h=n[i];jo(t,e,s,h),s=h}}else for(s=a=0,h=r.length;s<h;++s){t.bindTexture(3553,r[s]);for(var l=0<s?n[s-1]:0,c=n[s],u=l;a<this.b.length&&this.b[a]<=c;){var f=o(this.i[a]).toString();void 0!==i[f]?(u!==l&&jo(t,e,u,l),l=u=a===this.b.length-1?c:this.b[a+1]):l=a===this.b.length-1?c:this.b[a+1],a++}u!==l&&jo(t,e,u,l)}},gc.Db=function(t,e,i,n,r){var a,s,h,l,c,u,f=this.b.length-1;for(a=this.F.length-1;0<=a;--a)for(t.bindTexture(3553,this.F[a]),s=0<a?this.D[a-1]:0,l=this.D[a];0<=f&&this.b[f]>=s;){if(h=this.b[f],c=this.i[f],u=o(c).toString(),void 0===i[u]&&c.T()&&(void 0===r||wt(r,c.T().M()))&&(t.clear(t.COLOR_BUFFER_BIT|t.DEPTH_BUFFER_BIT),jo(t,e,h,l),l=n(c)))return l;l=h,f--}},gc.Ea=function(t){var e=t.pb(),i=t.rb(1),n=t.hc(),r=t.pc(1),a=t.j,s=t.sb(),h=t.F,l=t.u,c=t.Ma();t=t.o;var u;0===this.j.length?this.j.push(i):(u=this.j[this.j.length-1],o(u)!=o(i)&&(this.B.push(this.a.length),this.j.push(i))),0===this.f.length?this.f.push(r):(u=this.f[this.f.length-1],o(u)!=o(r)&&(this.D.push(this.a.length),this.f.push(r))),this.A=e[0],this.C=e[1],this.L=c[1],this.Y=n[1],this.P=n[0],this.V=a,this.ja=s[0],this.ka=s[1],this.ca=l,this.ba=h,this.xa=t,this.ia=c[0]},i(ta,Io);var Ju=new ta;i(ea,Lo);var qu=new ea;i(na,Do),gc=na.prototype,gc.ib=function(t,e){var i=t.s,n=t.a;aa(i,i.length,n)&&(i=zt(i,i.length,n,-this.origin[0],-this.origin[1]),this.f.v&&(this.j.push(this.a.length),this.f.v=!1),this.b.push(this.a.length),this.i.push(e),ra(this,i,i.length,n))},gc.jb=function(t,e){var i,n,r=this.a.length,o=nh(t);for(i=0,n=o.length;i<n;++i){var a=o[i].s,s=o[i].a;aa(a,a.length,s)&&(a=zt(a,a.length,s,-this.origin[0],-this.origin[1]),ra(this,a,a.length,s))}this.a.length>r&&(this.b.push(r),this.i.push(e),this.f.v&&(this.j.push(r),this.f.v=!1))},gc.va=function(){this.u=new Ro(this.c),this.l=new Ro(this.a),this.b.push(this.a.length),0===this.j.length&&0<this.F.length&&(this.F=[]),this.a=this.c=null},gc.wa=function(t){var e=this.u,i=this.l;return function(){Go(t,e),Go(t,i)}},gc.Nb=function(t,e,i,n){var r,o=zo(e,Ju,qu);return this.D?r=this.D:this.D=r=new ia(t,o),Yo(e,o),t.enableVertexAttribArray(r.j),t.vertexAttribPointer(r.j,2,5126,!1,28,0),t.enableVertexAttribArray(r.a),t.vertexAttribPointer(r.a,2,5126,!1,28,8),t.enableVertexAttribArray(r.l),t.vertexAttribPointer(r.l,2,5126,!1,28,16),t.enableVertexAttribArray(r.i),
t.vertexAttribPointer(r.i,1,5126,!1,28,24),t.uniform2fv(r.Y,i),t.uniform1f(r.L,n),r},gc.Ob=function(t,e){t.disableVertexAttribArray(e.j),t.disableVertexAttribArray(e.a),t.disableVertexAttribArray(e.l),t.disableVertexAttribArray(e.i)},gc.ob=function(t,e,i,n){var r=t.getParameter(t.DEPTH_FUNC),a=t.getParameter(t.DEPTH_WRITEMASK);if(n||(t.enable(t.DEPTH_TEST),t.depthMask(!0),t.depthFunc(t.NOTEQUAL)),g(i)){var s,h,l;for(h=this.b[this.b.length-1],i=this.j.length-1;0<=i;--i)s=this.j[i],l=this.F[i],la(this,t,l[0],l[1],l[2]),jo(t,e,s,h),t.clear(t.DEPTH_BUFFER_BIT),h=s}else{var c,u,f,d;for(f=this.b.length-2,l=h=this.b[f+1],s=this.j.length-1;0<=s;--s){for(c=this.F[s],la(this,t,c[0],c[1],c[2]),c=this.j[s];0<=f&&this.b[f]>=c;)d=this.b[f],u=this.i[f],u=o(u).toString(),i[u]&&(h!==l&&(jo(t,e,h,l),t.clear(t.DEPTH_BUFFER_BIT)),l=d),f--,h=d;h!==l&&(jo(t,e,h,l),t.clear(t.DEPTH_BUFFER_BIT)),h=l=c}}n||(t.disable(t.DEPTH_TEST),t.clear(t.DEPTH_BUFFER_BIT),t.depthMask(a),t.depthFunc(r))},gc.Db=function(t,e,i,n,r){var a,s,h,l,c,u,f;for(f=this.b.length-2,h=this.b[f+1],a=this.j.length-1;0<=a;--a)for(s=this.F[a],la(this,t,s[0],s[1],s[2]),l=this.j[a];0<=f&&this.b[f]>=l;){if(s=this.b[f],c=this.i[f],u=o(c).toString(),void 0===i[u]&&c.T()&&(void 0===r||wt(r,c.T().M()))&&(t.clear(t.COLOR_BUFFER_BIT|t.DEPTH_BUFFER_BIT),jo(t,e,s,h),h=n(c)))return h;f--,h=s}},gc.fa=function(t,e){var i=e.f;this.f.lineCap=void 0!==i?i:"round",i=e.c,this.f.lineDash=i?i:Ou,i=e.g,this.f.lineJoin=void 0!==i?i:"round",i=e.a,i=i instanceof CanvasGradient||i instanceof CanvasPattern?Uu:Ke(i).map(function(t,e){return 3!=e?t/255:t})||Uu;var n=e.b,n=void 0!==n?n:1,r=e.i,r=void 0!==r?r:10;this.f.strokeColor&&U(this.f.strokeColor,i)&&this.f.lineWidth===n&&this.f.miterLimit===r||(this.f.v=!0,this.f.strokeColor=i,this.f.lineWidth=n,this.f.miterLimit=r,this.F.push([i,n,r]))},i(ca,Io);var Ku=new ca;i(ua,Lo);var Zu=new ua;da.prototype.concat=function(t){if(t.a){if(this.a){var e=this.a.next;this.a.next=t.b,t.b.pa=this.a,e.pa=t.c,t.c.next=e,this.f+=t.f}else this.a=t.a,this.b=t.b,this.c=t.c,this.f=t.f;t.a=void 0,t.b=void 0,t.c=void 0,t.f=0}};var Qu;!function(){var t={},i={S:t};!function(e){if("object"==typeof t&&"undefined"!=typeof i)i.S=e();else{var n;n="undefined"!=typeof window?window:"undefined"!=typeof r?r:"undefined"!=typeof self?self:this,n.If=e()}}(function(){return function t(i,n,r){function o(s,h){if(!n[s]){if(!i[s]){var l="function"==typeof e&&e;if(!h&&l)return l(s,!0);if(a)return a(s,!0);throw l=Error("Cannot find module '"+s+"'"),l.code="MODULE_NOT_FOUND",l}l=n[s]={S:{}},i[s][0].call(l.S,function(t){var e=i[s][1][t];return o(e?e:t)},l,l.S,t,i,n,r)}return n[s].S}for(var a="function"==typeof e&&e,s=0;s<r.length;s++)o(r[s]);return o}({1:[function(t,e){function i(t,e,o,a,s){for(o=o||0,a=a||t.length-1,s=s||r;a>o;){if(600<a-o){var h=a-o+1,l=e-o+1,c=Math.log(h),u=.5*Math.exp(2*c/3),c=.5*Math.sqrt(c*u*(h-u)/h)*(0>l-h/2?-1:1);i(t,e,Math.max(o,Math.floor(e-l*u/h+c)),Math.min(a,Math.floor(e+(h-l)*u/h+c)),s)}for(h=t[e],l=o,u=a,n(t,o,e),0<s(t[a],h)&&n(t,o,a);l<u;){for(n(t,l,u),l++,u--;0>s(t[l],h);)l++;for(;0<s(t[u],h);)u--}0===s(t[o],h)?n(t,o,u):(u++,n(t,u,a)),u<=e&&(o=u+1),e<=u&&(a=u-1)}}function n(t,e,i){var n=t[e];t[e]=t[i],t[i]=n}function r(t,e){return t<e?-1:t>e?1:0}e.S=i},{}],2:[function(t,e){function i(t,e){return this instanceof i?(this.Yb=Math.max(4,t||9),this.Fc=Math.max(2,Math.ceil(.4*this.Yb)),e&&this.Dd(e),void this.clear()):new i(t,e)}function n(t,e){r(t,0,t.children.length,e,t)}function r(t,e,i,n,r){r||(r=f(null)),r.K=1/0,r.N=1/0,r.J=-(1/0),r.R=-(1/0);for(var a;e<i;e++)a=t.children[e],o(r,t.ma?n(a):a);return r}function o(t,e){t.K=Math.min(t.K,e.K),t.N=Math.min(t.N,e.N),t.J=Math.max(t.J,e.J),t.R=Math.max(t.R,e.R)}function a(t,e){return t.K-e.K}function s(t,e){return t.N-e.N}function h(t){return(t.J-t.K)*(t.R-t.N)}function l(t){return t.J-t.K+(t.R-t.N)}function c(t,e){return t.K<=e.K&&t.N<=e.N&&e.J<=t.J&&e.R<=t.R}function u(t,e){return e.K<=t.J&&e.N<=t.R&&e.J>=t.K&&e.R>=t.N}function f(t){return{children:t,height:1,ma:!0,K:1/0,N:1/0,J:-(1/0),R:-(1/0)}}function d(t,e,i,n,r){for(var o,a=[e,i];a.length;)i=a.pop(),e=a.pop(),i-e<=n||(o=e+Math.ceil((i-e)/n/2)*n,p(t,o,e,i,r),a.push(e,o,o,i))}e.S=i;var p=t("quickselect");i.prototype={all:function(){return this.Ac(this.data,[])},search:function(t){var e=this.data,i=[],n=this.ra;if(!u(t,e))return i;for(var r,o,a,s,h=[];e;){for(r=0,o=e.children.length;r<o;r++)a=e.children[r],s=e.ma?n(a):a,u(t,s)&&(e.ma?i.push(a):c(t,s)?this.Ac(a,i):h.push(a));e=h.pop()}return i},load:function(t){if(!t||!t.length)return this;if(t.length<this.Fc){for(var e=0,i=t.length;e<i;e++)this.Ha(t[e]);return this}return t=this.Cc(t.slice(),0,t.length-1,0),this.data.children.length?this.data.height===t.height?this.Ic(this.data,t):(this.data.height<t.height&&(e=this.data,this.data=t,t=e),this.Ec(t,this.data.height-t.height-1,!0)):this.data=t,this},Ha:function(t){return t&&this.Ec(t,this.data.height-1),this},clear:function(){return this.data=f([]),this},remove:function(t,e){if(!t)return this;for(var i,n,r,o,a=this.data,s=this.ra(t),h=[],l=[];a||h.length;){if(a||(a=h.pop(),n=h[h.length-1],i=l.pop(),o=!0),a.ma){t:{r=t;var u=a.children,f=e;if(f){for(var d=0;d<u.length;d++)if(f(r,u[d])){r=d;break t}r=-1}else r=u.indexOf(r)}if(-1!==r){a.children.splice(r,1),h.push(a),this.Bd(h);break}}o||a.ma||!c(a,s)?n?(i++,a=n.children[i],o=!1):a=null:(h.push(a),l.push(i),i=0,n=a,a=a.children[0])}return this},ra:function(t){return t},cc:a,dc:s,toJSON:function(){return this.data},Ac:function(t,e){for(var i=[];t;)t.ma?e.push.apply(e,t.children):i.push.apply(i,t.children),t=i.pop();return e},Cc:function(t,e,i,r){var o,a=i-e+1,s=this.Yb;if(a<=s)return o=f(t.slice(e,i+1)),n(o,this.ra),o;r||(r=Math.ceil(Math.log(a)/Math.log(s)),s=Math.ceil(a/Math.pow(s,r-1))),o=f([]),o.ma=!1,o.height=r;var h,l,c,a=Math.ceil(a/s),s=a*Math.ceil(Math.sqrt(s));for(d(t,e,i,s,this.cc);e<=i;e+=s)for(l=Math.min(e+s-1,i),d(t,e,l,a,this.dc),h=e;h<=l;h+=a)c=Math.min(h+a-1,l),o.children.push(this.Cc(t,h,c,r-1));return n(o,this.ra),o},Ad:function(t,e,i,n){for(var r,o,a,s,l,c,u,f;n.push(e),!e.ma&&n.length-1!==i;){for(u=f=1/0,r=0,o=e.children.length;r<o;r++)a=e.children[r],l=h(a),c=(Math.max(a.J,t.J)-Math.min(a.K,t.K))*(Math.max(a.R,t.R)-Math.min(a.N,t.N))-l,c<f?(f=c,u=l<u?l:u,s=a):c===f&&l<u&&(u=l,s=a);e=s||e.children[0]}return e},Ec:function(t,e,i){var n=this.ra;i=i?t:n(t);var n=[],r=this.Ad(i,this.data,e,n);for(r.children.push(t),o(r,i);0<=e&&n[e].children.length>this.Yb;)this.Hd(n,e),e--;this.xd(i,n,e)},Hd:function(t,e){var i=t[e],r=i.children.length,o=this.Fc;this.yd(i,o,r),r=this.zd(i,o,r),r=f(i.children.splice(r,i.children.length-r)),r.height=i.height,r.ma=i.ma,n(i,this.ra),n(r,this.ra),e?t[e-1].children.push(r):this.Ic(i,r)},Ic:function(t,e){this.data=f([t,e]),this.data.height=t.height+1,this.data.ma=!1,n(this.data,this.ra)},zd:function(t,e,i){var n,o,a,s,l,c,u;for(l=c=1/0,n=e;n<=i-e;n++)o=r(t,0,n,this.ra),a=r(t,n,i,this.ra),s=Math.max(0,Math.min(o.J,a.J)-Math.max(o.K,a.K))*Math.max(0,Math.min(o.R,a.R)-Math.max(o.N,a.N)),o=h(o)+h(a),s<l?(l=s,u=n,c=o<c?o:c):s===l&&o<c&&(c=o,u=n);return u},yd:function(t,e,i){var n=t.ma?this.cc:a,r=t.ma?this.dc:s,o=this.Bc(t,e,i,n);e=this.Bc(t,e,i,r),o<e&&t.children.sort(n)},Bc:function(t,e,i,n){t.children.sort(n),n=this.ra;var a,s,h=r(t,0,e,n),c=r(t,i-e,i,n),u=l(h)+l(c);for(a=e;a<i-e;a++)s=t.children[a],o(h,t.ma?n(s):s),u+=l(h);for(a=i-e-1;a>=e;a--)s=t.children[a],o(c,t.ma?n(s):s),u+=l(c);return u},xd:function(t,e,i){for(;0<=i;i--)o(e[i],t)},Bd:function(t){for(var e,i=t.length-1;0<=i;i--)0===t[i].children.length?0<i?(e=t[i-1].children,e.splice(e.indexOf(t[i]),1)):this.clear():n(t[i],this.ra)},Dd:function(t){var e=["return a"," - b",";"];this.cc=new Function("a","b",e.join(t[0])),this.dc=new Function("a","b",e.join(t[1])),this.ra=new Function("a","return {minX: a"+t[0]+", minY: a"+t[1]+", maxX: a"+t[2]+", maxY: a"+t[3]+"};")}}},{quickselect:1}]},{},[2])(2)}),Qu=i.S}(),gc=xa.prototype,gc.Ha=function(t,e){var i={K:t[0],N:t[1],J:t[2],R:t[3],value:e};this.a.Ha(i),this.c[o(e)]=i},gc.load=function(t,e){for(var i=Array(e.length),n=0,r=e.length;n<r;n++){var a=t[n],s=e[n],a={K:a[0],N:a[1],J:a[2],R:a[3],value:s};i[n]=a,this.c[o(s)]=a}this.a.load(i)},gc.remove=function(t){t=o(t);var e=this.c[t];return delete this.c[t],null!==this.a.remove(e)},gc.forEach=function(t,e){return Ia(Sa(this),t,e)},gc.clear=function(){this.a.clear(),this.c={}},gc.M=function(){var t=this.a.data;return[t.K,t.N,t.J,t.R]},i(La,Do),gc=La.prototype,gc.lb=function(t,e){var i,n,r,o,a=ch(t),s=t.a,h=this.a.length,l=this.o.a.length;for(i=0,n=a.length;i<n;++i){var c=pe(a[i]);if(0<c.length){var u,f=c[0].s,f=zt(f,f.length,s,-this.origin[0],-this.origin[1]),d=[];for(r=1,o=c.length;r<o;++r)u=c[r].s,u=zt(u,u.length,s,-this.origin[0],-this.origin[1]),d.push(u);sa(this.o,f,d,s),ka(this,f,d,s)}}this.a.length>h&&(this.b.push(h),this.i.push(e),this.j.v&&(this.f.push(h),this.j.v=!1)),this.o.a.length>l&&ha(this.o,e,l)},gc.nb=function(t,e){var i=pe(t),n=t.a;if(0<i.length){this.b.push(this.a.length),this.i.push(e),this.j.v&&(this.f.push(this.a.length),this.j.v=!1),ha(this.o,e);var r,o,a,s=i[0].s,s=zt(s,s.length,n,-this.origin[0],-this.origin[1]),h=[];for(r=1,o=i.length;r<o;++r)a=i[r].s,a=zt(a,a.length,n,-this.origin[0],-this.origin[1]),h.push(a);sa(this.o,s,h,n),ka(this,s,h,n)}},gc.va=function(t){this.u=new Ro(this.c),this.l=new Ro(this.a),this.b.push(this.a.length),this.o.va(t),0===this.f.length&&0<this.F.length&&(this.F=[]),this.a=this.c=null},gc.wa=function(t){var e=this.u,i=this.l,n=this.o.wa(t);return function(){Go(t,e),Go(t,i),n()}},gc.Nb=function(t,e){var i,n=zo(e,Ku,Zu);return this.D?i=this.D:this.D=i=new fa(t,n),Yo(e,n),t.enableVertexAttribArray(i.a),t.vertexAttribPointer(i.a,2,5126,!1,8,0),i},gc.Ob=function(t,e){t.disableVertexAttribArray(e.a)},gc.ob=function(t,e,i,n){var r=t.getParameter(t.DEPTH_FUNC),a=t.getParameter(t.DEPTH_WRITEMASK);if(n||(t.enable(t.DEPTH_TEST),t.depthMask(!0),t.depthFunc(t.NOTEQUAL)),g(i)){var s,h,l;for(h=this.b[this.b.length-1],i=this.f.length-1;0<=i;--i)s=this.f[i],l=this.F[i],t.uniform4fv(this.D.C,l),jo(t,e,s,h),h=s}else{var c,u,f,d;for(f=this.b.length-2,l=h=this.b[f+1],s=this.f.length-1;0<=s;--s){for(c=this.F[s],t.uniform4fv(this.D.C,c),c=this.f[s];0<=f&&this.b[f]>=c;)d=this.b[f],u=this.i[f],u=o(u).toString(),i[u]&&(h!==l&&(jo(t,e,h,l),t.clear(t.DEPTH_BUFFER_BIT)),l=d),f--,h=d;h!==l&&(jo(t,e,h,l),t.clear(t.DEPTH_BUFFER_BIT)),h=l=c}}n||(t.disable(t.DEPTH_TEST),t.clear(t.DEPTH_BUFFER_BIT),t.depthMask(a),t.depthFunc(r))},gc.Db=function(t,e,i,n,r){var a,s,h,l,c,u,f;for(f=this.b.length-2,h=this.b[f+1],a=this.f.length-1;0<=a;--a)for(s=this.F[a],t.uniform4fv(this.D.C,s),l=this.f[a];0<=f&&this.b[f]>=l;){if(s=this.b[f],c=this.i[f],u=o(c).toString(),void 0===i[u]&&c.T()&&(void 0===r||wt(r,c.T().M()))&&(t.clear(t.COLOR_BUFFER_BIT|t.DEPTH_BUFFER_BIT),jo(t,e,s,h),h=n(c)))return h;f--,h=s}},gc.fa=function(t,e){var i=t?t.a:[0,0,0,0];i=i instanceof CanvasGradient||i instanceof CanvasPattern?Vu:Ke(i).map(function(t,e){return 3!=e?t/255:t})||Vu,this.j.fillColor&&U(i,this.j.fillColor)||(this.j.fillColor=i,this.j.v=!0,this.F.push(i)),e?this.o.fa(null,e):this.o.fa(null,new xr({color:[0,0,0,0],lineWidth:0}))},Ga.prototype.g=function(){},i(Xa,qr),Xa.prototype.a=function(t,e){var i=void 0!==t?t.toString():"0",n=this.c[i];return void 0===n&&(n={},this.c[i]=n),i=n[e],void 0===i&&(i=new tf[e](this.o,this.i),n[e]=i),i},Xa.prototype.b=function(){return g(this.c)},Xa.prototype.g=function(t,e,i,n,r,o,a,s){var h=Object.keys(this.c).map(Number);h.sort(N);var l,c,u,f,d,p;for(l=0,c=h.length;l<c;++l)for(d=this.c[h[l].toString()],u=0,f=Ru.length;u<f;++u)p=d[Ru[u]],void 0!==p&&p.g(t,e,i,n,r,o,a,s,void 0,!1)},Xa.prototype.na=function(t,e,i,n,r,o,a,s,h,l){var c=e.a;c.bindFramebuffer(c.FRAMEBUFFER,Xo(e));var u;return void 0!==this.f&&(u=it(lt(t),n*this.f)),Ya(this,e,t,n,r,a,s,h,function(t){var e=new Uint8Array(4);if(c.readPixels(0,0,1,1,c.RGBA,c.UNSIGNED_BYTE,e),0<e[3]&&(t=l(t)))return t},u)};var $u=[1,1],tf={Circle:_o,Image:Ko,LineString:na,Polygon:La,Text:Ga};i(Ja,kr),gc=Ja.prototype,gc.cd=function(t){this.fa(t.b,t.c),this.Ea(t.f)},gc.mb=function(t,e){var i=this.a,n=new Xa(1,this.b).a(0,"Image");n.Ea(this.u),n.mb(t,e),n.va(i),n.g(this.a,this.c,this.g,this.i,this.o,this.f,1,{},void 0,!1),n.wa(i)()},gc.kb=function(t,e){var i=this.a,n=new Xa(1,this.b).a(0,"Image");n.Ea(this.u),n.kb(t,e),n.va(i),n.g(this.a,this.c,this.g,this.i,this.o,this.f,1,{},void 0,!1),n.wa(i)()},gc.ib=function(t,e){var i=this.a,n=new Xa(1,this.b).a(0,"LineString");n.fa(null,this.j),n.ib(t,e),n.va(i),n.g(this.a,this.c,this.g,this.i,this.o,this.f,1,{},void 0,!1),n.wa(i)()},gc.jb=function(t,e){var i=this.a,n=new Xa(1,this.b).a(0,"LineString");n.fa(null,this.j),n.jb(t,e),n.va(i),n.g(this.a,this.c,this.g,this.i,this.o,this.f,1,{},void 0,!1),n.wa(i)()},gc.nb=function(t,e){var i=this.a,n=new Xa(1,this.b).a(0,"Polygon");n.fa(this.l,this.j),n.nb(t,e),n.va(i),n.g(this.a,this.c,this.g,this.i,this.o,this.f,1,{},void 0,!1),n.wa(i)()},gc.lb=function(t,e){var i=this.a,n=new Xa(1,this.b).a(0,"Polygon");n.fa(this.l,this.j),n.lb(t,e),n.va(i),n.g(this.a,this.c,this.g,this.i,this.o,this.f,1,{},void 0,!1),n.wa(i)()},gc.Ra=function(t,e){var i=this.a,n=new Xa(1,this.b).a(0,"Circle");n.fa(this.l,this.j),n.Ra(t,e),n.va(i),n.g(this.a,this.c,this.g,this.i,this.o,this.f,1,{},void 0,!1),n.wa(i)()},gc.Ea=function(t){this.u=t},gc.fa=function(t,e){this.l=t,this.j=e},i(qa,Io);var ef=new qa;i(Ka,Lo);var nf=new Ka;i(Qa,_r),Qa.prototype.dd=function(t,e,i){ts(this,"precompose",i,t),Wo(i,34962,this.ba);var n,r=i.a,o=zo(i,ef,nf);this.u?n=this.u:this.u=n=new Za(r,o),Yo(i,o)&&(r.enableVertexAttribArray(n.a),r.vertexAttribPointer(n.a,2,5126,!1,16,0),r.enableVertexAttribArray(n.c),r.vertexAttribPointer(n.c,2,5126,!1,16,8),r.uniform1i(n.g,0)),r.uniformMatrix4fv(n.i,!1,Fo(this.C,this.V)),r.uniformMatrix4fv(n.f,!1,Fo(this.C,this.ca)),r.uniform1f(n.b,e.opacity),r.bindTexture(3553,this.Ia),r.drawArrays(5,0,4),ts(this,"postcompose",i,t)},Qa.prototype.B=function(){this.i=this.Ia=null,this.o=void 0};var rf,of=-1<navigator.userAgent.indexOf("OPR"),af=-1<navigator.userAgent.indexOf("Edge");rf=!(!navigator.userAgent.match("CriOS")&&"chrome"in window&&"Google Inc."===navigator.vendor&&0==of&&0==af),i(as,j),as.prototype.na=n,as.prototype.aa=function(){return this.V},i(hs,Io);var sf=new hs;i(ls,Lo);var hf=new ls;i(us,Qa),us.prototype.Z=function(){Go(this.f.g,this.G),Qa.prototype.Z.call(this)},us.prototype.j=function(t,e,i){var n=this.f;return function(r,o){return oc(t,e,r,o,function(t){var e=ps(n.c,t.getKey());return e&&(i[r]||(i[r]={}),i[r][t.ga.toString()]=t),e})}},us.prototype.B=function(){Qa.prototype.B.call(this),this.b=null},us.prototype.ed=function(t,e,i){var n=this.f,r=i.a,o=t.viewState,a=o.projection,s=this.a,h=s.oa(),c=h.Ga(a),u=Ue(c,o.resolution),f=c.a[u],d=ac(h,u,a),p=d[0]/Te(Oe(c,u),this.P)[0],v=f/p,g=h.i*h.gc(a),y=o.center,m=t.extent,b=Re(c,m,f);if(this.g&&ke(this.g,b)&&this.l==h.c)v=this.A;else{var w=[b.J-b.K+1,b.R-b.N+1],x=l(Math.max(w[0]*d[0],w[1]*d[1])),w=v*x,M=De(c,u),S=M[0]+b.K*d[0]*v,v=M[1]+b.N*d[1]*v,v=[S,v,S+w,v+w];$a(this,t,x),r.viewport(0,0,x,x),r.clearColor(0,0,0,0),r.clear(16384),r.disable(3042),x=zo(i,this.L,this.ia),Yo(i,x),this.b||(this.b=new cs(r,x)),Wo(i,34962,this.G),r.enableVertexAttribArray(this.b.a),r.vertexAttribPointer(this.b.a,2,5126,!1,16,0),r.enableVertexAttribArray(this.b.c),r.vertexAttribPointer(this.b.c,2,5126,!1,16,8),r.uniform1i(this.b.b,0),i={},i[u]={};var C,A,I,L=this.j(h,a,i),k=s.get(Tu),x=!0,S=at(),P=new Ie(0,0,0,0);for(A=b.K;A<=b.J;++A)for(I=b.N;I<=b.R;++I)if(M=dc(h,u,A,I,p,a),void 0===e.extent||(C=Ne(c,M.ga,S),wt(C,e.extent))){if(C=M.aa(),(C=C==ou||4==C||3==C&&!k)||(M=Ui(M)),C=M.aa(),C==ou){if(ps(n.c,M.getKey())){i[u][M.ga.toString()]=M;continue}}else if(4==C||3==C&&!k)continue;x=!1,C=Fe(c,M.ga,L,P,S),C||(M=je(c,M.ga,P,S))&&L(u+1,M)}e=Object.keys(i).map(Number),e.sort(N);for(var T,L=new Float32Array(4),k=0,P=e.length;k<P;++k)for(T in A=i[e[k]])M=A[T],C=Ne(c,M.ga,S),L[0]=2*(C[2]-C[0])/w,L[1]=2*(C[3]-C[1])/w,L[2]=2*(C[0]-v[0])/w-1,L[3]=2*(C[1]-v[1])/w-1,r.uniform4fv(this.b.f,L),gs(n,M,d,g*p),r.drawArrays(5,0,4);x?(this.g=b,this.A=v,this.l=h.c):(this.A=this.g=null,this.l=-1,t.animate=!0)}Ur(t.usedTiles,h,u,b);var E=n.o;return Wr(t,h,c,p,a,m,u,s.get(Pu),function(t){var e;(e=t.aa()!=ou||ps(n.c,t.getKey()))||(e=t.getKey()in E.c),e||E.g([t,Be(c,t.ga),c.a[t.ga[0]],d,g*p])},this),Nr(t,h),Or(t,h),r=this.V,ir(r),nr(r,rr(ku,1,0,0,1,(Math.round(y[0]/f)*f-v[0])/(v[2]-v[0]),(Math.round(y[1]/f)*f-v[1])/(v[3]-v[1]))),0!==o.rotation&&sr(r,o.rotation),nr(r,rr(ku,t.size[0]*o.resolution/(v[2]-v[0]),0,0,t.size[1]*o.resolution/(v[3]-v[1]),0,0)),nr(r,rr(ku,1,0,0,1,-.5,-.5)),!0},i(fs,Qa),gc=fs.prototype,gc.dd=function(t,e,i){this.l=e;var n=t.viewState,r=this.b,o=t.size,a=t.pixelRatio,s=this.f.f;r&&!r.b()&&(s.enable(s.SCISSOR_TEST),s.scissor(0,0,o[0]*a,o[1]*a),r.g(i,n.center,n.resolution,n.rotation,o,a,e.opacity,e.Jb?t.skippedFeatureUids:{}),s.disable(s.SCISSOR_TEST))},gc.Z=function(){var t=this.b;t&&(Ha(t,this.f.g)(),this.b=null),Qa.prototype.Z.call(this)},gc.na=function(t,e,i,n,r){if(this.b&&this.l){i=e.viewState;var a=this.a,s={};return this.b.na(t,this.f.g,i.center,i.resolution,i.rotation,e.size,e.pixelRatio,this.l.opacity,{},function(t){var e=o(t).toString();if(!(e in s))return s[e]=!0,n.call(r,t,a)})}},gc.fd=function(){Br(this)},gc.ed=function(t,e,i){function n(t){var e,i=t.g;if(i?e=i.call(t,l):(i=r.u)&&(e=i(t,l)),e){if(e){if(i=!1,Array.isArray(e))for(var n=e.length-1;0<=n;--n)i=wo(f,t,e[n],bo(l,c),this.fd,this)||i;else i=wo(f,t,e,bo(l,c),this.fd,this)||i;t=i}else t=!1;this.g=this.g||t}}var r=this.a;e=r.oa(),Vr(t.attributions,e.B),Or(t,e);var o=t.viewHints[Fc],a=t.viewHints[1],s=r.A,h=r.C;if(!this.g&&!s&&o||!h&&a)return!0;var a=t.extent,s=t.viewState,o=s.projection,l=s.resolution,c=t.pixelRatio,s=r.c,u=r.i,h=r.get("renderOrder");if(void 0===h&&(h=mo),a=it(a,u*l),!this.g&&this.L==l&&this.P==s&&this.G==h&&rt(this.A,a))return!0;this.b&&t.postRenderFunctions.push(Ha(this.b,i)),this.g=!1;var f=new Xa(.5*l/c,a,r.i);if(jl(e,a,l,o),h){var d=[];Dl(e,a,function(t){d.push(t)},this),d.sort(h),d.forEach(n,this)}else Dl(e,a,n,this);return za(f,i),this.L=l,this.P=s,this.G=h,this.A=a,this.b=f,!0},gc=ds.prototype,gc.clear=function(){this.f=0,this.b={},this.c=this.a=null},gc.forEach=function(t,e){for(var i=this.a;i;)t.call(e,i.Na,i.La,this),i=i.ya},gc.get=function(t){return t=this.b[t],s(void 0!==t,15),t===this.c?t.Na:(t===this.a?(this.a=this.a.ya,this.a.$a=null):(t.ya.$a=t.$a,t.$a.ya=t.ya),t.ya=null,t.$a=this.c,this.c=this.c.ya=t,t.Na)},gc.pop=function(){var t=this.a;return delete this.b[t.La],t.ya&&(t.ya.$a=null),this.a=t.ya,this.a||(this.c=null),--this.f,t.Na},gc.replace=function(t,e){this.get(t),this.b[t].Na=e},gc.set=function(t,e){s(!(t in this.b),16);var i={La:t,ya:null,$a:this.c,Na:e};this.c?this.c.ya=i:this.a=i,this.c=i,this.b[t]=i,++this.f},i(vs,lr),gc=vs.prototype,gc.Oc=function(t){return t instanceof vr?new us(this,t):t instanceof Lr?new fs(this,t):null},gc.Z=function(){var t=this.f;t.isContextLost()||this.c.forEach(function(e){e&&t.deleteTexture(e.Ia)}),L(this.g),lr.prototype.Z.call(this)},gc.Od=function(t,e){for(var i,n=this.f;1024<this.c.f-this.i;){if(i=this.c.a.Na)n.deleteTexture(i.Ia);else{if(+this.c.a.La==e.index)break;--this.i}this.c.pop()}},gc.$=function(){return"webgl"},gc.Ke=function(t){t.preventDefault(),this.c.clear(),this.i=0,t=this.b;for(var e in t)t[e].B()},gc.Le=function(){ms(this),this.j.render()},gc.uc=function(t){var e=this.g,i=this.f;if(i.isContextLost())return!1;if(!t)return this.l&&(this.a.style.display="none",this.l=!1),!1;this.D=t.focus,this.c.set((-t.index).toString(),null),++this.i,ys(this,"precompose",t);var n=[],r=t.layerStatesArray;W(r);var o,a,s,h,l=t.viewState.resolution;for(o=0,a=r.length;o<a;++o)h=r[o],$n(h,l)&&"ready"==h.pd&&(s=fr(this,h.layer),s.ed(t,h,e)&&n.push(h));for(r=t.size[0]*t.pixelRatio,l=t.size[1]*t.pixelRatio,this.a.width==r&&this.a.height==l||(this.a.width=r,this.a.height=l),i.bindFramebuffer(36160,null),i.clearColor(0,0,0,0),i.clear(16384),i.enable(3042),i.viewport(0,0,this.a.width,this.a.height),o=0,a=n.length;o<a;++o)h=n[o],s=fr(this,h.layer),s.dd(t,h,e);this.l||(this.a.style.display="",this.l=!0),cr(t),1024<this.c.f-this.i&&t.postRenderFunctions.push(this.Od.bind(this)),0!==this.o.a.length&&(t.postRenderFunctions.push(this.C),t.animate=!0),ys(this,"postcompose",t),dr(this,t),t.postRenderFunctions.push(ur)},gc.na=function(t,e,i,n,r,o,a){var s;if(this.f.isContextLost())return!1;var h,l=e.viewState,c=e.layerStatesArray;for(h=c.length-1;0<=h;--h){s=c[h];var u=s.layer;if($n(s,l.resolution)&&o.call(a,u)&&(s=fr(this,u).na(t,e,i,n,r)))return s}};var lf=["canvas","webgl"];i(bs,j),gc=bs.prototype,gc.Id=function(t){this.g.push(t)},gc.Jd=function(t){this.Fb().get(mu).push(t)},gc.Kd=function(t){this.A.push(t)},gc.Jc=function(t){var e=t.bd;void 0!==e&&(this.kd[e.toString()]=t),t.setMap(this)},gc.Z=function(){L(this.ca),L(this.V),S(this.a,"wheel",this.Va,this),S(this.a,"mousewheel",this.Va,this),void 0!==this.f&&(window.removeEventListener("resize",this.f,!1),this.f=void 0),this.i&&(cancelAnimationFrame(this.i),this.i=void 0),this.set(ff,null),j.prototype.Z.call(this)},gc.Pd=function(t,e,i){if(this.b)return t=this.Ka(t),i=void 0!==i?i:{},this.V.na(t,this.b,void 0!==i.hitTolerance?i.hitTolerance*this.b.pixelRatio:0,e,null,void 0!==i.layerFilter?i.layerFilter:xt,null)},gc.Tc=function(t){var e=this.a.getBoundingClientRect();return t=t.changedTouches?t.changedTouches[0]:t,[t.clientX-e.left,t.clientY-e.top]},gc.Ka=function(t){var e=this.b;return e?ar(e.pixelToCoordinateTransform,t.slice()):null},gc.Fb=function(){return this.get(cf)},gc.Ya=function(){return this.get(uf)},gc.W=function(){return this.get(df)},gc.Sd=function(){return this.a},gc.Rd=function(t,e,i,n){var r=this.b;return r&&e in r.wantedTiles&&r.wantedTiles[e][t.getKey()]?(t=i[0]-r.focus[0],i=i[1]-r.focus[1],65536*Math.log(n)+Math.sqrt(t*t+i*i)/n):1/0},gc.Va=function(t,e){var i=new ci(e||t.type,this,t);this.Vc(i)},gc.Vc=function(t){if(this.b){this.P=t.coordinate,t.frameState=this.b;var e,i=this.g.a;if(!1!==E(this,t))for(e=i.length-1;0<=e;e--){var n=i[e];if(n.get(au)&&!n.handleEvent(t))break}}},gc.fe=function(){var t=this.b,e=this.ia;if(0!==e.a.length){var i=16,n=i;if(t){var r=t.viewHints;r[Fc]&&(i=this.Oa?8:0,n=2),r[1]&&(i=this.Ub?8:0,n=2)}if(e.o<i){zi(e);for(var o,a,r=0;e.o<i&&r<n&&0<e.a.length;)o=Gi(e)[0],a=o.getKey(),0!==o.aa()||a in e.i||(e.i[a]=!0,++e.o,++r,o.load())}}for(e=this.sa,i=0,n=e.length;i<n;++i)e[i](this,t);e.length=0},gc.ge=function(){this.render()},gc.ie=function(){var t;if(this.get(ff)&&(t=ws(this)),this.j){for(var e=0,i=this.j.length;e<i;++e)C(this.j[e]);this.j=null}t?(t.appendChild(this.a),t=this.ba?this.ba:t,this.j=[M(t,"keydown",this.Va,this),M(t,"keypress",this.Va,this)],this.f||(this.f=this.td.bind(this),window.addEventListener("resize",this.f,!1))):(ei(this.a),void 0!==this.f&&(window.removeEventListener("resize",this.f,!1),this.f=void 0)),this.td()},gc.je=function(){this.render()},gc.Xc=function(){this.render()},gc.ke=function(){this.G&&(C(this.G),this.G=null),this.C&&(C(this.C),this.C=null);var t=this.W();t&&(this.G=M(t,Cc,this.Xc,this),this.C=M(t,"change",this.Xc,this)),this.render()},gc.Wd=function(){this.B&&(this.B.forEach(C),this.B=null);var t=this.Fb();t&&(this.B=[M(t,Cc,this.render,this),M(t,"change",this.render,this)]),this.render()},gc.render=function(){void 0===this.i&&(this.i=requestAnimationFrame(this.Aa))},gc.af=function(t){return this.g.remove(t)},gc.cf=function(t){var e,i,n,r=this.Ya(),a=this.W(),s=at(),h=null;if((e=void 0!==r&&0<r[0]&&0<r[1]&&a)&&(e=!!a.get(Pc)&&void 0!==Me(a)),e){var h=xe(a,this.b?this.b.viewHints:void 0),l=this.Fb().ic(),c={};for(e=0,i=l.length;e<i;++e)c[o(l[e].layer)]=l[e];n=a.aa(),h={animate:!1,attributions:{},coordinateToPixelTransform:this.Ba,extent:s,focus:this.P?this.P:n.center,index:this.Ja++,layerStates:c,layerStatesArray:l,logos:Mc({},this.Vb),pixelRatio:this.Tb,pixelToCoordinateTransform:this.Zb,postRenderFunctions:[],size:r,skippedFeatureUids:this.ac,tileQueue:this.ia,time:t,usedTiles:{},viewState:n,viewHints:h,wantedTiles:{}}}if(h){for(t=this.ta,e=r=0,i=t.length;e<i;++e)a=t[e],a(this,h)&&(t[r++]=a);t.length=r,h.extent=gt(n.center,n.resolution,n.rotation,h.size,s)}this.b=h,this.V.uc(h),h&&(h.animate&&this.render(),Array.prototype.push.apply(this.sa,h.postRenderFunctions),0!==this.ta.length||h.viewHints[Fc]||h.viewHints[1]||ct(h.extent,this.za)||(E(this,new ii("moveend",this,h)),nt(h.extent,this.za))),E(this,new ii("postrender",this,h)),setTimeout(this.fe.bind(this),0)},gc.ef=function(t){this.set(cf,t)},gc.td=function(){var t=ws(this);if(t){var e=getComputedStyle(t);this.set(uf,[t.offsetWidth-parseFloat(e.borderLeftWidth)-parseFloat(e.paddingLeft)-parseFloat(e.paddingRight)-parseFloat(e.borderRightWidth),t.offsetHeight-parseFloat(e.borderTopWidth)-parseFloat(e.paddingTop)-parseFloat(e.paddingBottom)-parseFloat(e.borderBottomWidth)])}else this.set(uf,void 0)};var cf="layergroup",uf="size",ff="target",df="view";Tt(Mu),Tt(Iu),Iu.forEach(function(t){Mu.forEach(function(e){Lt(t,e,Jn),Lt(e,t,qn)})}),i(Ss,j),gc=Ss.prototype,gc.Vd=function(){for(var t=this.b;t.lastChild;)t.removeChild(t.lastChild);(t=this.get(Sf))&&this.b.appendChild(t)},gc.ae=function(){this.f&&(ei(this.b),C(this.f),this.f=null);var t=this.get(Cf);t&&(this.f=M(t,"postrender",this.render,this),Is(this),t=this.l?t.l:t.u,this.j?t.insertBefore(this.b,t.childNodes[0]||null):t.appendChild(this.b))},gc.render=function(){Is(this)},gc.be=function(){Is(this)},gc.de=function(){if(Is(this),void 0!==this.get(If)&&this.autoPan){var t=this.get(Cf);if(void 0!==t&&ws(t)){var e=Cs(ws(t),t.Ya()),i=this.get(Sf),n=i.offsetWidth,r=i.currentStyle||getComputedStyle(i),n=n+(parseInt(r.marginLeft,10)+parseInt(r.marginRight,10)),r=i.offsetHeight,o=i.currentStyle||getComputedStyle(i),r=r+(parseInt(o.marginTop,10)+parseInt(o.marginBottom,10)),a=Cs(i,[n,r]),i=this.i;rt(e,a)||(n=a[0]-e[0],r=e[2]-a[2],o=a[1]-e[1],a=e[3]-a[3],e=[0,0],0>n?e[0]=n-i:0>r&&(e[0]=Math.abs(r)+i),0>o?e[1]=o-i:0>a&&(e[1]=Math.abs(a)+i),0===e[0]&&0===e[1])||(i=t.W().get(Pc),i=xs(t,i),e=[i[0]+e[0],i[1]+e[1]],t.W().animate({center:t.Ka(e),duration:this.g.duration,easing:this.g.easing}))}}},gc.ee=function(){Is(this)},gc.setMap=function(t){this.set(Cf,t)};var pf="bottom-left",vf="bottom-center",gf="bottom-right",yf="center-left",mf="center-center",bf="center-right",wf="top-left",xf="top-center",Mf="top-right",Sf="element",Cf="map",Af="offset",If="position",Lf="positioning";i(Ls,j),gc=Ls.prototype,gc.clone=function(){var t=new Ls(Mc({},this.o));ks(t,this.b);var e=this.T();return e&&t.Da(e.clone()),(e=this.i)&&t.ad(e),t},gc.T=function(){return this.get(this.b)},gc.De=function(){return this.a},gc.Ee=function(){this.v()},gc.Gb=function(){this.f&&(C(this.f),this.f=null);var t=this.T();t&&(this.f=M(t,"change",this.Ee,this)),this.v()},gc.Da=function(t){this.set(this.b,t)},gc.ad=function(t){this.g=(this.i=t)?Ps(t):void 0,this.v()};var kf=document.implementation.createDocument("","",null),Pf=Vs();i(Zs,Js),Zs.prototype.$=function(){return"json"},Zs.prototype.i=function(t,e){var i,n=Qs(t),r=qs(this,t,e);if("FeatureCollection"===n.type){i=[];var o,a,n=n.features;for(o=0,a=n.length;o<a;++o)i.push(mh(this,n[o],r))}else i=[mh(this,n,r)];return i},Zs.prototype.b=function(t){t=Qs(t).crs;var e;return t?"name"==t.type?e=_t(t.properties.name):"EPSG"==t.type?e=_t("EPSG:"+t.properties.code):s(!1,36):e=this.defaultDataProjection,e},i(th,Yt),gc=th.prototype,gc.clone=function(){var t=new th(null);return t.U(this.X,this.s.slice()),t},gc.ua=function(){return te(this.s,0,this.s.length,this.a)},gc.Sc=function(t,e){return $s(this.s,0,this.s.length,this.a,t,e)},gc.Ie=function(){var t,e=this.s,i=this.a,n=e[0],r=e[1],o=0;for(t=0+i;t<this.s.length;t+=i)var a=e[t],s=e[t+1],o=o+Math.sqrt((a-n)*(a-n)+(s-r)*(s-r)),n=a,r=s;return o},gc.Ua=function(t){var e=[];return e.length=ie(this.s,0,this.s.length,this.a,t,e,0),t=new th(null),t.U("XY",e),t},gc.$=function(){return"LineString"},gc.ea=function(t,e){t?(Kt(this,e,t,1),this.s||(this.s=[]),this.s.length=Qt(this.s,0,t,this.a),this.v()):this.U("XY",null)},gc.U=function(t,e){qt(this,t,e),this.v()},i(ih,Yt),gc=ih.prototype,gc.clone=function(){var t=new ih(null);return t.U(this.X,this.s.slice(),this.f.slice()),t},gc.ua=function(){return ee(this.s,0,this.f,this.a)},gc.Ta=function(){return this.f},gc.Ua=function(t){var e,i,n=[],r=[],o=this.s,a=this.f,s=this.a,h=0,l=0;for(e=0,i=a.length;e<i;++e){var c=a[e],l=ie(o,h,c,s,t,n,l);r.push(l),h=c}return n.length=l,t=new ih(null),t.U("XY",n,r),t},gc.$=function(){return"MultiLineString"},gc.ea=function(t,e){if(t){Kt(this,e,t,2),this.s||(this.s=[]);var i=$t(this.s,0,t,this.a,this.f);this.s.length=0===i.length?0:i[i.length-1],this.v()}else this.U("XY",null,this.f)},gc.U=function(t,e,i){qt(this,t,e),this.f=i,this.v()},i(ah,Yt),gc=ah.prototype,gc.clone=function(){var t=new ah(null);return t.U(this.X,this.s.slice()),t},gc.ua=function(){return te(this.s,0,this.s.length,this.a)},gc.$=function(){return"MultiPoint"},gc.ea=function(t,e){t?(Kt(this,e,t,1),this.s||(this.s=[]),this.s.length=Qt(this.s,0,t,this.a),this.v()):this.U("XY",null)},gc.U=function(t,e){qt(this,t,e),this.v()},i(sh,Yt),gc=sh.prototype,gc.clone=function(){for(var t=new sh(null),e=this.f.length,i=Array(e),n=0;n<e;++n)i[n]=this.f[n].slice();return uh(t,this.X,this.s.slice(),i),t},gc.ua=function(t){var e;void 0!==t?(e=lh(this).slice(),ue(e,this.f,this.a,t)):e=this.s,t=e,e=this.f;var i,n,r=this.a,o=0,a=[],s=0;for(i=0,n=e.length;i<n;++i){var h=e[i];a[s++]=ee(t,o,h,r,a[s]),o=h[h.length-1]}return a.length=s,a},gc.Ua=function(t){var e=[],i=[],n=this.s,r=this.f,o=this.a;t=Math.sqrt(t);var a,s,h=0,l=0;for(a=0,s=r.length;a<s;++a){var c=r[a],u=[],l=ne(n,h,c,o,t,e,l,u);i.push(u),h=c[c.length-1]}return e.length=l,n=new sh(null),uh(n,"XY",e,i),n},gc.$=function(){return"MultiPolygon"},gc.ea=function(t,e){if(t){Kt(this,e,t,3),this.s||(this.s=[]);var i,n,r=this.s,o=this.a,a=this.f,s=0,a=a?a:[],h=0;for(i=0,n=t.length;i<n;++i)s=$t(r,s,t[i],o,a[h]),a[h++]=s,s=s[s.length-1];a.length=h,0===a.length?this.s.length=0:(r=a[a.length-1],this.s.length=0===r.length?0:r[r.length-1]),this.v()}else uh(this,"XY",null,this.f)},i(fh,Xt),gc=fh.prototype,gc.clone=function(){var t=new fh(null),e=dh(this.b);return ph(t),t.b=e,vh(t),t.v(),t},gc.Cb=function(t){ht(t);for(var e=this.b,i=0,n=e.length;i<n;++i)ut(t,e[i].M());return t},gc.kc=function(t){if(this.l!=this.c&&(p(this.g),this.i=0,this.l=this.c),0>t||0!==this.i&&t<this.i)return this;var e=t.toString();if(this.g.hasOwnProperty(e))return this.g[e];var i,n,r=[],o=this.b,a=!1;for(i=0,n=o.length;i<n;++i){var s=o[i],h=s.kc(t);r.push(h),h!==s&&(a=!0)}return a?(t=new fh(null),ph(t),t.b=r,vh(t),t.v(),this.g[e]=t):(this.i=t,this)},gc.$=function(){return"GeometryCollection"},gc.rotate=function(t,e){for(var i=this.b,n=0,r=i.length;n<r;++n)i[n].rotate(t,e);this.v()},gc.scale=function(t,e,i){i||(i=vt(this.M()));for(var n=this.b,r=0,o=n.length;r<o;++r)n[r].scale(t,e,i);this.v()},gc.zb=function(t){var e,i,n=this.b;for(e=0,i=n.length;e<i;++e)n[e].zb(t);this.v()},gc.translate=function(t,e){var i,n,r=this.b;for(i=0,n=r.length;i<n;++i)r[i].translate(t,e);this.v()},gc.Z=function(){ph(this),Xt.prototype.Z.call(this)},i(gh,Zs);var Tf={Point:function(t){return new oe(t.coordinates)},LineString:function(t){return new th(t.coordinates)},Polygon:function(t){return new fe(t.coordinates)},MultiPoint:function(t){return new ah(t.coordinates)},MultiLineString:function(t){return new ih(t.coordinates)},MultiPolygon:function(t){return new sh(t.coordinates)},GeometryCollection:function(t,e){var i=t.geometries.map(function(t){return yh(t,e)});return new fh(i)}};i(bh,Js),bh.prototype.$=function(){return"xml"},bh.prototype.i=function(t,e){if(t instanceof Document)return wh(this,t,e);if(t instanceof Node)return Mh(this,t,e);if("string"==typeof t){var i=Fs(t);return wh(this,i,e)}return[]},bh.prototype.b=function(t){return t instanceof Document?this.defaultDataProjection:t instanceof Node?this.j(t):"string"==typeof t?(Fs(t),
this.defaultDataProjection):null},bh.prototype.j=function(){return this.defaultDataProjection},i(xh,bh);var Ef=/^[\s\xa0]*$/;xh.prototype.c=function(t,e){var i=t.localName,n=null;if("FeatureCollection"==i)n="http://www.opengis.net/wfs"===t.namespaceURI?Gs([],this.a,t,e,this):Gs(null,this.a,t,e,this);else if("featureMembers"==i||"featureMember"==i){var r,o,a=e[0],s=a.featureType,h=a.featureNS;if(!s&&t.childNodes){for(s=[],h={},r=0,o=t.childNodes.length;r<o;++r){var l=t.childNodes[r];if(1===l.nodeType){var c=l.nodeName.split(":").pop();if(-1===s.indexOf(c)){var u,f="",d=0,l=l.namespaceURI;for(u in h){if(h[u]===l){f=u;break}++d}f||(f="p"+d,h[f]=l),s.push(f+":"+c)}}}"featureMember"!=i&&(a.featureType=s,a.featureNS=h)}"string"==typeof h&&(r=h,h={},h.p0=r);var p,a={},s=Array.isArray(s)?s:[s];for(p in h){for(c={},r=0,o=s.length;r<o;++r)(-1===s[r].indexOf(":")?"p0":s[r].split(":")[0])===p&&(c[s[r].split(":").pop()]="featureMembers"==i?Ds(this.g,this):js(this.g,this));a[h[p]]=c}n="featureMember"==i?Gs(void 0,a,t,e):Gs([],a,t,e)}return null===n&&(n=[]),n},xh.prototype.o=function(t,e){var i=e[0];i.srsName=t.firstElementChild.getAttribute("srsName");var n=Gs(null,this.l,t,e,this);if(n)return Ks(n,!1,i)},xh.prototype.g=function(t,e){var i,n;(n=t.getAttribute("fid"))||(n=t.getAttributeNS("http://www.opengis.net/gml","id")||"");var r,o={};for(i=t.firstElementChild;i;i=i.nextElementSibling){var a=i.localName;if(0===i.childNodes.length||1===i.childNodes.length&&(3===i.firstChild.nodeType||4===i.firstChild.nodeType)){var s=Ts(i);Ef.test(s)&&(s=void 0),o[a]=s}else"boundedBy"!==a&&(r=a),o[a]=this.o(i,e)}return i=new Ls(o),r&&ks(i,r),n&&(i.a=n,i.v()),i},xh.prototype.j=function(t){return _t(this.srsName?this.srsName:t.firstElementChild.getAttribute("srsName"))};var Ff=[null,"http://www.topografix.com/GPX/1/0","http://www.topografix.com/GPX/1/1"];Us(Ff,{rte:Ds(function(t,e){var i=e[0],n=Gs({flatCoordinates:[],layoutOptions:{}},jf,t,e);if(n){var r=n.flatCoordinates;delete n.flatCoordinates;var o=n.layoutOptions;delete n.layoutOptions;var o=_h(o,r),a=new th(null);return a.U(o,r),Ks(a,!1,i),i=new Ls(a),_(i,n),i}}),trk:Ds(function(t,e){var i=e[0],n=Gs({flatCoordinates:[],ends:[],layoutOptions:{}},_f,t,e);if(n){var r=n.flatCoordinates;delete n.flatCoordinates;var o=n.ends;delete n.ends;var a=n.layoutOptions;delete n.layoutOptions;var a=_h(a,r,o),s=new ih(null);return s.U(a,r,o),Ks(s,!1,i),i=new Ls(s),_(i,n),i}}),wpt:Ds(function(t,e){var i=e[0],n=Gs({},Vf,t,e);if(n){var r={},o=Rh([],r,t,n),r=_h(r,o),o=new oe(o,r);return Ks(o,!1,i),i=new Ls(o),_(i,n),i}})});var Df=Us(Ff,{text:_s(Th,"linkText"),type:_s(Th,"linkType")}),jf=Us(Ff,{name:_s(Th),cmt:_s(Th),desc:_s(Th),src:_s(Th),link:Bh,number:_s(kh),extensions:Nh,type:_s(Th),rtept:function(t,e){var i=Gs({},Rf,t,e);if(i){var n=e[e.length-1];Rh(n.flatCoordinates,n.layoutOptions,t,i)}}}),Rf=Us(Ff,{ele:_s(Ih),time:_s(Ah)}),_f=Us(Ff,{name:_s(Th),cmt:_s(Th),desc:_s(Th),src:_s(Th),link:Bh,number:_s(kh),type:_s(Th),extensions:Nh,trkseg:function(t,e){var i=e[e.length-1];Ws(Bf,t,e),i.ends.push(i.flatCoordinates.length)}}),Bf=Us(Ff,{trkpt:function(t,e){var i=Gs({},Nf,t,e);if(i){var n=e[e.length-1];Rh(n.flatCoordinates,n.layoutOptions,t,i)}}}),Nf=Us(Ff,{ele:_s(Ih),time:_s(Ah)}),Vf=Us(Ff,{ele:_s(Ih),time:_s(Ah),magvar:_s(Ih),geoidheight:_s(Ih),name:_s(Th),cmt:_s(Th),desc:_s(Th),src:_s(Th),link:Bh,sym:_s(Th),type:_s(Th),fix:_s(Th),sat:_s(kh),hdop:_s(Ih),vdop:_s(Ih),pdop:_s(Ih),ageofdgpsdata:_s(Ih),dgpsid:_s(kh),extensions:Nh}),Of=["text","type"],Uf=Us(Ff,{text:Bs(jh),type:Bs(jh)}),Wf=Us(Ff,"name cmt desc src link number type rtept".split(" ")),Gf=Us(Ff,{name:Bs(jh),cmt:Bs(jh),desc:Bs(jh),src:Bs(jh),link:Bs(Vh),number:Bs(Dh),type:Bs(jh),rtept:Ns(Bs(Oh))}),Xf=Us(Ff,["ele","time"]),Hf=Us(Ff,"name cmt desc src link number type trkseg".split(" ")),zf=Us(Ff,{name:Bs(jh),cmt:Bs(jh),desc:Bs(jh),src:Bs(jh),link:Bs(Vh),number:Bs(Dh),type:Bs(jh),trkseg:Ns(Bs(function(t,e,i){Hs({node:t,geometryLayout:e.X,properties:{}},Jf,Yf,e.ua(),i)}))}),Yf=Vs("trkpt"),Jf=Us(Ff,{trkpt:Bs(Oh)}),qf=Us(Ff,"ele time magvar geoidheight name cmt desc src link sym type fix sat hdop vdop pdop ageofdgpsdata dgpsid".split(" ")),Kf=Us(Ff,{ele:Bs(Fh),time:Bs(function(t,e){var i=new Date(1e3*e);t.appendChild(kf.createTextNode(i.getUTCFullYear()+"-"+K(i.getUTCMonth()+1)+"-"+K(i.getUTCDate())+"T"+K(i.getUTCHours())+":"+K(i.getUTCMinutes())+":"+K(i.getUTCSeconds())+"Z"))}),magvar:Bs(Fh),geoidheight:Bs(Fh),name:Bs(jh),cmt:Bs(jh),desc:Bs(jh),src:Bs(jh),link:Bs(Vh),sym:Bs(jh),type:Bs(jh),fix:Bs(jh),sat:Bs(Dh),hdop:Bs(Fh),vdop:Bs(Fh),pdop:Bs(Fh),ageofdgpsdata:Bs(Fh),dgpsid:Bs(Dh)});Us(Ff,{rte:Bs(function(t,e,i){var n=i[0],r=Mc({},e.o);t={node:t,properties:r},(e=e.T())&&(e=Ks(e,!0,n),t.geometryLayout=e.X,r.rtept=e.ua()),n=Wf[i[i.length-1].node.namespaceURI],r=Os(r,n),Hs(t,Gf,Pf,r,i,n)}),trk:Bs(function(t,e,i){var n=i[0],r=Mc({},e.o);t={node:t,properties:r},(e=e.T())&&(e=Ks(e,!0,n),r.trkseg=nh(e)),n=Hf[i[i.length-1].node.namespaceURI],r=Os(r,n),Hs(t,zf,Pf,r,i,n)}),wpt:Bs(function(t,e,i){var n=i[0],r=i[i.length-1];r.properties=Mc({},e.o),(e=e.T())&&(e=Ks(e,!0,n),r.geometryLayout=e.X,Oh(t,e.ua(),i))})}),i(Uh,T),Uh.prototype.u=function(){this.b=3,this.g.forEach(C),this.g=null,E(this,"change")},Uh.prototype.B=function(){if(this.b=2,this.c&&(this.a.width=this.c[0],this.a.height=this.c[1]),this.c=[this.a.width,this.a.height],this.g.forEach(C),this.g=null,Wh(this),!this.l&&null!==this.i){this.f.width=this.a.width,this.f.height=this.a.height;var t=this.f.getContext("2d");t.drawImage(this.a,0,0);for(var e=t.getImageData(0,0,this.a.width,this.a.height),i=e.data,n=this.i[0]/255,r=this.i[1]/255,o=this.i[2]/255,a=0,s=i.length;a<s;a+=4)i[a]*=n,i[a+1]*=r,i[a+2]*=o;t.putImageData(e,0,0)}E(this,"change")},Uh.prototype.load=function(){if(0==this.b){this.b=1,this.g=[M(this.a,"error",this.u,this,!0),M(this.a,"load",this.B,this,!0)];try{this.a.src=this.j}catch(t){this.u()}}},i(Gh,yr),gc=Gh.prototype,gc.clone=function(){var t,e=this.rb(1);if(2===this.a.b)if("IMG"===e.tagName.toUpperCase())t=e.cloneNode(!0);else{t=document.createElement("canvas");var i=t.getContext("2d");t.width=e.width,t.height=e.height,i.drawImage(e,0,0)}return new Gh({anchor:this.f.slice(),anchorOrigin:this.c,anchorXUnits:this.A,anchorYUnits:this.C,crossOrigin:this.L,color:this.g&&this.g.slice?this.g.slice():this.g||void 0,img:t?t:void 0,imgSize:t?this.a.c.slice():void 0,src:t?void 0:this.a.j,offset:this.G.slice(),offsetOrigin:this.b,size:null!==this.D?this.D.slice():void 0,opacity:this.j,scale:this.o,snapToPixel:this.B,rotation:this.u,rotateWithView:this.F})},gc.pb=function(){if(this.i)return this.i;var t=this.f,e=this.Ma();if(this.A==Zf||this.C==Zf){if(!e)return null;t=this.f.slice(),this.A==Zf&&(t[0]*=e[0]),this.C==Zf&&(t[1]*=e[1])}if(this.c!=td){if(!e)return null;t===this.f&&(t=this.f.slice()),this.c!=ed&&this.c!=$f||(t[0]=-t[0]+e[0]),this.c!=Qf&&this.c!=$f||(t[1]=-t[1]+e[1])}return this.i=t},gc.rb=function(){var t=this.a;return t.f?t.f:t.a},gc.hc=function(){return this.a.c},gc.Lb=function(){return this.a.b},gc.pc=function(){var t=this.a;if(!t.o)if(t.l){var e=t.c[0],i=t.c[1],n=ti(e,i);n.fillRect(0,0,e,i),t.o=n.canvas}else t.o=t.a;return t.o},gc.sb=function(){if(this.l)return this.l;var t=this.G;if(this.b!=td){var e=this.Ma(),i=this.a.c;if(!e||!i)return null;t=t.slice(),this.b!=ed&&this.b!=$f||(t[0]=i[0]-e[0]-t[0]),this.b!=Qf&&this.b!=$f||(t[1]=i[1]-e[1]-t[1])}return this.l=t},gc.Ma=function(){return this.D?this.D:this.a.c},gc.Yc=function(t,e){return M(this.a,"change",t,e)},gc.load=function(){this.a.load()},gc.sd=function(t,e){S(this.a,"change",t,e)};var Zf="fraction",Qf="bottom-left",$f="bottom-right",td="top-left",ed="top-right";Xh.prototype.clone=function(){return new Xh({font:this.f,rotation:this.j,rotateWithView:this.o,scale:this.c,text:this.ha(),textAlign:this.l,textBaseline:this.u,fill:this.a?this.a.clone():void 0,stroke:this.b?this.b.clone():void 0,offsetX:this.g,offsetY:this.i})},Xh.prototype.ha=function(){return this.D};var id=["http://www.google.com/kml/ext/2.2"],nd=[null,"http://earth.google.com/kml/2.0","http://earth.google.com/kml/2.1","http://earth.google.com/kml/2.2","http://www.opengis.net/kml/2.2"],rd={fraction:Zf,pixels:"pixels"},od=Us(nd,{displayName:_s(Th),value:_s(Th)}),ad=Us(nd,{Data:function(t,e){var i=t.getAttribute("name");Ws(od,t,e);var n=e[e.length-1];null!==i?n[i]=n.value:null!==n.displayName&&(n[n.displayName]=n.value)},SchemaData:function(t,e){Ws(Id,t,e)}}),sd=Us(nd,{LatLonAltBox:function(t,e){var i=Gs({},hd,t,e);if(i){var n=e[e.length-1];n.extent=[parseFloat(i.west),parseFloat(i.south),parseFloat(i.east),parseFloat(i.north)],n.altitudeMode=i.altitudeMode,n.minAltitude=parseFloat(i.minAltitude),n.maxAltitude=parseFloat(i.maxAltitude)}},Lod:function(t,e){var i=Gs({},ld,t,e);if(i){var n=e[e.length-1];n.minLodPixels=parseFloat(i.minLodPixels),n.maxLodPixels=parseFloat(i.maxLodPixels),n.minFadeExtent=parseFloat(i.minFadeExtent),n.maxFadeExtent=parseFloat(i.maxFadeExtent)}}}),hd=Us(nd,{altitudeMode:_s(Th),minAltitude:_s(Ih),maxAltitude:_s(Ih),north:_s(Ih),south:_s(Ih),east:_s(Ih),west:_s(Ih)}),ld=Us(nd,{minLodPixels:_s(Ih),maxLodPixels:_s(Ih),minFadeExtent:_s(Ih),maxFadeExtent:_s(Ih)}),cd=Us(nd,{extrude:_s(Sh),altitudeMode:_s(Th)}),ud=Us(nd,{coordinates:js(zh)}),fd=Us(nd,{innerBoundaryIs:function(t,e){var i=Gs(void 0,yd,t,e);i&&e[e.length-1].push(i)},outerBoundaryIs:function(t,e){var i=Gs(void 0,Sd,t,e);i&&(e[e.length-1][0]=i)}}),dd=Us(nd,{when:function(t,e){var i=e[e.length-1].vd,n=Ts(t),n=Date.parse(n);i.push(isNaN(n)?0:n)}},Us(id,{coord:function(t,e){var i=e[e.length-1].s,n=Ts(t);(n=/^\s*([+\-]?\d+(?:\.\d*)?(?:e[+\-]?\d*)?)\s+([+\-]?\d+(?:\.\d*)?(?:e[+\-]?\d*)?)\s+([+\-]?\d+(?:\.\d*)?(?:e[+\-]?\d*)?)\s*$/i.exec(n))?i.push(parseFloat(n[1]),parseFloat(n[2]),parseFloat(n[3]),0):i.push(0,0,0,0)}})),pd=Us(nd,{coordinates:js(zh)}),vd=Us(nd,{href:_s(Yh)},Us(id,{x:_s(Ih),y:_s(Ih),w:_s(Ih),h:_s(Ih)})),gd=Us(nd,{Icon:_s(function(t,e){var i=Gs({},vd,t,e);return i?i:null}),heading:_s(Ih),hotSpot:_s(function(t){var e=t.getAttribute("xunits"),i=t.getAttribute("yunits");return{x:parseFloat(t.getAttribute("x")),yc:rd[e],y:parseFloat(t.getAttribute("y")),zc:rd[i]}}),scale:_s(Jh)}),yd=Us(nd,{LinearRing:js(qh)}),md=Us(nd,{color:_s(Hh),scale:_s(Jh)}),bd=Us(nd,{color:_s(Hh),width:_s(Ih)}),wd=Us(nd,{LineString:Ds(Zh),LinearRing:Ds(Qh),MultiGeometry:Ds($h),Point:Ds(tl),Polygon:Ds(el)}),xd=Us(id,{Track:Ds(Kh)});Us(nd,{ExtendedData:rl,Region:ol,Link:function(t,e){Ws(Md,t,e)},address:_s(Th),description:_s(Th),name:_s(Th),open:_s(Sh),phoneNumber:_s(Th),visibility:_s(Sh)});var Md=Us(nd,{href:_s(Yh)}),Sd=Us(nd,{LinearRing:js(qh)}),Cd=Us(nd,{Style:_s(il),key:_s(Th),styleUrl:_s(Yh)});Us(nd,{ExtendedData:rl,Region:ol,MultiGeometry:_s($h,"geometry"),LineString:_s(Zh,"geometry"),LinearRing:_s(Qh,"geometry"),Point:_s(tl,"geometry"),Polygon:_s(el,"geometry"),Style:_s(il),StyleMap:function(t,e){var i=Gs(void 0,kd,t,e);if(i){var n=e[e.length-1];Array.isArray(i)?n.Style=i:"string"==typeof i?n.styleUrl=i:s(!1,38)}},address:_s(Th),description:_s(Th),name:_s(Th),open:_s(Sh),phoneNumber:_s(Th),styleUrl:_s(Yh),visibility:_s(Sh)},Us(id,{MultiTrack:_s(function(t,e){var i=Gs([],xd,t,e);if(i){var n=new ih(null);return oh(n,i),n}},"geometry"),Track:_s(Kh,"geometry")}));var Ad=Us(nd,{color:_s(Hh),fill:_s(Sh),outline:_s(Sh)}),Id=Us(nd,{SimpleData:function(t,e){var i=t.getAttribute("name");if(null!==i){var n=Th(t);e[e.length-1][i]=n}}}),Ld=Us(nd,{IconStyle:function(t,e){var i=Gs({},gd,t,e);if(i){var n,r=e[e.length-1],o="Icon"in i?i.Icon:{},a=!("Icon"in i)||0<Object.keys(o).length,s=o.href;s?n=s:a&&(n=void 0);var h,l,c;(s=i.hotSpot)?(h=[s.x,s.y],l=s.yc,c=s.zc):void 0===n?c=l=h=void 0:/^http:\/\/maps\.(?:google|gstatic)\.com\//.test(n)&&(h=[.5,0],c=l=Zf);var u,s=o.x,f=o.y;void 0!==s&&void 0!==f&&(u=[s,f]);var d,s=o.w,o=o.h;void 0!==s&&void 0!==o&&(d=[s,o]);var p,o=i.heading;void 0!==o&&(p=o*Math.PI/180),i=i.scale,a?(void 0==n&&(d=void 0,void 0===i&&(i=void 0)),a=new Gh({anchor:h,anchorOrigin:Qf,anchorXUnits:l,anchorYUnits:c,crossOrigin:"anonymous",offset:u,offsetOrigin:Qf,rotation:p,scale:i,size:d,src:n}),r.imageStyle=a):r.imageStyle=void 0}},LabelStyle:function(t,e){var i=Gs({},md,t,e);i&&(e[e.length-1].textStyle=new Xh({fill:new wr({color:"color"in i?i.color:void 0}),scale:i.scale}))},LineStyle:function(t,e){var i=Gs({},bd,t,e);i&&(e[e.length-1].strokeStyle=new xr({color:"color"in i?i.color:void 0,width:"width"in i?i.width:1}))},PolyStyle:function(t,e){var i=Gs({},Ad,t,e);if(i){var n=e[e.length-1];n.fillStyle=new wr({color:"color"in i?i.color:void 0});var r=i.fill;void 0!==r&&(n.fill=r),i=i.outline,void 0!==i&&(n.outline=i)}}}),kd=Us(nd,{Pair:function(t,e){var i=Gs({},Cd,t,e);if(i){var n=i.key;n&&"normal"==n&&((n=i.styleUrl)&&(e[e.length-1]=n),(i=i.Style)&&(e[e.length-1]=i))}}});Us(nd,["Document","Placemark"]),Us(nd,{Document:Bs(function(t,e,i){Hs({node:t},Pd,pl,e,i,void 0,this)}),Placemark:Bs(ll)});var Pd=Us(nd,{Placemark:Bs(ll)}),Td=Us(nd,{Data:Bs(function(t,e,i){t.setAttribute("name",e.name),t={node:t},e=e.value,"object"==typeof e?(null!==e&&e.displayName&&Hs(t,Td,Pf,[e.displayName],i,["displayName"]),null!==e&&e.value&&Hs(t,Td,Pf,[e.value],i,["value"])):Hs(t,Td,Pf,[e],i,["value"])}),value:Bs(function(t,e){jh(t,e)}),displayName:Bs(function(t,e){t.appendChild(kf.createCDATASection(e))})}),Ed={Point:"Point",LineString:"LineString",LinearRing:"LinearRing",Polygon:"Polygon",MultiPoint:"MultiGeometry",MultiLineString:"MultiGeometry",MultiPolygon:"MultiGeometry",GeometryCollection:"MultiGeometry"},Fd=Us(nd,["href"],Us(id,["x","y","w","h"])),Dd=Us(nd,{href:Bs(jh)},Us(id,{x:Bs(Fh),y:Bs(Fh),w:Bs(Fh),h:Bs(Fh)})),jd=Us(nd,["scale","heading","Icon","hotSpot"]),Rd=Us(nd,{Icon:Bs(function(t,e,i){t={node:t};var n=Fd[i[i.length-1].node.namespaceURI],r=Os(e,n);Hs(t,Dd,Pf,r,i,n),n=Fd[id[0]],r=Os(e,n),Hs(t,Dd,dl,r,i,n)}),heading:Bs(Fh),hotSpot:Bs(function(t,e){t.setAttribute("x",e.x),t.setAttribute("y",e.y),t.setAttribute("xunits",e.yc),t.setAttribute("yunits",e.zc)}),scale:Bs(fl)}),_d=Us(nd,["color","scale"]),Bd=Us(nd,{color:Bs(al),scale:Bs(fl)}),Nd=Us(nd,["color","width"]),Vd=Us(nd,{color:Bs(al),width:Bs(Fh)}),Od=Us(nd,{LinearRing:Bs(cl)}),Ud=Us(nd,{LineString:Bs(cl),Point:Bs(cl),Polygon:Bs(ul),GeometryCollection:Bs(sl)}),Wd=Us(nd,"name open visibility address phoneNumber description styleUrl Style".split(" ")),Gd=Us(nd,{ExtendedData:Bs(function(t,e,i){t={node:t};var n=e.names;e=e.values;for(var r=n.length,o=0;o<r;o++)Hs(t,Td,Zd,[{name:n[o],value:e[o]}],i)}),MultiGeometry:Bs(sl),LineString:Bs(cl),LinearRing:Bs(cl),Point:Bs(cl),Polygon:Bs(ul),Style:Bs(function(t,e,i){t={node:t};var n={},r=e.b,o=e.c,a=e.f;e=e.ha(),a instanceof Gh&&(n.IconStyle=a),e&&(n.LabelStyle=e),o&&(n.LineStyle=o),r&&(n.PolyStyle=r),e=Yd[i[i.length-1].node.namespaceURI],n=Os(n,e),Hs(t,Jd,Pf,n,i,e)}),address:Bs(jh),description:Bs(jh),name:Bs(jh),open:Bs(Eh),phoneNumber:Bs(jh),styleUrl:Bs(jh),visibility:Bs(Eh)}),Xd=Us(nd,{coordinates:Bs(function(t,e,i){i=i[i.length-1];var n=i.layout;i=i.stride;var r;"XY"==n||"XYM"==n?r=2:"XYZ"==n||"XYZM"==n?r=3:s(!1,34);var o,a=e.length,h="";if(0<a){for(h+=e[0],n=1;n<r;++n)h+=","+e[n];for(o=i;o<a;o+=i)for(h+=" "+e[o],n=1;n<r;++n)h+=","+e[o+n]}jh(t,h)})}),Hd=Us(nd,{outerBoundaryIs:Bs(hl),innerBoundaryIs:Bs(hl)}),zd=Us(nd,{color:Bs(al)}),Yd=Us(nd,["IconStyle","LabelStyle","LineStyle","PolyStyle"]),Jd=Us(nd,{IconStyle:Bs(function(t,e,i){t={node:t};var n={},r=e.Ma(),o=e.hc(),a={href:e.a.j};if(r){a.w=r[0],a.h=r[1];var s=e.pb(),h=e.sb();h&&o&&0!==h[0]&&h[1]!==r[1]&&(a.x=h[0],a.y=o[1]-(h[1]+r[1])),s&&0!==s[0]&&s[1]!==r[1]&&(n.hotSpot={x:s[0],yc:"pixels",y:r[1]-s[1],zc:"pixels"})}n.Icon=a,r=e.o,1!==r&&(n.scale=r),e=e.u,0!==e&&(n.heading=e),e=jd[i[i.length-1].node.namespaceURI],n=Os(n,e),Hs(t,Rd,Pf,n,i,e)}),LabelStyle:Bs(function(t,e,i){t={node:t};var n={},r=e.a;r&&(n.color=r.a),(e=e.c)&&1!==e&&(n.scale=e),e=_d[i[i.length-1].node.namespaceURI],n=Os(n,e),Hs(t,Bd,Pf,n,i,e)}),LineStyle:Bs(function(t,e,i){t={node:t};var n=Nd[i[i.length-1].node.namespaceURI];e=Os({color:e.a,width:e.b},n),Hs(t,Vd,Pf,e,i,n)}),PolyStyle:Bs(function(t,e,i){Hs({node:t},zd,qd,[e.a],i)})}),qd=Vs("color"),Kd=Vs("coordinates"),Zd=Vs("Data"),Qd=Vs("ExtendedData"),$d=Vs("innerBoundaryIs"),tp=Vs("Point"),ep=Vs("LineString"),ip=Vs("LinearRing"),np=Vs("Polygon"),rp=Vs("outerBoundaryIs");!function(){var t={},i={S:t};!function(e){if("object"==typeof t&&"undefined"!=typeof i)i.S=e();else{var n;n="undefined"!=typeof window?window:"undefined"!=typeof r?r:"undefined"!=typeof self?self:this,n.Gf=e()}}(function(){return function t(i,n,r){function o(s,h){if(!n[s]){if(!i[s]){var l="function"==typeof e&&e;if(!h&&l)return l(s,!0);if(a)return a(s,!0);throw l=Error("Cannot find module '"+s+"'"),l.code="MODULE_NOT_FOUND",l}l=n[s]={S:{}},i[s][0].call(l.S,function(t){var e=i[s][1][t];return o(e?e:t)},l,l.S,t,i,n,r)}return n[s].S}for(var a="function"==typeof e&&e,s=0;s<r.length;s++)o(r[s]);return o}({1:[function(t,e,i){i.read=function(t,e,i,n,r){var o;o=8*r-n-1;var a=(1<<o)-1,s=a>>1,h=-7;r=i?r-1:0;var l=i?-1:1,c=t[e+r];for(r+=l,i=c&(1<<-h)-1,c>>=-h,h+=o;0<h;i=256*i+t[e+r],r+=l,h-=8);for(o=i&(1<<-h)-1,i>>=-h,h+=n;0<h;o=256*o+t[e+r],r+=l,h-=8);if(0===i)i=1-s;else{if(i===a)return o?NaN:1/0*(c?-1:1);o+=Math.pow(2,n),i-=s}return(c?-1:1)*o*Math.pow(2,i-n)},i.write=function(t,e,i,n,r,o){var a,s=8*o-r-1,h=(1<<s)-1,l=h>>1,c=23===r?Math.pow(2,-24)-Math.pow(2,-77):0;o=n?0:o-1;var u=n?1:-1,f=0>e||0===e&&0>1/e?1:0;for(e=Math.abs(e),isNaN(e)||1/0===e?(e=isNaN(e)?1:0,n=h):(n=Math.floor(Math.log(e)/Math.LN2),1>e*(a=Math.pow(2,-n))&&(n--,a*=2),e=1<=n+l?e+c/a:e+c*Math.pow(2,1-l),2<=e*a&&(n++,a/=2),n+l>=h?(e=0,n=h):1<=n+l?(e=(e*a-1)*Math.pow(2,r),n+=l):(e=e*Math.pow(2,l-1)*Math.pow(2,r),n=0));8<=r;t[i+o]=255&e,o+=u,e/=256,r-=8);for(n=n<<r|e,s+=r;0<s;t[i+o]=255&n,o+=u,n/=256,s-=8);t[i+o-u]|=128*f}},{}],2:[function(t,e){function i(t){this.Fa=ArrayBuffer.isView&&ArrayBuffer.isView(t)?t:new Uint8Array(t||0),this.type=this.O=0,this.length=this.Fa.length}function n(t,e,i){var n,o,a=i.Fa;if(o=a[i.O++],n=(112&o)>>4,128>o)return r(t,n,e);if(o=a[i.O++],n|=(127&o)<<3,128>o)return r(t,n,e);if(o=a[i.O++],n|=(127&o)<<10,128>o)return r(t,n,e);if(o=a[i.O++],n|=(127&o)<<17,128>o)return r(t,n,e);if(o=a[i.O++],n|=(127&o)<<24,128>o)return r(t,n,e);if(o=a[i.O++],128>o)return r(t,n|(1&o)<<31,e);throw Error("Expected varint not more than 10 bytes")}function r(t,e,i){return i?4294967296*e+(t>>>0):4294967296*(e>>>0)+(t>>>0)}e.S=i;var o=t("ieee754");i.f=0,i.b=1,i.a=2,i.c=5,i.prototype={qc:function(t,e,i){for(i=i||this.length;this.O<i;){var n=this.da(),r=n>>3,o=this.O;this.type=7&n,t(r,e,this),this.O===o&&this.gf(n)}return e},Ye:function(){var t=o.read(this.Fa,this.O,!0,23,4);return this.O+=4,t},Xe:function(){var t=o.read(this.Fa,this.O,!0,52,8);return this.O+=8,t},da:function(t){var e,i,r=this.Fa;return i=r[this.O++],e=127&i,128>i?e:(i=r[this.O++],e|=(127&i)<<7,128>i?e:(i=r[this.O++],e|=(127&i)<<14,128>i?e:(i=r[this.O++],e|=(127&i)<<21,128>i?e:(i=r[this.O],n(e|(15&i)<<28,t,this)))))},Ze:function(){return this.da(!0)},rc:function(){var t=this.da();return 1===t%2?(t+1)/-2:t/2},We:function(){return!!this.da()},sc:function(){for(var t=this.da()+this.O,e=this.Fa,i="",n=this.O;n<t;){var r=e[n],o=null,a=239<r?4:223<r?3:191<r?2:1;if(n+a>t)break;var s,h,l;1===a?128>r&&(o=r):2===a?(s=e[n+1],128===(192&s)&&(o=(31&r)<<6|63&s,127>=o&&(o=null))):3===a?(s=e[n+1],h=e[n+2],128===(192&s)&&128===(192&h)&&(o=(15&r)<<12|(63&s)<<6|63&h,2047>=o||55296<=o&&57343>=o)&&(o=null)):4===a&&(s=e[n+1],h=e[n+2],l=e[n+3],128===(192&s)&&128===(192&h)&&128===(192&l)&&(o=(15&r)<<18|(63&s)<<12|(63&h)<<6|63&l,65535>=o||1114112<=o))&&(o=null),null===o?(o=65533,a=1):65535<o&&(o-=65536,i+=String.fromCharCode(o>>>10&1023|55296),o=56320|1023&o),i+=String.fromCharCode(o),n+=a}return this.O=t,i},gf:function(t){if(t&=7,t===i.f)for(;127<this.Fa[this.O++];);else if(t===i.a)this.O=this.da()+this.O;else if(t===i.c)this.O+=4;else{if(t!==i.b)throw Error("Unimplemented type: "+t);this.O+=8}}}},{ieee754:1}]},{},[2])(2)})}(),function(){var t={},i={S:t};!function(e){if("object"==typeof t&&"undefined"!=typeof i)i.S=e();else{var n;n="undefined"!=typeof window?window:"undefined"!=typeof r?r:"undefined"!=typeof self?self:this,n.Kf=e()}}(function(){return function t(i,n,r){function o(s,h){if(!n[s]){if(!i[s]){var l="function"==typeof e&&e;if(!h&&l)return l(s,!0);if(a)return a(s,!0);throw l=Error("Cannot find module '"+s+"'"),l.code="MODULE_NOT_FOUND",l}l=n[s]={S:{}},i[s][0].call(l.S,function(t){var e=i[s][1][t];return o(e?e:t)},l,l.S,t,i,n,r)}return n[s].S}for(var a="function"==typeof e&&e,s=0;s<r.length;s++)o(r[s]);return o}({1:[function(t,e){function i(t,e){this.x=t,this.y=e}e.S=i,i.prototype={clone:function(){return new i(this.x,this.y)},add:function(t){return this.clone().wd(t)},rotate:function(t){return this.clone().Fd(t)},round:function(){return this.clone().Gd()},angle:function(){return Math.atan2(this.y,this.x)},wd:function(t){return this.x+=t.x,this.y+=t.y,this},Fd:function(t){var e=Math.cos(t);t=Math.sin(t);var i=t*this.x+e*this.y;return this.x=e*this.x-t*this.y,this.y=i,this},Gd:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},i.a=function(t){return t instanceof i?t:Array.isArray(t)?new i(t[0],t[1]):t}},{}],2:[function(t,e){e.S.Bf=t("./lib/vectortile.js"),e.S.Cf=t("./lib/vectortilefeature.js"),e.S.Df=t("./lib/vectortilelayer.js")},{"./lib/vectortile.js":3,"./lib/vectortilefeature.js":4,"./lib/vectortilelayer.js":5}],3:[function(t,e){function i(t,e,i){3===t&&(t=new n(i,i.da()+i.O),t.length&&(e[t.name]=t))}var n=t("./vectortilelayer");e.S=function(t,e){this.layers=t.qc(i,{},e)}},{"./vectortilelayer":5}],4:[function(t,e){function i(t,e,i,r,o){this.properties={},this.extent=i,this.type=0,this.Qa=t,this.Dc=-1,this.vb=r,this.xb=o,t.qc(n,this,e)}function n(t,e,i){if(1==t)e.id=i.da();else if(2==t)for(t=i.da()+i.O;i.O<t;){var n=e.vb[i.da()],r=e.xb[i.da()];e.properties[n]=r}else 3==t?e.type=i.da():4==t&&(e.Dc=i.O)}t("point-geometry"),e.S=i,i.a=["Unknown","Point","LineString","Polygon"],i.prototype.bbox=function(){var t=this.Qa;t.O=this.Dc;for(var e=t.da()+t.O,i=1,n=0,r=0,o=0,a=1/0,s=-(1/0),h=1/0,l=-(1/0);t.O<e;)if(n||(n=t.da(),i=7&n,n>>=3),n--,1===i||2===i)r+=t.rc(),o+=t.rc(),r<a&&(a=r),r>s&&(s=r),o<h&&(h=o),o>l&&(l=o);else if(7!==i)throw Error("unknown command "+i);return[a,h,s,l]}},{"point-geometry":1}],5:[function(t,e){function i(t,e){this.version=1,this.name=null,this.extent=4096,this.length=0,this.Qa=t,this.vb=[],this.xb=[],this.ub=[],t.qc(n,this,e),this.length=this.ub.length}function n(t,e,i){15===t?e.version=i.da():1===t?e.name=i.sc():5===t?e.extent=i.da():2===t?e.ub.push(i.O):3===t?e.vb.push(i.sc()):4===t&&e.xb.push(r(i))}function r(t){for(var e=null,i=t.da()+t.O;t.O<i;)e=t.da()>>3,e=1===e?t.sc():2===e?t.Ye():3===e?t.Xe():4===e?t.Ze():5===e?t.da():6===e?t.rc():7===e?t.We():null;return e}var o=t("./vectortilefeature.js");e.S=i,i.prototype.feature=function(t){if(0>t||t>=this.ub.length)throw Error("feature index out of bounds");return this.Qa.O=this.ub[t],t=this.Qa.da()+this.Qa.O,new o(this.Qa,t,this.extent,this.vb,this.xb)}},{"./vectortilefeature.js":4}]},{},[2])(2)})}();var op=[null],ap=Us(op,{nd:function(t,e){e[e.length-1].Xa.push(t.getAttribute("ref"))},tag:gl});Us(op,{node:function(t,e){var i=e[0],n=e[e.length-1],r=t.getAttribute("id"),o=[parseFloat(t.getAttribute("lon")),parseFloat(t.getAttribute("lat"))];n.Ce[r]=o;var a=Gs({tb:{}},sp,t,e);g(a.tb)||(o=new oe(o),Ks(o,!1,i),i=new Ls(o),i.a=r,i.v(),_(i,a.tb),n.features.push(i))},way:function(t,e){for(var i=e[0],n=t.getAttribute("id"),r=Gs({Xa:[],tb:{}},ap,t,e),o=e[e.length-1],a=[],s=0,h=r.Xa.length;s<h;s++)O(a,o.Ce[r.Xa[s]]);r.Xa[0]==r.Xa[r.Xa.length-1]?(s=new fe(null),s.U("XY",a,[a.length])):(s=new th(null),s.U("XY",a)),Ks(s,!1,i),i=new Ls(s),i.a=n,i.v(),_(i,r.tb),o.features.push(i)}});var sp=Us(op,{tag:gl}),hp=[null,"http://www.opengis.net/ows/1.1"];Us(hp,{ServiceIdentification:_s(function(t,e){return Gs({},wp,t,e)}),ServiceProvider:_s(function(t,e){return Gs({},xp,t,e)}),OperationsMetadata:_s(function(t,e){return Gs({},gp,t,e)})});var lp=Us(hp,{DeliveryPoint:_s(Th),City:_s(Th),AdministrativeArea:_s(Th),PostalCode:_s(Th),Country:_s(Th),ElectronicMailAddress:_s(Th)}),cp=Us(hp,{Value:Rs(function(t){return Th(t)})}),up=Us(hp,{AllowedValues:_s(function(t,e){return Gs({},cp,t,e)})}),fp=Us(hp,{Phone:_s(function(t,e){return Gs({},yp,t,e)}),Address:_s(function(t,e){return Gs({},lp,t,e)})}),dp=Us(hp,{HTTP:_s(function(t,e){return Gs({},pp,t,e)})}),pp=Us(hp,{Get:Rs(function(t,e){var i=yl(t);return i?Gs({href:i},mp,t,e):void 0}),Post:void 0}),vp=Us(hp,{DCP:_s(function(t,e){return Gs({},dp,t,e)})}),gp=Us(hp,{Operation:function(t,e){var i=t.getAttribute("name"),n=Gs({},vp,t,e);n&&(e[e.length-1][i]=n)}}),yp=Us(hp,{Voice:_s(Th),Facsimile:_s(Th)}),mp=Us(hp,{Constraint:Rs(function(t,e){var i=t.getAttribute("name");return i?Gs({name:i},up,t,e):void 0})}),bp=Us(hp,{IndividualName:_s(Th),PositionName:_s(Th),ContactInfo:_s(function(t,e){return Gs({},fp,t,e)})}),wp=Us(hp,{Title:_s(Th),ServiceTypeVersion:_s(Th),ServiceType:_s(Th)}),xp=Us(hp,{ProviderName:_s(Th),ProviderSite:_s(yl),ServiceContact:_s(function(t,e){return Gs({},bp,t,e)})});_s(xh.prototype.o,"bounds");var Mp={"http://www.opengis.net/wfs":{totalInserted:_s(kh),totalUpdated:_s(kh),totalDeleted:_s(kh)}},Sp={"http://www.opengis.net/ogc":{FeatureId:Ds(function(t){return t.getAttribute("fid")})}},Cp={"http://www.opengis.net/wfs":{Feature:function(t,e){Ws(Sp,t,e)}}};_s(function(t,e){return Gs({},Mp,t,e)},"transactionSummary"),_s(function(t,e){return Gs([],Cp,t,e)},"insertIds");var Ap=[null,"http://www.opengis.net/wms"];Us(Ap,{Service:_s(function(t,e){return Gs({},Lp,t,e)}),Capability:_s(function(t,e){return Gs({},Ip,t,e)})});var Ip=Us(Ap,{Request:_s(function(t,e){return Gs({},Rp,t,e)}),Exception:_s(function(t,e){return Gs([],Ep,t,e)}),Layer:_s(function(t,e){return Gs({},Fp,t,e)})}),Lp=Us(Ap,{Name:_s(Th),Title:_s(Th),Abstract:_s(Th),KeywordList:_s(xl),OnlineResource:_s(yl),ContactInformation:_s(function(t,e){return Gs({},kp,t,e)}),Fees:_s(Th),AccessConstraints:_s(Th),LayerLimit:_s(kh),MaxWidth:_s(kh),MaxHeight:_s(kh)}),kp=Us(Ap,{ContactPersonPrimary:_s(function(t,e){return Gs({},Pp,t,e)}),ContactPosition:_s(Th),ContactAddress:_s(function(t,e){return Gs({},Tp,t,e)}),ContactVoiceTelephone:_s(Th),ContactFacsimileTelephone:_s(Th),ContactElectronicMailAddress:_s(Th)}),Pp=Us(Ap,{ContactPerson:_s(Th),ContactOrganization:_s(Th)}),Tp=Us(Ap,{AddressType:_s(Th),Address:_s(Th),City:_s(Th),StateOrProvince:_s(Th),PostCode:_s(Th),Country:_s(Th)}),Ep=Us(Ap,{Format:Ds(Th)}),Fp=Us(Ap,{Name:_s(Th),Title:_s(Th),Abstract:_s(Th),KeywordList:_s(xl),CRS:Rs(Th),EX_GeographicBoundingBox:_s(function(t,e){var i=Gs({},jp,t,e);if(i){var n=i.westBoundLongitude,r=i.southBoundLatitude,o=i.eastBoundLongitude,i=i.northBoundLatitude;return void 0===n||void 0===r||void 0===o||void 0===i?void 0:[n,r,o,i]}}),BoundingBox:Rs(function(t){var e=[Lh(t.getAttribute("minx")),Lh(t.getAttribute("miny")),Lh(t.getAttribute("maxx")),Lh(t.getAttribute("maxy"))],i=[Lh(t.getAttribute("resx")),Lh(t.getAttribute("resy"))];return{crs:t.getAttribute("CRS"),extent:e,res:i}}),Dimension:Rs(function(t){return{name:t.getAttribute("name"),units:t.getAttribute("units"),unitSymbol:t.getAttribute("unitSymbol"),default:t.getAttribute("default"),multipleValues:Ch(t.getAttribute("multipleValues")),nearestValue:Ch(t.getAttribute("nearestValue")),current:Ch(t.getAttribute("current")),values:Th(t)}}),Attribution:_s(function(t,e){return Gs({},Dp,t,e)}),AuthorityURL:Rs(function(t,e){var i=ml(t,e);if(i)return i.name=t.getAttribute("name"),i}),Identifier:Rs(Th),MetadataURL:Rs(function(t,e){var i=ml(t,e);if(i)return i.type=t.getAttribute("type"),i}),DataURL:Rs(ml),FeatureListURL:Rs(ml),Style:Rs(function(t,e){return Gs({},Vp,t,e)}),MinScaleDenominator:_s(Ih),MaxScaleDenominator:_s(Ih),Layer:Rs(function(t,e){var i=e[e.length-1],n=Gs({},Fp,t,e);if(n){var r=Ch(t.getAttribute("queryable"));return void 0===r&&(r=i.queryable),n.queryable=void 0!==r&&r,r=Ph(t.getAttribute("cascaded")),void 0===r&&(r=i.cascaded),n.cascaded=r,r=Ch(t.getAttribute("opaque")),void 0===r&&(r=i.opaque),n.opaque=void 0!==r&&r,r=Ch(t.getAttribute("noSubsets")),void 0===r&&(r=i.noSubsets),n.noSubsets=void 0!==r&&r,(r=Lh(t.getAttribute("fixedWidth")))||(r=i.fixedWidth),n.fixedWidth=r,(r=Lh(t.getAttribute("fixedHeight")))||(r=i.fixedHeight),n.fixedHeight=r,["Style","CRS","AuthorityURL"].forEach(function(t){t in i&&(n[t]=(n[t]||[]).concat(i[t]))}),"EX_GeographicBoundingBox BoundingBox Dimension Attribution MinScaleDenominator MaxScaleDenominator".split(" ").forEach(function(t){t in n||(n[t]=i[t])}),n}})}),Dp=Us(Ap,{Title:_s(Th),OnlineResource:_s(yl),LogoURL:_s(wl)}),jp=Us(Ap,{westBoundLongitude:_s(Ih),eastBoundLongitude:_s(Ih),southBoundLatitude:_s(Ih),northBoundLatitude:_s(Ih)}),Rp=Us(Ap,{GetCapabilities:_s(bl),GetMap:_s(bl),GetFeatureInfo:_s(bl)}),_p=Us(Ap,{Format:Rs(Th),DCPType:Rs(function(t,e){return Gs({},Bp,t,e)})}),Bp=Us(Ap,{HTTP:_s(function(t,e){return Gs({},Np,t,e)})}),Np=Us(Ap,{Get:_s(ml),Post:_s(ml)}),Vp=Us(Ap,{Name:_s(Th),Title:_s(Th),Abstract:_s(Th),LegendURL:Rs(wl),StyleSheetURL:_s(ml),StyleURL:_s(ml)}),Op=Us(Ap,{Format:_s(Th),OnlineResource:_s(yl)}),Up=Us(Ap,{Keyword:Ds(Th)}),Wp=[null,"http://www.opengis.net/wmts/1.0"],Gp=[null,"http://www.opengis.net/ows/1.1"];Us(Wp,{Contents:_s(function(t,e){return Gs({},Xp,t,e)})});var Xp=Us(Wp,{Layer:Rs(function(t,e){return Gs({},Hp,t,e)}),TileMatrixSet:Rs(function(t,e){return Gs({},Qp,t,e)})}),Hp=Us(Wp,{Style:Rs(function(t,e){var i=Gs({},zp,t,e);if(i){var n="true"===t.getAttribute("isDefault");return i.isDefault=n,i}}),Format:Rs(Th),TileMatrixSetLink:Rs(function(t,e){return Gs({},Yp,t,e)}),Dimension:Rs(function(t,e){return Gs({},Kp,t,e)}),ResourceURL:Rs(function(t){var e=t.getAttribute("format"),i=t.getAttribute("template");t=t.getAttribute("resourceType");var n={};return e&&(n.format=e),i&&(n.template=i),t&&(n.resourceType=t),n})},Us(Gp,{Title:_s(Th),Abstract:_s(Th),WGS84BoundingBox:_s(function(t,e){var i=Gs([],Zp,t,e);return 2!=i.length?void 0:et(i)}),Identifier:_s(Th)})),zp=Us(Wp,{LegendURL:Rs(function(t){var e={};return e.format=t.getAttribute("format"),e.href=yl(t),e})},Us(Gp,{Title:_s(Th),Identifier:_s(Th)})),Yp=Us(Wp,{TileMatrixSet:_s(Th),TileMatrixSetLimits:_s(function(t,e){return Gs([],Jp,t,e)})}),Jp=Us(Wp,{TileMatrixLimits:Ds(function(t,e){return Gs({},qp,t,e)})}),qp=Us(Wp,{TileMatrix:_s(Th),MinTileRow:_s(kh),MaxTileRow:_s(kh),MinTileCol:_s(kh),MaxTileCol:_s(kh)}),Kp=Us(Wp,{Default:_s(Th),Value:Rs(Th)},Us(Gp,{Identifier:_s(Th)})),Zp=Us(Gp,{LowerCorner:Ds(Ml),UpperCorner:Ds(Ml)}),Qp=Us(Wp,{WellKnownScaleSet:_s(Th),TileMatrix:Rs(function(t,e){return Gs({},$p,t,e)})},Us(Gp,{SupportedCRS:_s(Th),Identifier:_s(Th)})),$p=Us(Wp,{TopLeftCorner:_s(Ml),ScaleDenominator:_s(Ih),TileWidth:_s(kh),TileHeight:_s(kh),MatrixWidth:_s(kh),MatrixHeight:_s(kh)},Us(Gp,{Identifier:_s(Th)}));i(Sl,Yt),Sl.prototype.clone=function(){var t=new Sl(null);return qt(t,this.X,this.s.slice()),t.v(),t},Sl.prototype.Cb=function(t){var e=this.s,i=e[this.a]-e[0];return st(e[0]-i,e[1]-i,e[0]+i,e[1]+i,t)},Sl.prototype.f=function(){var t=this.s[this.a]-this.s[0],e=this.s[this.a+1]-this.s[1];return Math.sqrt(t*t+e*e)},Sl.prototype.$=function(){return"Circle"},i(Al,Oi),gc=Al.prototype,gc.Z=function(){1==this.state&&Il(this),this.a&&L(this.a),this.state=5,this.v(),Oi.prototype.Z.call(this)},gc.Za=function(){return this.c},gc.getKey=function(){return this.f},gc.Fe=function(){this.state=3,Il(this),this.v()},gc.Ge=function(){this.state=this.c.naturalWidth&&this.c.naturalHeight?ou:4,Il(this),this.v()},gc.load=function(){0!=this.state&&3!=this.state||(this.state=1,this.v(),this.b=[M(this.c,"error",this.Fe,this,!0),M(this.c,"load",this.Ge,this,!0)],this.g(this,this.f))},i(kl,as),gc=kl.prototype,gc.$b=function(t){var e=o(t).toString();if(Tl(this,e,t)){Pl(this,e,t);var i=t.T();i?(e=i.M(),this.a&&this.a.Ha(e,t)):this.b[e]=t,E(this,new _l(tv,t))}this.v()},gc.clear=function(t){
if(t){for(var e in this.l)this.l[e].forEach(C);this.i||(this.l={},this.f={},this.j={})}else if(this.a){this.a.forEach(this.tc,this);for(var i in this.b)this.tc(this.b[i])}this.i&&this.i.clear(),this.a&&this.a.clear(),this.C.clear(),this.b={},E(this,new _l(iv)),this.v()},gc.Me=function(){var t;return this.i?t=this.i.a:this.a&&(t=Sa(this.a),g(this.b)||O(t,v(this.b))),t},gc.M=function(){return this.a.M()},gc.Qd=function(t){return t=this.f[t.toString()],void 0!==t?t:null},gc.hd=function(t){t=t.target;var e=o(t).toString(),i=t.T();i?(i=i.M(),e in this.b?(delete this.b[e],this.a&&this.a.Ha(i,t)):this.a&&Ma(this.a,i,t)):e in this.b||(this.a&&this.a.remove(t),this.b[e]=t),i=t.a,void 0!==i?(i=i.toString(),e in this.j?(delete this.j[e],this.f[i]=t):this.f[i]!==t&&(Rl(this,t),this.f[i]=t)):e in this.j||(Rl(this,t),this.j[e]=t),this.v(),E(this,new _l(ev,t))},gc.ld=function(t){var e=o(t).toString();e in this.b?delete this.b[e]:this.a&&this.a.remove(t),this.tc(t),this.v()},gc.tc=function(t){var e=o(t).toString();this.l[e].forEach(C),delete this.l[e];var i=t.a;void 0!==i?delete this.f[i.toString()]:delete this.j[e],E(this,new _l(nv,t))},i(_l,k);var tv="addfeature",ev="changefeature",iv="clear",nv="removefeature";i(Bl,hn),Bl.prototype.setMap=function(t){hn.prototype.setMap.call(this,t),this.Ja()},Bl.prototype.C=Mt,Bl.prototype.Ja=function(){var t=this.V,e=this.get(au);t&&e||Yl(this),this.ca.setMap(e?t:null)};var rv="Point",ov="LineString",av="Polygon",sv="Circle";i(Kl,k);var hv="drawstart",lv="drawend";return i(Zl,Oi),Zl.prototype.Z=function(){1==this.state&&(this.ab.forEach(C),this.ab=null),Oi.prototype.Z.call(this)},Zl.prototype.Za=function(){return this.j},Zl.prototype.md=function(){var t=[];if(this.c.forEach(function(e){e&&e.aa()==ou&&t.push({extent:Ne(this.b,e.ga),image:e.Za()})},this),this.c.length=0,0===t.length)this.state=3;else{var e=this.i[0],i=Oe(this.g,e),n="number"==typeof i?i:i[0],i="number"==typeof i?i:i[1],e=this.g.a[e],r=this.b.a[this.f],o=Ne(this.g,this.i);this.j=is(n,i,this.u,r,this.b.M(),e,o,this.o,t,this.l,this.B),this.state=ou}this.v()},Zl.prototype.load=function(){if(0==this.state){this.state=1,this.v();var t=0;this.ab=[],this.c.forEach(function(e){var i=e.aa();if(0==i||1==i){t++;var n;n=M(e,"change",function(){var i=e.aa();i!=ou&&3!=i&&4!=i||(C(n),t--,0===t&&(this.ab.forEach(C),this.ab=null,this.md()))},this),this.ab.push(n)}},this),this.c.forEach(function(t){0==t.aa()&&t.load()}),0===t&&setTimeout(this.md.bind(this),0)}},i(ic,ds),ic.prototype.Sa=function(t){for(var e,i;nc(this);){e=this.a.Na,i=e.ga[0].toString();var n;if((n=i in t)&&(e=e.ga,n=Le(t[i],e[1],e[2])),n)break;L(this.pop())}},i(rc,as),gc=rc.prototype,gc.gd=function(){return nc(this.a)},gc.Sa=function(t,e){var i=this.qb(t);i&&i.Sa(e)},gc.gc=function(){return 0},gc.getKey=function(){return this.La},gc.Eb=function(t,e,i){return t+"/"+e+"/"+i},gc.jc=function(){return this.C},gc.Ga=function(t){return this.tileGrid?this.tileGrid:Ge(t)},gc.qb=function(t){var e=this.g;return e&&!Bt(e,t)?null:this.a},gc.ud=n,i(hc,k),i(lc,rc),lc.prototype.A=function(t){switch(t=t.target,t.aa()){case 1:E(this,new hc("tileloadstart",t));break;case ou:E(this,new hc("tileloadend",t));break;case 3:E(this,new hc("tileloaderror",t))}},lc.prototype.ud=function(t,e,i){t=this.Eb(t,e,i),ps(this.a,t)&&this.a.get(t)},i(uc,lc),gc=uc.prototype,gc.gd=function(){if(nc(this.a))return!0;for(var t in this.b)if(nc(this.b[t]))return!0;return!1},gc.Sa=function(t,e){var i=this.qb(t);this.a.Sa(this.a==i?e:{});for(var n in this.b){var r=this.b[n];r.Sa(r==i?e:{})}},gc.gc=function(t){return this.g&&t&&Bt(this.g,t),0},gc.jc=function(t){return!(this.g&&t&&!Bt(this.g,t))&&lc.prototype.jc.call(this,t)},gc.Ga=function(t){var e=this.g;return!this.tileGrid||e&&!Bt(e,t)?(e=o(t).toString(),e in this.j||(this.j[e]=Ge(t)),this.j[e]):this.tileGrid},gc.qb=function(t){var e=this.g;return!e||Bt(e,t)?this.a:(t=o(t).toString(),t in this.b||(this.b[t]=new ic),this.b[t])},function(){var t={},i={S:t};!function(e){if("object"==typeof t&&"undefined"!=typeof i)i.S=e();else{var n;n="undefined"!=typeof window?window:"undefined"!=typeof r?r:"undefined"!=typeof self?self:this,n.Hf=e()}}(function(){return function t(i,n,r){function o(s,h){if(!n[s]){if(!i[s]){var l="function"==typeof e&&e;if(!h&&l)return l(s,!0);if(a)return a(s,!0);throw l=Error("Cannot find module '"+s+"'"),l.code="MODULE_NOT_FOUND",l}l=n[s]={S:{}},i[s][0].call(l.S,function(t){var e=i[s][1][t];return o(e?e:t)},l,l.S,t,i,n,r)}return n[s].S}for(var a="function"==typeof e&&e,s=0;s<r.length;s++)o(r[s]);return o}({1:[function(t,e,i){t=t("./processor"),i.zf=t},{"./processor":2}],2:[function(t,e){function i(t){var e=!0;try{new ImageData(10,10)}catch(t){e=!1}return function(i){var n=i.buffers,r=i.meta,o=i.width,a=i.height,s=n.length,h=n[0].byteLength;if(i.imageOps){for(h=Array(s),i=0;i<s;++i){var l,c=h,u=i;l=new Uint8ClampedArray(n[i]);var f=o,d=a;l=e?new ImageData(l,f,d):{data:l,width:f,height:d},c[u]=l}o=t(h,r).data}else{for(o=new Uint8ClampedArray(h),a=Array(s),c=Array(s),i=0;i<s;++i)a[i]=new Uint8ClampedArray(n[i]),c[i]=[0,0,0,0];for(n=0;n<h;n+=4){for(i=0;i<s;++i)u=a[i],c[i][0]=u[n],c[i][1]=u[n+1],c[i][2]=u[n+2],c[i][3]=u[n+3];i=t(c,r),o[n]=i[0],o[n+1]=i[1],o[n+2]=i[2],o[n+3]=i[3]}}return o.buffer}}function n(t,e){var n=Object.keys(t.lib||{}).map(function(e){return"var "+e+" = "+t.lib[e].toString()+";"}).concat(["var __minion__ = ("+i.toString()+")(",t.operation.toString(),");",'self.addEventListener("message", function(event) {',"  var buffer = __minion__(event.data);","  self.postMessage({buffer: buffer, meta: event.data.meta}, [buffer]);","});"]),n=URL.createObjectURL(new Blob(n,{type:"text/javascript"})),n=new Worker(n);return n.addEventListener("message",e),n}function r(t,e){var n=i(t.operation);return{postMessage:function(t){setTimeout(function(){e({data:{buffer:n(t),meta:t.meta}})},0)}}}function o(t){this.Wb=!!t.Ff;var e;e=0===t.threads?0:this.Wb?1:t.threads||1;var i=[];if(e)for(var o=0;o<e;++o)i[o]=n(t,this.Gc.bind(this,o));else i[0]=r(t,this.Gc.bind(this,0));this.yb=i,this.Hc=[],this.wb=0,this.Pa={},this.Xb=null}var a=t("./util").Be;o.prototype.Cd=function(){if(0===this.wb&&0<this.Hc.length){var t=this.Xb=this.Hc.shift(),e=t.Wa[0].width,i=t.Wa[0].height,n=t.Wa.map(function(t){return t.data.buffer}),r=this.yb.length;if(this.wb=r,1===r)this.yb[0].postMessage({buffers:n,meta:t.me,imageOps:this.Wb,width:e,height:i},n);else for(var o=4*Math.ceil(t.Wa[0].data.length/4/r),a=0;a<r;++a){for(var s=a*o,h=[],l=0,c=n.length;l<c;++l)h.push(n[a].slice(s,s+o));this.yb[a].postMessage({buffers:h,meta:t.me,imageOps:this.Wb,width:e,height:i},h)}}},o.prototype.Gc=function(t,e){this.Ef||(this.Pa[t]=e.data,--this.wb,0===this.wb&&this.Ed())},o.prototype.Ed=function(){var t,e,i=this.Xb,n=this.yb.length;if(1===n)t=new Uint8ClampedArray(this.Pa[0].buffer),e=this.Pa[0].meta;else{var r=i.Wa[0].data.length;t=new Uint8ClampedArray(r),e=Array(r);for(var r=4*Math.ceil(r/4/n),o=0;o<n;++o){var s=o*r;t.set(new Uint8ClampedArray(this.Pa[o].buffer),s),e[o]=this.Pa[o].meta}}this.Xb=null,this.Pa={},i.Bb(null,a(t,i.Wa[0].width,i.Wa[0].height),e),this.Cd()},e.S=o},{"./util":3}],3:[function(t,e,i){var n=!0;try{new ImageData(10,10)}catch(t){n=!1}var r=document.createElement("canvas").getContext("2d");i.Be=function(t,e,i){return n?new ImageData(t,e,i):(e=r.createImageData(e,i),e.data.set(t),e)}},{}]},{},[1])(1)})}(),t("ol.Collection",ze),t("ol.Feature",Ls),Ls.prototype.getGeometry=Ls.prototype.T,Ls.prototype.getId=Ls.prototype.De,Ls.prototype.setStyle=Ls.prototype.ad,t("ol.Map",bs),bs.prototype.addInteraction=bs.prototype.Id,bs.prototype.addLayer=bs.prototype.Jd,bs.prototype.addOverlay=bs.prototype.Kd,bs.prototype.forEachFeatureAtPixel=bs.prototype.Pd,bs.prototype.getEventPixel=bs.prototype.Tc,bs.prototype.getLayerGroup=bs.prototype.Fb,bs.prototype.getSize=bs.prototype.Ya,bs.prototype.getView=bs.prototype.W,bs.prototype.getViewport=bs.prototype.Sd,bs.prototype.on=bs.prototype.ka,bs.prototype.removeInteraction=bs.prototype.af,bs.prototype.setLayerGroup=bs.prototype.ef,t("ol.Observable",D),t("ol.Observable.unByKey",function(t){if(Array.isArray(t))for(var e=0,i=t.length;e<i;++e)C(t[e]);else C(t)}),t("ol.Overlay",Ss),t("ol.View",ge),ge.prototype.animate=ge.prototype.animate,ge.prototype.calculateExtent=ge.prototype.Mc,ge.prototype.getZoom=ge.prototype.Td,ge.prototype.setZoom=ge.prototype.ff,t("ol.control.defaults",li),t("ol.extent.containsXY",ot),t("ol.extent.getCenter",vt),t("ol.format.GeoJSON",gh),t("ol.geom.Circle",Sl),Sl.prototype.getLastCoordinate=Sl.prototype.Uc,Sl.prototype.getRadius=Sl.prototype.f,Sl.prototype.on=Sl.prototype.ka,t("ol.geom.LineString",th),th.prototype.getCoordinateAt=th.prototype.Sc,th.prototype.getCoordinates=th.prototype.ua,th.prototype.getLastCoordinate=th.prototype.Uc,th.prototype.getLength=th.prototype.Ie,th.prototype.on=th.prototype.ka,th.prototype.setCoordinates=th.prototype.ea,t("ol.geom.LinearRing",re),t("ol.geom.MultiPolygon",sh),t("ol.geom.Point",oe),oe.prototype.getCoordinates=oe.prototype.ua,t("ol.geom.Polygon",fe),fe.prototype.appendLinearRing=fe.prototype.Ld,fe.prototype.getExtent=fe.prototype.M,t("ol.interaction.Draw",Bl),Bl.prototype.on=Bl.prototype.ka,t("ol.interaction.defaults",Gn),t("ol.layer.Group",zn),zn.prototype.getVisible=zn.prototype.f,zn.prototype.setVisible=zn.prototype.l,t("ol.layer.Tile",vr),vr.prototype.getVisible=vr.prototype.f,vr.prototype.setVisible=vr.prototype.l,t("ol.layer.Vector",Lr),Lr.prototype.getSource=Lr.prototype.oa,Lr.prototype.getVisible=Lr.prototype.f,Lr.prototype.setVisible=Lr.prototype.l,t("ol.proj.Projection",At),At.prototype.getExtent=At.prototype.M,t("ol.proj.addCoordinateTransforms",jt),t("ol.proj.addProjection",Et),t("ol.proj.transform",Wt),Zn.prototype.frameState=Zn.prototype.frameState,Zn.prototype.vectorContext=Zn.prototype.vectorContext,t("ol.render.VectorContext",kr),Pr.prototype.drawCircle=Pr.prototype.Ra,Pr.prototype.setStyle=Pr.prototype.cd,t("ol.source.TileImage",uc),t("ol.source.Vector",kl),kl.prototype.addFeature=kl.prototype.$b,kl.prototype.clear=kl.prototype.clear,kl.prototype.getFeatureById=kl.prototype.Qd,kl.prototype.getFeatures=kl.prototype.Me,kl.prototype.removeFeature=kl.prototype.ld,t("ol.style.Circle",br),t("ol.style.Fill",wr),t("ol.style.Icon",Gh),t("ol.style.RegularShape",mr),t("ol.style.Stroke",xr),t("ol.style.Style",Mr),t("ol.tilegrid.TileGrid",Ee),mc.ol})}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],19:[function(t,e,i){var n={map_w:16384,map_h:16384,map_x_boundaries:[-8475.58617377,9327.49124559],map_y_boundaries:[9028.52473332,-8836.61406266],resolutions:[16,8,4,2,1],visionRadius:{observer:1600,sentry:850,darkness:675},defaultMovementSpeed:300,creepBaseMovementSpeed:325,pullRangeTiming:[4,2.25,4.75]};n.imgCenter=[n.map_w/2,n.map_h/2],n.scale=Math.abs(n.map_x_boundaries[1]-n.map_x_boundaries[0])/n.map_w,e.exports=n},{}],20:[function(t,e,i){var n=t("openlayers"),r=t("./conversionFunctions"),o=t("./mapConstants"),a=new n.proj.Projection({code:"pixel",units:"pixels",extent:[0,0,o.map_w,o.map_h]}),s=new n.proj.Projection({code:"dota",extent:[-8288,-8288,8288,8288],units:"units"});n.proj.addProjection(a),n.proj.addCoordinateTransforms("pixel",s,r.latLonToWorld,r.worldToLatLon),n.proj.addProjection(s),n.proj.addCoordinateTransforms("dota",a,r.worldToLatLon,r.latLonToWorld),e.exports={pixel:a,dota:s}},{"./conversionFunctions":12,"./mapConstants":19,openlayers:18}],21:[function(t,e,i){var n=t("openlayers"),r=t("./util/getFeatureCenter"),o=new n.style.Style({fill:new n.style.Fill({color:"rgba(255,255,255,0.4)"}),stroke:new n.style.Stroke({color:"#3399CC",width:1.25})}),a={creepSpawn:new n.style.Style({image:new n.style.RegularShape({points:6,radius:8,fill:new n.style.Fill({color:"rgba(0, 0, 255, 0.3)"}),stroke:new n.style.Stroke({color:"rgba(0, 0, 255, 0.7)",width:2})})}),neutralCamp:[new n.style.Style({image:new n.style.RegularShape({points:3,radius:8,fill:new n.style.Fill({color:"rgba(0, 255, 0, 0.3)"}),stroke:new n.style.Stroke({color:"rgba(0, 255, 0, 0.7)",width:2})})}),new n.style.Style({image:new n.style.RegularShape({points:3,radius:9,fill:new n.style.Fill({color:"rgba(255, 255, 0, 0.3)"}),stroke:new n.style.Stroke({color:"rgba(255, 255, 0, 0.7)",width:2})})}),new n.style.Style({image:new n.style.RegularShape({points:3,radius:10,fill:new n.style.Fill({color:"rgba(255, 150, 0, 0.3)"}),stroke:new n.style.Stroke({color:"rgba(255, 150, 0, 0.7)",width:2})})}),new n.style.Style({image:new n.style.RegularShape({points:3,radius:11,fill:new n.style.Fill({color:"rgba(255, 0, 0, 0.3)"}),stroke:new n.style.Stroke({color:"rgba(255, 0, 0, 0.7)",width:2})})})],dire:new n.style.Style({fill:new n.style.Fill({color:"rgba(255, 51, 51, 0.2)"}),stroke:new n.style.Stroke({color:"#FF3333",width:2})}),radiant:new n.style.Style({fill:new n.style.Fill({color:"rgba(51, 255, 51, 0.2)"}),stroke:new n.style.Stroke({color:"#33FF33",width:2})}),direCreep:new n.style.Style({fill:new n.style.Fill({color:"rgba(255, 51, 51, 0.2)"}),stroke:new n.style.Stroke({color:"#FF3333",width:10})}),radiantCreep:new n.style.Style({fill:new n.style.Fill({color:"rgba(51, 255, 51, 0.2)"}),stroke:new n.style.Stroke({color:"#33FF33",width:10})}),highlight:new n.style.Style({fill:new n.style.Fill({color:"rgba(255, 255, 0, 0.2)"}),stroke:new n.style.Stroke({color:"#ffff00",width:2})}),select:new n.style.Style({fill:new n.style.Fill({color:"rgba(0, 255, 0, 0.2)"}),stroke:new n.style.Stroke({color:"#00ff00",width:2})}),cursor:new n.style.Style({fill:new n.style.Fill({color:"rgba(255, 255, 255, 0.2)"}),stroke:new n.style.Stroke({color:"rgba(255, 255, 255, 1)",width:1})}),visionSimulation:new n.style.Style({fill:new n.style.Fill({color:"rgba(255, 255, 0, 0.2)"}),stroke:new n.style.Stroke({color:"rgba(255, 255, 0, 1)",width:1})}),dayVision:new n.style.Style({fill:new n.style.Fill({color:"rgba(238, 153, 0, 0.1)"}),stroke:new n.style.Stroke({color:"rgba(238, 153, 0, 0.5)",width:2})}),nightVision:new n.style.Style({fill:new n.style.Fill({color:"rgba(0, 127, 255, 0.1)"}),stroke:new n.style.Stroke({color:"rgba(0, 0, 255, 0.5)",width:2})}),trueSight:new n.style.Style({fill:new n.style.Fill({color:"rgba(0, 127, 255, 0.1)"}),stroke:new n.style.Stroke({color:"rgba(0, 127, 255, 0.5)",width:2})}),attackRange:new n.style.Style({fill:new n.style.Fill({color:"rgba(255, 0, 0, 0.1)"}),stroke:new n.style.Stroke({color:"rgba(255, 0, 0, 0.5)",width:2})}),ent_dota_fountain:[o,new n.style.Style({image:new n.style.Icon({src:"img/svgs/water-15.svg",anchor:[.5,.5]}),geometry:r})],npc_dota_barracks:[o,new n.style.Style({image:new n.style.Icon({src:"img/svgs/stadium-15.svg",anchor:[.5,.5]}),geometry:r})],npc_dota_filler:[o,new n.style.Style({image:new n.style.Icon({src:"img/svgs/landmark-15.svg",anchor:[.5,.5]}),geometry:r})],npc_dota_tower:[o,new n.style.Style({image:new n.style.Icon({src:"img/svgs/castle-15.svg",anchor:[.5,.5]}),geometry:r})],ent_dota_shop:[o,new n.style.Style({image:new n.style.Icon({src:"img/svgs/shop-15.svg",anchor:[.5,.5]}),geometry:r})],npc_dota_fort:[o,new n.style.Style({image:new n.style.Icon({src:"img/svgs/town-hall-15.svg",anchor:[.5,.5]}),geometry:r})],npc_dota_healer:[o,new n.style.Style({image:new n.style.Icon({src:"img/svgs/place-of-worship-15.svg",anchor:[.5,.5]}),geometry:r})],measure:new n.style.Style({fill:new n.style.Fill({color:"rgba(255, 255, 255, 0.3)"}),stroke:new n.style.Stroke({color:"rgba(255,165,0, 0.7)",lineDash:[10,10],width:3}),image:new n.style.Circle({radius:5,stroke:new n.style.Stroke({color:"rgba(255,165,0, 0.7)",width:2}),fill:new n.style.Fill({color:"rgba(255,165,0, 0.3)"})})}),observer:{normal:new n.style.Style({image:new n.style.Icon({src:"img/ward_observer.png",anchor:[.5,1]})}),highlight:new n.style.Style({image:new n.style.Icon({src:"img/ward_observer.png",anchor:[.5,1],color:"#0000ff"})}),remove:new n.style.Style({image:new n.style.Icon({src:"img/ward_observer.png",anchor:[.5,1],color:"#ff0000"})})},sentry:{normal:new n.style.Style({image:new n.style.Icon({src:"img/ward_sentry.png",anchor:[.5,1]})}),highlight:new n.style.Style({image:new n.style.Icon({src:"img/ward_sentry.png",anchor:[.5,1],color:"#0000ff"})}),remove:new n.style.Style({image:new n.style.Icon({src:"img/ward_sentry.png",anchor:[.5,1],color:"#ff0000"})})},tree:{alive:new n.style.Style({fill:new n.style.Fill({color:[0,255,0,.3]}),stroke:new n.style.Stroke({color:[0,255,0,.8]})}),dead:new n.style.Style({fill:new n.style.Fill({color:[51,25,0,.7]}),stroke:new n.style.Stroke({color:[255,128,0,.8]})})},bountyRune:new n.style.Style({image:new n.style.Icon({src:"img/bountyrune.png",anchor:[.5,.5]})}),rune:new n.style.Style({image:new n.style.Icon({src:"img/doubledamage.png",anchor:[.5,.5]})}),roshan:new n.style.Style({image:new n.style.Icon({src:"img/roshan.png",anchor:[.5,.5]})}),pullRange:new n.style.Style({fill:new n.style.Fill({color:"rgba(0, 153, 238, 0.1)"}),stroke:new n.style.Stroke({color:"rgba(0, 153, 238, 0.5)",width:2})})};a.teamColor=function(t,e){return t.getId().indexOf("_bad_")==-1?a.radiant:a.dire},a.creepColor=function(t,e){return t.getId().indexOf("_bad_")==-1?a.radiantCreep:a.direCreep},e.exports=a},{"./util/getFeatureCenter":25,openlayers:18}],22:[function(t,e,i){function n(t){return t.charAt(0).toUpperCase()+t.slice(1)}e.exports=n},{}],23:[function(t,e,i){function n(t,e,i,n){for(var r=360/n,o=[],a=0,s=0;s<n;s++){a+=r;var h=t+i*Math.cos(a*Math.PI/180),l=e+i*Math.sin(a*Math.PI/180);o.push([h,l])}return o}e.exports=n},{}],24:[function(t,e,i){var n=function(t,e,i){for(var n=0;n<t.length;n++)e.call(i,t[n],n)};e.exports=n},{}],25:[function(t,e,i){var n=t("openlayers"),r=function(t){var e=t.getGeometry().getExtent(),i=n.extent.getCenter(e);return new n.geom.Point(i)};e.exports=r},{openlayers:18}],26:[function(t,e,i){function n(t,e){var i=new XMLHttpRequest;return i.open("GET",t,!0),i.onload=function(){if(i.status>=200&&i.status<400){var t=JSON.parse(i.responseText);e(t)}else alert("Error loading page.")},i.onerror=function(){alert("Error loading page.")},i.send(),i}e.exports=n},{}],27:[function(t,e,i){function n(t){t=t.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var e=new RegExp("[\\?&]"+t+"=([^&#]*)"),i=e.exec(location.search);return null==i?"":decodeURIComponent(i[1].replace(/\+/g," "))}function r(t,e){history&&history.replaceState&&history.replaceState(null,"",s(t,e))}function o(t,e){var i=n(t);i=h(h(i," ;")+";"+e," ;"),history&&history.replaceState&&history.replaceState(null,"",s(t,i))}function a(t,e){var i=n(t);i=h(h(i," ;").replace(e,"").replace(/;;/g,"")," ;"),history&&history.replaceState&&history.replaceState(null,"",s(t,""!=i?i:null))}function s(t,e,i){i||(i=window.location.href);var n,r=new RegExp("([?&])"+t+"=.*?(&|#|$)(.*)","gi");if(r.test(i))return"undefined"!=typeof e&&null!==e?i.replace(r,"$1"+t+"="+e+"$2$3"):(n=i.split("#"),i=n[0].replace(r,"$1$3").replace(/(&|\?)$/,""),"undefined"!=typeof n[1]&&null!==n[1]&&(i+="#"+n[1]),i);if("undefined"!=typeof e&&null!==e){var o=i.indexOf("?")!==-1?"&":"?";return n=i.split("#"),i=n[0]+o+t+"="+e,"undefined"!=typeof n[1]&&null!==n[1]&&(i+="#"+n[1]),i}return i}var h=t("./trim");e.exports={getParameterByName:n,setQueryString:r,addQueryStringValue:o,removeQueryStringValue:a,updateQueryString:s}},{"./trim":28}],28:[function(t,e,i){function n(t){return t.replace(/[\[\](){}?*+\^$\\.|\-]/g,"\\$&")}var r=function(t,e,i){if(i=i||"g","string"!=typeof t||"string"!=typeof e||"string"!=typeof i)throw new TypeError("argument must be string");if(!/^[gi]*$/.test(i))throw new TypeError("Invalid flags supplied '"+i.match(new RegExp("[^gi]*"))+"'");return e=n(e),t.replace(new RegExp("^["+e+"]+|["+e+"]+$",i),"")};e.exports=r},{}],29:[function(t,e,i){function n(t){this.imagePath=t,self.canvas=null,self.png=null}var r=t("png-js");n.prototype.load=function(t){var e=this;Date.now();e.canvas=document.createElement("canvas"),r.load(this.imagePath,e.canvas,function(i){e.png=i,e.ctx=e.canvas.getContext("2d"),t()})},n.prototype.scan=function(t,e,i,n,r){for(var o=this.ctx.getImageData(t,0,e,i),a=o.data,s=0;s<a.length;s+=4){var h=a[s],l=a[s+1],c=a[s+2],u=(a[s+3],Math.floor(s/4%e)),f=Math.floor(s/4/i);n(u,f,[h,l,c],r)}},e.exports=n},{"png-js":30}],30:[function(t,e,i){var n,r=t("./zlib");n=function(){function t(t){var e,i,n,r,o,a,s,h,l,c,u,f;for(this.data=t,this.pos=8,this.palette=[],this.imgData=[],this.transparency={},this.text={},n=null;;){switch(e=this.readUInt32(),s=function(){var t,e;for(e=[],r=t=0;t<4;r=++t)e.push(String.fromCharCode(this.data[this.pos++]));return e}.call(this).join("")){case"IHDR":this.width=this.readUInt32(),this.height=this.readUInt32(),this.bits=this.data[this.pos++],this.colorType=this.data[this.pos++],this.compressionMethod=this.data[this.pos++],this.filterMethod=this.data[this.pos++],this.interlaceMethod=this.data[this.pos++];break;case"PLTE":this.palette=this.read(e);break;case"IDAT":for("fdAT"===s&&(this.pos+=4,e-=4),t=(null!=n?n.data:void 0)||this.imgData,r=c=0;0<=e?c<e:c>e;r=0<=e?++c:--c)t.push(this.data[this.pos++]);break;case"tRNS":switch(this.transparency={},this.colorType){case 3:if(this.transparency.indexed=this.read(e),h=255-this.transparency.indexed.length,h>0)for(r=u=0;0<=h?u<h:u>h;r=0<=h?++u:--u)this.transparency.indexed.push(255);break;case 0:this.transparency.grayscale=this.read(e)[0];break;case 2:this.transparency.rgb=this.read(e)}break;case"tEXt":l=this.read(e),o=l.indexOf(0),a=String.fromCharCode.apply(String,l.slice(0,o)),this.text[a]=String.fromCharCode.apply(String,l.slice(o+1));break;case"IEND":return n&&this.animation.frames.push(n),this.colors=function(){switch(this.colorType){case 0:case 3:case 4:return 1;case 2:case 6:return 3}}.call(this),this.hasAlphaChannel=4===(f=this.colorType)||6===f,i=this.colors+(this.hasAlphaChannel?1:0),this.pixelBitlength=this.bits*i,this.colorSpace=function(){switch(this.colors){case 1:return"DeviceGray";case 3:return"DeviceRGB"}}.call(this),void(this.imgData=new Uint8Array(this.imgData));default:this.pos+=e}if(this.pos+=4,this.pos>this.data.length)throw new Error("Incomplete or corrupt PNG file")}}return t.load=function(e,i,n){var r;return"function"==typeof i&&(n=i),r=new XMLHttpRequest,r.open("GET",e,!0),r.responseType="arraybuffer",r.onload=function(){var e,o;return e=new Uint8Array(r.response||r.mozResponseArrayBuffer),o=new t(e),"function"==typeof(null!=i?i.getContext:void 0)&&o.render(i),"function"==typeof n?n(o):void 0},r.send(null)},t.prototype.read=function(t){var e,i,n;for(n=[],e=i=0;0<=t?i<t:i>t;e=0<=t?++i:--i)n.push(this.data[this.pos++]);return n},t.prototype.readUInt32=function(){var t,e,i,n;return t=this.data[this.pos++]<<24,e=this.data[this.pos++]<<16,i=this.data[this.pos++]<<8,n=this.data[this.pos++],t|e|i|n},t.prototype.readUInt16=function(){var t,e;return t=this.data[this.pos++]<<8,e=this.data[this.pos++],t|e},t.prototype.decodePixels=function(t){var e,i,n,o,a,s,h,l,c,u,f,d,p,v,g,y,m,b,w,x,M,S,C;if(null==t&&(t=this.imgData),0===t.length)return new Uint8Array(0);for(t=new r(t),t=t.getBytes(),d=this.pixelBitlength/8,y=d*this.width,p=new Uint8Array(y*this.height),s=t.length,g=0,v=0,i=0;v<s;){switch(t[v++]){case 0:for(o=w=0;w<y;o=w+=1)p[i++]=t[v++];break;case 1:for(o=x=0;x<y;o=x+=1)e=t[v++],a=o<d?0:p[i-d],p[i++]=(e+a)%256;break;case 2:for(o=M=0;M<y;o=M+=1)e=t[v++],n=(o-o%d)/d,m=g&&p[(g-1)*y+n*d+o%d],p[i++]=(m+e)%256;break;case 3:for(o=S=0;S<y;o=S+=1)e=t[v++],n=(o-o%d)/d,a=o<d?0:p[i-d],m=g&&p[(g-1)*y+n*d+o%d],p[i++]=(e+Math.floor((a+m)/2))%256;break;case 4:for(o=C=0;C<y;o=C+=1)e=t[v++],n=(o-o%d)/d,a=o<d?0:p[i-d],0===g?m=b=0:(m=p[(g-1)*y+n*d+o%d],b=n&&p[(g-1)*y+(n-1)*d+o%d]),h=a+m-b,l=Math.abs(h-a),u=Math.abs(h-m),f=Math.abs(h-b),c=l<=u&&l<=f?a:u<=f?m:b,p[i++]=(e+c)%256;break;default:throw new Error("Invalid filter algorithm: "+t[v-1])}g++}return p},t.prototype.decodePalette=function(){var t,e,i,n,r,o,a,s,h,l;for(n=this.palette,a=this.transparency.indexed||[],o=new Uint8Array((a.length||0)+n.length),r=0,i=n.length,t=0,e=s=0,h=n.length;s<h;e=s+=3)o[r++]=n[e],o[r++]=n[e+1],o[r++]=n[e+2],o[r++]=null!=(l=a[t++])?l:255;return o},t.prototype.copyToImageData=function(t,e){var i,n,r,o,a,s,h,l,c,u,f;if(n=this.colors,c=null,i=this.hasAlphaChannel,this.palette.length&&(c=null!=(f=this._decodedPalette)?f:this._decodedPalette=this.decodePalette(),n=4,i=!0),r=t.data||t,l=r.length,a=c||e,o=s=0,1===n)for(;o<l;)h=c?4*e[o/4]:s,u=a[h++],r[o++]=u,r[o++]=u,r[o++]=u,r[o++]=i?a[h++]:255,s=h;else for(;o<l;)h=c?4*e[o/4]:s,r[o++]=a[h++],r[o++]=a[h++],r[o++]=a[h++],r[o++]=i?a[h++]:255,s=h},t.prototype.decode=function(){var t;return t=new Uint8Array(this.width*this.height*4),this.copyToImageData(t,this.decodePixels()),t},t.prototype.render=function(t){var e,i;return t.width=this.width,t.height=this.height,e=t.getContext("2d"),i=e.createImageData(this.width,this.height),this.copyToImageData(i,this.decodePixels()),e.putImageData(i,0,0)},t}(),e.exports=n},{"./zlib":31}],31:[function(t,e,i){var n=function(){function t(){this.pos=0,this.bufferLength=0,this.eof=!1,this.buffer=null}return t.prototype={ensureBuffer:function(t){var e=this.buffer,i=e?e.byteLength:0;if(t<i)return e;for(var n=512;n<t;)n<<=1;for(var r=new Uint8Array(n),o=0;o<i;++o)r[o]=e[o];return this.buffer=r},getByte:function(){for(var t=this.pos;this.bufferLength<=t;){if(this.eof)return null;this.readBlock()}return this.buffer[this.pos++]},getBytes:function(t){var e=this.pos;if(t){this.ensureBuffer(e+t);for(var i=e+t;!this.eof&&this.bufferLength<i;)this.readBlock();var n=this.bufferLength;i>n&&(i=n)}else{for(;!this.eof;)this.readBlock();var i=this.bufferLength}return this.pos=i,this.buffer.subarray(e,i)},lookChar:function(){for(var t=this.pos;this.bufferLength<=t;){if(this.eof)return null;this.readBlock()}return String.fromCharCode(this.buffer[this.pos])},getChar:function(){for(var t=this.pos;this.bufferLength<=t;){if(this.eof)return null;this.readBlock()}return String.fromCharCode(this.buffer[this.pos++])},makeSubStream:function(t,e,i){for(var n=t+e;this.bufferLength<=n&&!this.eof;)this.readBlock();return new Stream(this.buffer,t,e,i)},skip:function(t){t||(t=1),this.pos+=t},reset:function(){this.pos=0}},t}(),r=function(){function t(t){throw new Error(t)}function e(e){var i=0,r=e[i++],o=e[i++];r!=-1&&o!=-1||t("Invalid header in flate stream"),8!=(15&r)&&t("Unknown compression method in flate stream"),((r<<8)+o)%31!=0&&t("Bad FCHECK in flate stream"),32&o&&t("FDICT bit set in flate stream"),this.bytes=e,this.bytesPos=i,this.codeSize=0,this.codeBuf=0,n.call(this)}var i=new Uint32Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),r=new Uint32Array([3,4,5,6,7,8,9,10,65547,65549,65551,65553,131091,131095,131099,131103,196643,196651,196659,196667,262211,262227,262243,262259,327811,327843,327875,327907,258,258,258]),o=new Uint32Array([1,2,3,4,65541,65543,131081,131085,196625,196633,262177,262193,327745,327777,393345,393409,459009,459137,524801,525057,590849,591361,657409,658433,724993,727041,794625,798721,868353,876545]),a=[new Uint32Array([459008,524368,524304,524568,459024,524400,524336,590016,459016,524384,524320,589984,524288,524416,524352,590048,459012,524376,524312,589968,459028,524408,524344,590032,459020,524392,524328,59e4,524296,524424,524360,590064,459010,524372,524308,524572,459026,524404,524340,590024,459018,524388,524324,589992,524292,524420,524356,590056,459014,524380,524316,589976,459030,524412,524348,590040,459022,524396,524332,590008,524300,524428,524364,590072,459009,524370,524306,524570,459025,524402,524338,590020,459017,524386,524322,589988,524290,524418,524354,590052,459013,524378,524314,589972,459029,524410,524346,590036,459021,524394,524330,590004,524298,524426,524362,590068,459011,524374,524310,524574,459027,524406,524342,590028,459019,524390,524326,589996,524294,524422,524358,590060,459015,524382,524318,589980,459031,524414,524350,590044,459023,524398,524334,590012,524302,524430,524366,590076,459008,524369,524305,524569,459024,524401,524337,590018,459016,524385,524321,589986,524289,524417,524353,590050,459012,524377,524313,589970,459028,524409,524345,590034,459020,524393,524329,590002,524297,524425,524361,590066,459010,524373,524309,524573,459026,524405,524341,590026,459018,524389,524325,589994,524293,524421,524357,590058,459014,524381,524317,589978,459030,524413,524349,590042,459022,524397,524333,590010,524301,524429,524365,590074,459009,524371,524307,524571,459025,524403,524339,590022,459017,524387,524323,589990,524291,524419,524355,590054,459013,524379,524315,589974,459029,524411,524347,590038,459021,524395,524331,590006,524299,524427,524363,590070,459011,524375,524311,524575,459027,524407,524343,590030,459019,524391,524327,589998,524295,524423,524359,590062,459015,524383,524319,589982,459031,524415,524351,590046,459023,524399,524335,590014,524303,524431,524367,590078,459008,524368,524304,524568,459024,524400,524336,590017,459016,524384,524320,589985,524288,524416,524352,590049,459012,524376,524312,589969,459028,524408,524344,590033,459020,524392,524328,590001,524296,524424,524360,590065,459010,524372,524308,524572,459026,524404,524340,590025,459018,524388,524324,589993,524292,524420,524356,590057,459014,524380,524316,589977,459030,524412,524348,590041,459022,524396,524332,590009,524300,524428,524364,590073,459009,524370,524306,524570,459025,524402,524338,590021,459017,524386,524322,589989,524290,524418,524354,590053,459013,524378,524314,589973,459029,524410,524346,590037,459021,524394,524330,590005,524298,524426,524362,590069,459011,524374,524310,524574,459027,524406,524342,590029,459019,524390,524326,589997,524294,524422,524358,590061,459015,524382,524318,589981,459031,524414,524350,590045,459023,524398,524334,590013,524302,524430,524366,590077,459008,524369,524305,524569,459024,524401,524337,590019,459016,524385,524321,589987,524289,524417,524353,590051,459012,524377,524313,589971,459028,524409,524345,590035,459020,524393,524329,590003,524297,524425,524361,590067,459010,524373,524309,524573,459026,524405,524341,590027,459018,524389,524325,589995,524293,524421,524357,590059,459014,524381,524317,589979,459030,524413,524349,590043,459022,524397,524333,590011,524301,524429,524365,590075,459009,524371,524307,524571,459025,524403,524339,590023,459017,524387,524323,589991,524291,524419,524355,590055,459013,524379,524315,589975,459029,524411,524347,590039,459021,524395,524331,590007,524299,524427,524363,590071,459011,524375,524311,524575,459027,524407,524343,590031,459019,524391,524327,589999,524295,524423,524359,590063,459015,524383,524319,589983,459031,524415,524351,590047,459023,524399,524335,590015,524303,524431,524367,590079]),9],s=[new Uint32Array([327680,327696,327688,327704,327684,327700,327692,327708,327682,327698,327690,327706,327686,327702,327694,0,327681,327697,327689,327705,327685,327701,327693,327709,327683,327699,327691,327707,327687,327703,327695,0]),5];return e.prototype=Object.create(n.prototype),e.prototype.getBits=function(e){for(var i,n=this.codeSize,r=this.codeBuf,o=this.bytes,a=this.bytesPos;n<e;)"undefined"==typeof(i=o[a++])&&t("Bad encoding in flate stream"),r|=i<<n,n+=8;return i=r&(1<<e)-1,this.codeBuf=r>>e,this.codeSize=n-=e,this.bytesPos=a,i},e.prototype.getCode=function(e){for(var i=e[0],n=e[1],r=this.codeSize,o=this.codeBuf,a=this.bytes,s=this.bytesPos;r<n;){var h;"undefined"==typeof(h=a[s++])&&t("Bad encoding in flate stream"),o|=h<<r,r+=8}var l=i[o&(1<<n)-1],c=l>>16,u=65535&l;return(0==r||r<c||0==c)&&t("Bad encoding in flate stream"),this.codeBuf=o>>c,this.codeSize=r-c,this.bytesPos=s,u},e.prototype.generateHuffmanTable=function(t){for(var e=t.length,i=0,n=0;n<e;++n)t[n]>i&&(i=t[n]);for(var r=1<<i,o=new Uint32Array(r),a=1,s=0,h=2;a<=i;++a,s<<=1,h<<=1)for(var l=0;l<e;++l)if(t[l]==a){for(var c=0,u=s,n=0;n<a;++n)c=c<<1|1&u,u>>=1;for(var n=c;n<r;n+=h)o[n]=a<<16|l;++s}return[o,i]},e.prototype.readBlock=function(){function e(t,e,i,n,r){for(var o=t.getBits(i)+n;o-- >0;)e[S++]=r}var n=this.getBits(3);if(1&n&&(this.eof=!0),n>>=1,0==n){var h,l=this.bytes,c=this.bytesPos;"undefined"==typeof(h=l[c++])&&t("Bad block header in flate stream");var u=h;"undefined"==typeof(h=l[c++])&&t("Bad block header in flate stream"),
u|=h<<8,"undefined"==typeof(h=l[c++])&&t("Bad block header in flate stream");var f=h;"undefined"==typeof(h=l[c++])&&t("Bad block header in flate stream"),f|=h<<8,f!=(65535&~u)&&t("Bad uncompressed block length in flate stream"),this.codeBuf=0,this.codeSize=0;var d=this.bufferLength,p=this.ensureBuffer(d+u),v=d+u;this.bufferLength=v;for(var g=d;g<v;++g){if("undefined"==typeof(h=l[c++])){this.eof=!0;break}p[g]=h}return void(this.bytesPos=c)}var y,m;if(1==n)y=a,m=s;else if(2==n){for(var b=this.getBits(5)+257,w=this.getBits(5)+1,x=this.getBits(4)+4,M=Array(i.length),S=0;S<x;)M[i[S++]]=this.getBits(3);for(var C=this.generateHuffmanTable(M),A=0,S=0,I=b+w,L=new Array(I);S<I;){var k=this.getCode(C);16==k?e(this,L,2,3,A):17==k?e(this,L,3,3,A=0):18==k?e(this,L,7,11,A=0):L[S++]=A=k}y=this.generateHuffmanTable(L.slice(0,b)),m=this.generateHuffmanTable(L.slice(b,I))}else t("Unknown block type in flate stream");for(var p=this.buffer,P=p?p.length:0,T=this.bufferLength;;){var E=this.getCode(y);if(E<256)T+1>=P&&(p=this.ensureBuffer(T+1),P=p.length),p[T++]=E;else{if(256==E)return void(this.bufferLength=T);E-=257,E=r[E];var F=E>>16;F>0&&(F=this.getBits(F));var A=(65535&E)+F;E=this.getCode(m),E=o[E],F=E>>16,F>0&&(F=this.getBits(F));var D=(65535&E)+F;T+A>=P&&(p=this.ensureBuffer(T+A),P=p.length);for(var j=0;j<A;++j,++T)p[T]=p[T-D]}}},e}();e.exports=r},{}],32:[function(t,e,i){function n(t,e){return t>0&&e<0||!(e>0&&t<0)&&t<e}function r(t,e){return!n(t,e)}function o(t,e,i){return e<i?e<=t&&t<=i:e<=t&&t<=Math.PI||-Math.PI<=t&&t<=i}function a(t){return t>Math.PI?-(2*Math.PI-t):t<-Math.PI?2*Math.PI+t:t}function s(t,e){return t>0&&e<0?Math.abs(Math.PI-t-(-Math.PI-e)):e>0&&t<0?Math.abs(-t+e):t<=0&&e<=0?r(t,e)?-t+Math.PI-(-Math.PI-e):Math.abs(e-t):r(t,e)?Math.PI+(Math.PI-t)+e:Math.abs(e-t)}function h(t){for(var e=0,i=0;i<t.length;i++)e+=s(t[i][0],t[i][1]);return e}var l={DIRS:{4:[[0,-1],[1,0],[0,1],[-1,0]],8:[[0,-1],[1,-1],[1,0],[1,1],[0,1],[-1,1],[-1,0],[-1,-1]],6:[[-1,-1],[1,-1],[2,0],[1,1],[-1,1],[-2,0]]}};Number.prototype.mod=function(t){return(this%t+t)%t},Object.create||(Object.create=function(t){var e=function(){};return e.prototype=t,new e}),Function.prototype.extend=function(t){return this.prototype=Object.create(t.prototype),this.prototype.constructor=this,this},"undefined"!=typeof window&&(window.requestAnimationFrame=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(t){return setTimeout(t,1e3/60)},window.cancelAnimationFrame=window.cancelAnimationFrame||window.mozCancelAnimationFrame||window.webkitCancelAnimationFrame||window.oCancelAnimationFrame||window.msCancelAnimationFrame||function(t){return clearTimeout(t)}),l.FOV=function(t,e){this._lightPasses=t,this._options={topology:8};for(var i in e)this._options[i]=e[i]},l.FOV.prototype.compute=function(t,e,i,n){},l.FOV.prototype._getCircle=function(t,e,i){var n,r,o,a=[];switch(this._options.topology){case 4:r=1,o=[0,1],n=[l.DIRS[8][7],l.DIRS[8][1],l.DIRS[8][3],l.DIRS[8][5]];break;case 6:n=l.DIRS[6],r=1,o=[-1,1];break;case 8:n=l.DIRS[4],r=2,o=[-1,1]}for(var s=t+o[0]*i,h=e+o[1]*i,c=0;c<n.length;c++)for(var u=0;u<i*r;u++)a.push([s,h]),s+=n[c][0],h+=n[c][1];return a},l.FOV.PreciseShadowcasting=function(t,e){l.FOV.call(this,t,e)},l.FOV.PreciseShadowcasting.extend(l.FOV),l.FOV.PreciseShadowcasting.prototype.compute=function(t,e,i,n){if(n(t,e,0,1),n(t-1,e-1,0,1),n(t,e-1,0,1),n(t+1,e-1,0,1),n(t-1,e,0,1),n(t+1,e,0,1),n(t-1,e+1,0,1),n(t,e+1,0,1),n(t+1,e+1,0,1),n(t-1,e-2,0,1),n(t,e-2,0,1),n(t+1,e-2,0,1),n(t-2,e-1,0,1),n(t-2,e,0,1),n(t-2,e+1,0,1),n(t+2,e-1,0,1),n(t+2,e,0,1),n(t+2,e+1,0,1),n(t-1,e+2,0,1),n(t,e+2,0,1),n(t+1,e+2,0,1),this._lightPasses(t,e)){for(var r,o,s,h,l,c,u,f,d,p,v,g,y,m,b,w,x=[],M={},S=1,C=1;C<=i;C++){var A=this._getCircle(t,e,C),I=A.length;S+=I,M={};for(var L=0;L<I;L++){r=A[L][0],o=A[L][1];var k=r+","+o;if((t-r)*(t-r)+(e-o)*(e-o)>=i*i)S--;else{var P=P=this.walls[k];if(P&&P.length){for(var T=!1,E=0;E<P.length;E++){var w=P[E];y=w[1],m=w[2],g=w[3],u=y-t,f=m-e,d=Math.sqrt(u*u+f*f),d>.5&&(p=Math.asin(g/d),v=Math.atan2(f,u),h=a(v-p),l=a(v+p),s=!this._lightPasses(r,o),dx1=r-t,dy1=o-e,b=Math.sqrt(dx1*dx1+dy1*dy1),b<d&&(M[w[1]+","+w[2]]=[w[1],w[2]]),u=r-t,f=o-e,d=Math.sqrt(u*u+f*f),p=Math.asin(g/d),v=Math.atan2(f,u),h=a(v-p),l=a(v+p),c=this._checkVisibility(v,h,l,!1,x),c||(T=!0))}c&&!T&&n(r,o,C,c)}else if(y=r,m=o,g=Math.SQRT2/2,u=y-t,f=m-e,d=Math.sqrt(u*u+f*f),d>.5&&(p=Math.asin(g/d),v=Math.atan2(f,u),h=a(v-p),l=a(v+p),s=!this._lightPasses(r,o),c=this._checkVisibility(v,h,l,s,x),c&&n(r,o,C,c),this.done))return}}for(var F in M)if(y=M[F][0],m=M[F][1],u=y-t,f=m-e,d=Math.sqrt(u*u+f*f),g=Math.SQRT2-.01,d>.5&&(p=Math.asin(g/d),v=Math.atan2(f,u),h=a(v-p),l=a(v+p),c=this._checkVisibility(v,h,l,!0,x),this.done))return}return S}},l.FOV.PreciseShadowcasting.prototype._checkVisibility=function(t,e,i,n,r){for(var a=!n,s=0;s<r.length;s++){var h=r[s];if(o(t,h[0],h[1])){if(!n)return!1;a=!1}}return n&&(e<0&&i>=0?(this._mergeShadows(t,0,i,n,r),this.done=!1,this._mergeShadows(t,e,0,n,r)):this._mergeShadows(t,e,i,n,r),1!=r.length||o(e,r[0][0],r[0][1])&&o(i,r[0][0],r[0][1])||e==r[0][0]||i==r[0][1]||(this.done=!0)),a},l.FOV.PreciseShadowcasting.prototype._mergeShadows=function(t,e,i,r,a){for(var s=0,l=!1,c=0;s<a.length;){var u=a[s];if(c=s,o(e,u[0],u[1])){l=!0;break}if(s>0&&o(e,a[s-1][1],u[0])){l=!1;break}if(n(e,u[1])){if(n(e,u[0]))break;s++}else s++,c=s}for(var f=a.length-1,d=!1,p=0;f>=0;){var u=a[f];if(p=f,o(i,u[0],u[1])){d=!0;break}if(n(i,u[0]))f--,p=f;else{if(!n(i,u[1]))break;f--}}if(c==a.length&&!l&&0==p&&d&&(c=0),0==a.length)a.push([e,i]);else{var v=[l?a[c][0]:e,d?a[p][1]:i];p=Math.max(c,p);var g=h(a),y=!1;o(0,v[0],v[1])&&0!=v[0]&&0!=v[1]?(a.splice(c,c!=p||l!=d||l?p-c+1:0,[v[0],0]),0!=a[0][0]&&a[0][1]!=v[1]&&a.splice(c+1,0,[0,v[1]]),y=!0):a.splice(c,c!=p||l!=d||l?p-c+1:0,v);var m=h(a);if(m<g&&(this.done=!0),0==v[0]||y)for(var b=0;0!=a[0][0]&&(a.push(a.shift()),!(b>=a.length));)b++}},e.exports=l},{}],33:[function(t,e,i){function n(t){if(t in f)return f[t];var e=t.split(",").map(function(t){return parseInt(t)}),i={x:e[0],y:e[1],key:t};return f[t]=i,i}function r(t,e){return t+","+e}function o(t,e){return{x:t,y:e,key:t+","+e}}function a(t){return t.x+","+t.y}function s(t,e){var i=(Date.now(),{});for(var n in t){var r=t[n];if(r.z>e)t:for(var o=-1;o<=1;o++)for(var a=-1;a<=1;a++)if(0!==o||0!==a){var s=r.x+o+","+(r.y+a);if(t[s]&&t[s].z<=e){i[r.key]=r;break t}}}return i}function h(t,e,i,n,r,o){for(var a in i)e<n[a]&&r[a]&&o[a].forEach(function(e){var n=e.x+","+e.y;t[n]=(t[n]||[]).concat([["tree",i[a].x,i[a].y,Math.SQRT2]])})}function l(t,e,i,n){function r(t,e,i,n,r){var o={};return t.scan(e,i,n,r,o),o}function a(t,e,i,n){var r=d.ImageXYtoGridXY(t,e);0===i[0]&&(n[r.x+","+r.y]=r)}function s(t,e,i,n){var r=d.ImageXYtoGridXY(t,e);r.z=i[0],n[r.x+","+r.y]=r,d.elevationValues.indexOf(i[0])==-1&&d.elevationValues.push(i[0])}function l(t,e,i,n){var r=d.ImageXYtoGridXY(t,e);if(0==i[1]&&0==i[2]){var a=o(r.x-.5,r.y-.5),s=i[0]+40,h=a.key;d.tree[h]=a,d.tree_elevations[h]=s,d.tree_blocks[h]=[],d.tree_state[h]=!0,[Math.floor,Math.ceil].forEach(function(t){[Math.floor,Math.ceil].forEach(function(e){var i=o(t(a.x),e(a.y));d.tree_relations[i.key]=(d.tree_relations[i.key]||[]).concat(a),d.tree_blocks[h].push(i)})})}}var d=this;this.opts=n||{},this.grid=[],this.gridnav=null,this.ent_fow_blocker_node=null,this.tools_no_wards=null,this.elevationValues=[],this.elevationGrid=null,this.elevationWalls={},this.treeWalls={},this.tree={},this.tree_blocks={},this.tree_relations={},this.tree_elevations={},this.tree_state={},this.walls={},this.radius=this.opts.radius||parseInt(25),this.lights={},this.worldMinX=t.worldMinX,this.worldMinY=t.worldMinY,this.worldMaxX=t.worldMaxX,this.worldMaxY=t.worldMaxY,this.worldWidth=this.worldMaxX-this.worldMinX,this.worldHeight=this.worldMaxY-this.worldMinY,this.gridWidth=this.worldWidth/64+1,this.gridHeight=this.worldHeight/64+1,this.ready=!1,this.area=0,this.imageHandler=new c(e);Date.now();this.imageHandler.load(function(){Date.now();d.gridnav=r(d.imageHandler,2*d.gridWidth,d.gridWidth,d.gridHeight,a),d.ent_fow_blocker_node=r(d.imageHandler,3*d.gridWidth,d.gridWidth,d.gridHeight,a),d.tools_no_wards=r(d.imageHandler,4*d.gridWidth,d.gridWidth,d.gridHeight,a),r(d.imageHandler,d.gridWidth,d.gridWidth,d.gridHeight,l),d.elevationGrid=r(d.imageHandler,0,d.gridWidth,d.gridHeight,s);Date.now();d.elevationValues.forEach(function(t){d.treeWalls[t]={},h(d.treeWalls[t],t,d.tree,d.tree_elevations,d.tree_state,d.tree_blocks)});for(var t=(Date.now(),0);t<d.gridWidth;t++){d.grid[t]=[];for(var e=0;e<d.gridHeight;e++){var n=o(t,e);f[n.key]=n,d.grid[t].push(n)}}Date.now();d.ready=!0,i()}),this.lightPassesCallback=function(t,e){var i=t+","+e;return!(i in d.elevationWalls[d.elevation]||i in d.ent_fow_blocker_node||i in d.treeWalls[d.elevation]&&d.treeWalls[d.elevation][i].length>0)},this.fov=new u.FOV.PreciseShadowcasting(this.lightPassesCallback,{topology:8})}var c=t("./imageHandler.js"),u=t("./rot6.js"),f={};l.prototype.updateVisibility=function(t,e,i){var n=this,o=r(t,e);i=i||n.radius,this.elevation=this.elevationGrid[o].z,this.walls=this.treeWalls[this.elevation],this.elevationWalls[this.elevation]||(this.elevationWalls[this.elevation]=s(this.elevationGrid,this.elevation)),this.fov.walls=this.walls,this.lights={},this.area=this.fov.compute(t,e,i,function(t,e,i,o){var a=r(t,e);if(n.elevationGrid[a]){var s=n.tree_relations[a],h=!1;if(s)for(var l=0;l<s.length;l++){var c=s[l];if(h=n.tree_state[c.key]&&n.tree_elevations[c.key]>n.elevation)break}1!=o||n.ent_fow_blocker_node[a]||h||(n.lights[a]=255)}}),this.lightArea=Object.keys(this.lights).length},l.prototype.isValidXY=function(t,e,i,n,o){if(!this.ready)return!1;var a=r(t,e),s=!1;if(o){var h=this.tree_relations[a];if(h)for(var l=0;l<h.length;l++){var c=h[l];if(s=this.tree_state[c.key])break}}return!(!(t>=0&&t<this.gridWidth&&e>=0&&e<this.gridHeight)||i&&this.gridnav[a]||n&&this.tools_no_wards[a]||o&&s)},l.prototype.toggleTree=function(t,e){var i=this,n=r(t,e),o=!!this.tree_relations[n];if(o)for(var a=this.tree_relations[n],s=0;s<a.length;s++){var h=a[s];this.tree_state[h.key]=!this.tree_state[h.key],this.elevationValues.forEach(function(t){t<i.tree_elevations[h.key]&&(i.tree_blocks[h.key].forEach(function(e){for(var n=i.treeWalls[t][e.key].length-1;n>=0;n--)h.x==i.treeWalls[t][e.key][n][1]&&h.y==i.treeWalls[t][e.key][n][2]&&i.treeWalls[t][e.key].splice(n,1)}),i.tree_state[h.key]&&i.tree_blocks[h.key].forEach(function(e){i.treeWalls[t][e.key]=(i.treeWalls[t][e.key]||[]).concat([["tree",h.x,h.y,Math.SQRT2]])}))})}return o},l.prototype.setRadius=function(t){this.radius=t},l.prototype.WorldXYtoGridXY=function(t,e,i){var n=(t-this.worldMinX)/64,r=(e-this.worldMinY)/64;return i||(n=parseInt(Math.round(n)),r=parseInt(Math.round(r))),{x:n,y:r,key:n+","+r}},l.prototype.GridXYtoWorldXY=function(t,e){return{x:64*t+this.worldMinX,y:64*e+this.worldMinY}},l.prototype.GridXYtoImageXY=function(t,e){return{x:t,y:this.gridHeight-e-1}},l.prototype.ImageXYtoGridXY=function(t,e){var i=this.gridHeight-e-1;return{x:t,y:i,key:t+","+i}},l.prototype.WorldXYtoImageXY=function(t,e){var i=this.WorldXYtoGridXY(t,e);return this.GridXYtoImageXY(i.x,i.y)},l.prototype.key2pt=n,l.prototype.xy2key=r,l.prototype.xy2pt=o,l.prototype.pt2key=a,e.exports=l},{"./imageHandler.js":29,"./rot6.js":32}],34:[function(t,e,i){e.exports={worldMinX:-8288,worldMaxX:8288,worldMinY:-8288,worldMaxY:8288}},{}]},{},[16])(16)});
//# sourceMappingURL=bundle-521b895.min.js.map